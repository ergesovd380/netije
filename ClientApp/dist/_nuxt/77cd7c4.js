(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1909:function(t,e,n){"use strict";var o=n(458),r=n(256),d={Registration:0,Numeration:1};e.a={Values:d,GetAll:function(t){return[{id:d.Registration,name:t.$t("registrationSettings.settingType.registration")},{id:d.Numeration,name:t.$t("registrationSettings.settingType.numeration")}]},mapToRegisterType:function(t){switch(t){case d.Registration:return o.a.Registration;case d.Numeration:return o.a.Numbering;default:throw"Unsupported mapping from SettingType -> RegisterType"}},mapToNumberingType:function(t){switch(t){case d.Registration:return r.a.Registrable;case d.Numeration:return r.a.Numerable;default:throw"Unsupported mapping from SettingType -> NumberingType"}}}},2324:function(t,e,n){"use strict";n.r(e);n(124);var o=n(1909),r=n(163),d=(n(204),n(68)),l=(n(1066),n(103)),c=n(20),m=n.n(c),x=n(4),S={components:{Header:l.a,DxGroupItem:c.DxGroupItem,DxSimpleItem:c.DxSimpleItem,DxLabel:c.DxLabel,DxForm:m.a,Toolbar:r.a},data:function(){return{registrationSetting:{status:d.b.Active,name:null,settingType:o.a.Values.Registration,documentFlow:null,documentRegisterId:null,documentKinds:[],businessUnits:[],departments:[]},statusDataSource:this.$store.getters["status/status"](this)}},methods:{handleSubmit:function(){var t=this;this.$refs.form.instance.validate().isValid&&this.$awn.asyncBlock(this.$axios.post(x.a.docFlow.RegistrationSetting,this.registrationSetting),(function(e){t.$router.go(-1),t.$awn.success()}),(function(e){return t.$awn.alert()}))},resetRelatedEntities:function(){this.registrationSetting.documentKinds=[],this.registrationSetting.documentRegisterId=null}},computed:{settingTypeOptions:function(){var t=this;return{valueExpr:"id",displayExpr:"name",dataSource:o.a.GetAll(this),onValueChanged:function(e){t.resetRelatedEntities()}}},statusOptions:function(){return{valueExpr:"id",displayExpr:"status",dataSource:this.$store.getters["status/status"](this)}},documentFlowOptions:function(){var t=this;return{dataSource:this.$store.getters["docflow/docflow"](this),valueExpr:"id",displayExpr:"name",onValueChanged:function(e){t.resetRelatedEntities()}}},documentKindOptions:function(){var t=o.a.mapToNumberingType(this.registrationSetting.settingType);return{readOnly:null==this.registrationSetting.documentFlow,dataSource:{store:this.$dxStore({key:"id",loadUrl:x.a.docFlow.DocumentKind}),filter:[["status","=",d.b.Active],"and",["documentFlow","=",this.registrationSetting.documentFlow],["numberingType","=",t]]},valueExpr:"id",displayExpr:"name"}},businessUnitsOptions:function(){var t=this;return{dataSource:{store:this.$dxStore({key:"id",loadUrl:x.a.company.BusinessUnit}),filter:["status","=",d.b.Active]},valueExpr:"id",displayExpr:"name",onValueChanged:function(e){t.registrationSetting.departments=[]}}},departmentsOptions:function(){var t=[];this.registrationSetting.businessUnits.map((function(e){t.push(["businessUnitId","=",e]),t.push("or")}));var filter=[["status","=",d.b.Active],"and"];return filter.push(t),{readOnly:0==this.registrationSetting.businessUnits.length,dataSource:{store:this.$dxStore({key:"id",loadUrl:x.a.company.Department}),filter:filter},valueExpr:"id",displayExpr:"name"}},documentRegisterOptions:function(){var t=o.a.mapToRegisterType(this.registrationSetting.settingType);return{readOnly:null==this.registrationSetting.documentFlow,dataSource:{store:this.$dxStore({key:"id",loadUrl:x.a.docFlow.DocumentRegister.Ð¡ustomizableDocumentRegisters}),filter:[["status","=",d.b.Active],"and",["documentFlow","=",this.registrationSetting.documentFlow],"and",["registerType","=",t]]},valueExpr:"id",displayExpr:"name"}}}},f=n(7),component=Object(f.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("Header",{attrs:{headerTitle:this.$t("registrationSettings.caption"),isNew:!0}}),t._v(" "),n("toolbar",{attrs:{canSave:!0},on:{saveChanges:t.handleSubmit}}),t._v(" "),n("DxForm",{ref:"form",attrs:{"col-count":1,"form-data":t.registrationSetting,"read-only":!1,"show-colon-after-label":!0},on:{"update:formData":function(e){t.registrationSetting=e},"update:form-data":function(e){t.registrationSetting=e}}},[n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"col-span":2,isRequired:!0,"data-field":"name","data-type":"string"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("registrationSettings.fields.name")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"settingType","editor-options":t.settingTypeOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("registrationSettings.fields.settingType")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"status","editor-options":t.statusOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("shared.status")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":2,isRequired:!0,"data-field":"documentFlow","editor-options":t.documentFlowOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("shared.documentFlow")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{caption:t.$t("registrationSettings.groups.criterias")}},[n("DxSimpleItem",{attrs:{isRequired:!0,"col-span":2,"editor-options":t.documentKindOptions,"editor-type":"dxTagBox","data-field":"documentKinds"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("registrationSettings.fields.documentKinds")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":2,"editor-options":t.businessUnitsOptions,"editor-type":"dxTagBox","data-field":"businessUnits"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("registrationSettings.fields.businessUnits")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":2,"editor-options":t.departmentsOptions,"editor-type":"dxTagBox","data-field":"departments"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("registrationSettings.fields.departments")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{caption:t.$t("registrationSettings.groups.documentRegister")}},[n("DxSimpleItem",{attrs:{isRequired:!0,"data-field":"documentRegisterId","editor-options":t.documentRegisterOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("registrationSettings.fields.documentRegister")}})],1)],1)],1)],1)])}),[],!1,null,null,null);e.default=component.exports}}]);