(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{2340:function(e,t,r){"use strict";r.r(t);var n=r(14),o=r(5),d=(r(43),r(48),r(40),r(50),r(51),r(30),r(163)),l=r(68),c=r(458),m=r(27),x=r(103),D=r(576),f=r(4),R=r(20),h=r.n(R),v=r(67);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var y={components:{Header:x.a,DxGroupItem:R.DxGroupItem,DxSimpleItem:R.DxSimpleItem,DxLabel:R.DxLabel,DxRequiredRule:R.DxRequiredRule,DxCompareRule:R.DxCompareRule,DxPatternRule:R.DxPatternRule,DxRangeRule:R.DxRangeRule,DxForm:h.a,DxSearchPanel:v.DxSearchPanel,DxDataGrid:v.DxDataGrid,DxColumn:v.DxColumn,DxEditing:v.DxEditing,DxLookup:v.DxLookup,Toolbar:d.a},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.app,n=e.params,t.next=3,r.$axios.get(f.a.docFlow.DocumentRegister.Value+"/".concat(n.id));case 3:return o=t.sent,t.abrupt("return",{documentRegister:o.data});case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{entityType:m.a.DocumentRegister,elements:this.$store.getters["docflow/numberFormatItems"](this),codePattern:this.$store.getters["globalProperties/whitespacePattern"]}},computed:{canUpdate:function(){var e,t=this.documentRegister,r=this.$store.getters["permissions/employeeId"];return!!this.$store.getters["permissions/IsAdmin"]||!!this.$store.getters["permissions/allowUpdating"](this.entityType)&&((null===(e=t.registrationGroup)||void 0===e?void 0:e.responsibleEmployeeId)==r||t.registerType==c.a.Numbering)},isRegistrible:function(){return this.documentRegister.registerType==c.a.Registration},documentFlowOptions:function(){return{valueExpr:"id",displayExpr:"name",dataSource:this.$store.getters["docflow/docflow"](this),readOnly:this.documentRegister.hasDependencies}},registrationGroupOptions:function(){var e=(new D.a).withUrl(f.a.docFlow.ResponsibleForGroupOnMe).filter(["status","=",l.b.Active]).acceptCustomValues((function(e){e.customItem=null})).withoutDeferRendering().focusStateDisabled().clearValueExpr().build(this);return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({readOnly:this.documentRegister.hasDependencies},e)},numberingSectionOptions:function(){return{valueExpr:"id",displayExpr:"name",dataSource:this.$store.getters["docflow/numberingSection"](this),readOnly:this.documentRegister.hasDependencies}},numberingPeriodOptions:function(){return{valueExpr:"id",displayExpr:"name",dataSource:this.$store.getters["docflow/numberingPeriod"](this),readOnly:this.documentRegister.hasDependencies}},registerTypeOptions:function(){var e=this;return{valueExpr:"id",displayExpr:"name",dataSource:this.$store.getters["docflow/registerType"](this),onValueChanged:function(t){e.documentRegister.registrationGroupId=null},readOnly:this.documentRegister.hasDependencies}},statusOptions:function(){return{valueExpr:"id",displayExpr:"status",dataSource:this.$store.getters["status/status"](this)}},numberOfDigitsInNumber:function(){return{max:9,min:0}}},methods:{handleSubmit:function(){var e=this;this.$refs.form.instance.validate().isValid&&this.$awn.asyncBlock(this.$axios.put(f.a.docFlow.DocumentRegister.Value+"/".concat(this.documentRegister.id),this.documentRegister),(function(t){e.$awn.success()}),(function(t){return e.$awn.alert()}))}}},O=y,$=r(7),component=Object($.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Header",{attrs:{isNew:!1,isbackButton:!0,headerTitle:e.documentRegister.name}}),e._v(" "),r("toolbar",{attrs:{canSave:e.canUpdate},on:{saveChanges:e.handleSubmit}}),e._v(" "),r("DxForm",{ref:"form",attrs:{"read-only":!e.canUpdate,"form-data":e.documentRegister,"show-colon-after-label":!0,"show-validation-summary":!1},on:{"update:formData":function(t){e.documentRegister=t},"update:form-data":function(t){e.documentRegister=t}},scopedSlots:e._u([{key:"number-format-items-template",fn:function(){return[r("div",[r("DxDataGrid",{attrs:{"show-borders":!0,"data-source":e.documentRegister.numberFormatItems,errorRowEnabled:!1,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0}},[r("DxEditing",{attrs:{"allow-updating":e.canUpdate,"allow-deleting":e.canUpdate,"allow-adding":e.canUpdate,useIcons:!0,mode:"raw"}}),e._v(" "),r("DxColumn",{attrs:{"data-field":"number",caption:e.$t("translations.fields.number")}},[r("DxRequiredRule",{attrs:{message:e.$t("translations.fields.numberRequired")}})],1),e._v(" "),r("DxColumn",{attrs:{"data-field":"element",caption:e.$t("docFlow.fields.element")}},[r("DxRequiredRule",{attrs:{message:e.$t("docFlow.validation.elementRequired")}}),e._v(" "),r("DxLookup",{attrs:{"data-source":e.elements,allowClearing:!0,valueExpr:"id",displayExpr:"name"}})],1),e._v(" "),r("DxColumn",{attrs:{"data-field":"separator",caption:e.$t("docFlow.fields.separator")}},[r("DxPatternRule",{attrs:{"ignore-empty-value":!1,pattern:e.codePattern,message:e.$t("validation.valueMustNotContainsSpaces")}})],1)],1)],1)]},proxy:!0}])},[e._v(" "),r("DxGroupItem",[r("DxSimpleItem",{attrs:{"data-field":"name"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("shared.name")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("shared.nameRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"index"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("translations.fields.index")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("translations.fields.indexRequired")}}),e._v(" "),r("DxPatternRule",{attrs:{"ignore-empty-value":!1,pattern:e.codePattern,message:e.$t("validation.valueMustNotContainsSpaces")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"editor-type":"dxNumberBox","editor-options":e.numberOfDigitsInNumber,"data-field":"numberOfDigitsInNumber"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("docFlow.fields.numberOfDigitsInNumber")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("docFlow.validation.numberOfDigitsInNumberRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"documentFlow","editor-options":e.documentFlowOptions,"editor-type":"dxSelectBox"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("docFlow.fields.documentFlow")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("docFlow.validation.documentFlowRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"read-only":e.documentRegister.hasDependencies,"data-field":"registerType","editor-options":e.registerTypeOptions,"editor-type":"dxSelectBox"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("translations.fields.registerType")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("translations.fields.registerTypeRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"read-only":e.documentRegister.hasDependencies,visible:e.isRegistrible,"data-field":"registrationGroup","editor-options":e.registrationGroupOptions,"editor-type":"dxSelectBox"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("translations.fields.registrationGroupId")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("translations.fields.registrationGroupIdRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"read-only":e.documentRegister.hasDependencies,"editor-type":"dxSelectBox","editor-options":e.numberingSectionOptions,"data-field":"numberingSection"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("translations.fields.numberingSection")}}),e._v(" "),r("DxRequiredRule",{attrs:{message:e.$t("translations.fields.numberingSectionRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"read-only":e.documentRegister.hasDependencies,"data-field":"numberingPeriod","editor-options":e.numberingPeriodOptions,"editor-type":"dxSelectBox"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("docFlow.fields.numberingPeriod")}}),e._v(" "),r("DxRequiredRule",{attrs:{numberingPeriodOptions:"",message:e.$t("docFlow.validation.numberingPeriodRequired")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"status","editor-options":e.statusOptions,"editor-type":"dxSelectBox"}},[r("DxLabel",{attrs:{location:"top",text:e.$t("translations.fields.status")}})],1)],1),e._v(" "),r("DxSimpleItem",{attrs:{template:"number-format-items-template"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);