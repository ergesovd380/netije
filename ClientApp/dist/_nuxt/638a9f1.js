(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1937:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSI5IiBoZWlnaHQ9IjkiIGZpbGw9IndoaXRlIi8+DQo8cmVjdCB4PSI2IiB5PSI2IiB3aWR0aD0iOSIgaGVpZ2h0PSI5IiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDFDMCAwLjQ0NzcxNSAwLjQ0NzcxNSAwIDEgMEgxMEMxMC41NTIzIDAgMTEgMC40NDc3MTUgMTEgMVY3LjIwMDI5TDkuNDk5NjEgNS45OTk5NUg3Ljk5OTYxVjdIMlYxMEgzVjlINVYxMEg0Ljk5OTYxVjExSDFDMC40NDc3MTUgMTEgMCAxMC41NTIzIDAgMTBWMVpNMiAxSDlWNUgyVjFaIiBmaWxsPSIjMDA5YTQwIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1IDZMMTUgMTVMNiAxNUw2IDEyTDUgMTJMNSAxNUM1IDE1LjU1MjMgNS40NDc3MiAxNiA2IDE2TDE1IDE2QzE1LjU1MjMgMTYgMTYgMTUuNTUyMyAxNiAxNUwxNiA2QzE2IDUuNDQ3NzIgMTUuNTUyMyA1IDE1IDVMMTIgNUwxMiA2TDE1IDZaIiBmaWxsPSIjMzMzIi8+DQo8cmVjdCB4PSI2IiB5PSI5IiB3aWR0aD0iNSIgaGVpZ2h0PSIyIiBmaWxsPSIjMzMzIi8+DQo8cGF0aCBkPSJNOSA3VjEzTDEzIDEwTDkgN1oiIGZpbGw9IiMzMzMiLz4NCjwvc3ZnPg0K"},1943:function(t,e,n){"use strict";var o=n(5),r=(n(30),n(137));e.a={handleConfirm:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.$store.getters["documents/".concat(e,"/isDataChanged")]){n.next=5;break}return n.next=4,Object(r.confirm)(t.$t("document.fields.areYouSureCancelDocument"),t.$t("shared.confirm"));case 4:return n.abrupt("return",n.sent);case 5:return n.abrupt("return",!0);case 6:case"end":return n.stop()}}),n)})))()}}},1986:function(t,e,n){var content=n(2131);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("3a4d40f0",content,!0,{sourceMap:!1})},1997:function(t,e,n){var content=n(2141);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("9b16dc7e",content,!0,{sourceMap:!1})},2130:function(t,e,n){"use strict";n(1986)},2131:function(t,e,n){var o=n(25)(!1);o.push([t.i,"\n.navBar[data-v-74fdd300] {\r\n  margin: 5px 0px;\n}\r\n",""]),t.exports=o},2140:function(t,e,n){"use strict";n(1997)},2141:function(t,e,n){var o=n(25)(!1);o.push([t.i,"*{outline:none}.scrool-auto{width:100%;height:100%;overflow:auto}.d-flex{display:flex}.justify-flex-end{justify-content:flex-end}.list__content div{padding-right:5px}.f-size-30{margin:5px;font-size:20px}.js-space-between{align-items:center}.thread-text-status{text-align:right;margin-left:auto;padding:0 5px;font-size:14px}.thread-text-status .task__item{white-space:nowrap}.thread-text-status i{font-size:16px}.mY-1{margin:10px 0}.ml-1{margin-left:1.2em}.current-comment{background:#ecfff46b}.item--status{justify-content:flex-end}.item--status .icon--status{margin:0 5px;display:flex;width:20px;height:100%}.custom-icon{margin:0 5px;display:flex;width:20px;height:100%}.message-body{margin-left:30px}.comment__item{box-sizing:border-box;white-space:normal;border:1px solid #ddd;border-left:2px solid #009a40;padding:5px;border-radius:2px;border-top-left-radius:4px;border-bottom-left-radius:4px}.expired{color:red}.text--bold{font-weight:500}.text-italic{font-style:italic}.link:hover{text-decoration:underline;color:#f90}.container--grid{display:grid;grid-template-columns:1fr 1fr}.container--grid .item{justify-self:flex-start;width:100%}.quide-page{padding:20px 0 20px}.quide-page .quide-page__header{padding:0;margin:0 50px;padding-bottom:20px}.quide-page .quide-page__header .header-title{font-size:26px !important;color:#777}.quide-page .quide-page__header h2{font-weight:450;padding:0;margin:0 !important}.quide-page .title{color:#777}.quide-page .description{color:#aaa;font-size:0.9em}.message{box-sizing:border-box;padding:8px 0;font-size:15px;align-items:center}.message .message__label{display:block;padding-right:8px}.message .message__icon{display:block;font-size:18px;padding-right:8px}.cursive{font-style:italic}.content{line-height:1.5}.content h2{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small .content-block{margin-left:20px;margin-right:20px}.responsive-paddings{padding:20px}.screen-large .responsive-paddings{padding:40px}.dx-card.wide-card{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content{height:100%}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content>.dx-scrollview-content{display:flex;flex-direction:column;min-height:100%}#gridContainer{max-height:85vh}.f-direction-column{height:200px;justify-content:space-between;flex-direction:column}.wrapper--relative{position:relative;height:100%}.wrapper--relative .item--drawer{position:absolute;top:0;right:0}.fade-enter,.fade-leave-to{transform:translateX(40vw)}.fade-enter-active,.fade-leave-active{transition:transform 0.5s}\n",""]),t.exports=o},2269:function(t,e,n){"use strict";n.r(e);var o,r=n(5),c=(n(30),n(59)),d=n(375),dialog=n(137),m=n(1943),l=n(14),h=(n(64),n(20)),f=n.n(h),x=n(4),I=n(1883),D=n(373),v=n(142),w=n.n(v),y=n(49),O=n(1954),T=n(1955),$=n(384),C=(n(224),n(27),n(1067)),S=n.n(C),j=n(1937),N=n.n(j),M={components:{toolbarItemUploadVersion:T.a,toolbarItemAccessRight:$.a,toolbarItemCreateVersion:O.a,DxButton:y.DxButton,DxToolbar:w.a,DxItem:v.DxItem},props:["isCard","documentId"],inject:["trySaveDocument"],data:function(){return{saveIcon:S.a,saveAndCloseIcon:N.a}},computed:(o={readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.document.id,"/canUpdate")]},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},canBeOpenedWithPreview:function(){return this.document.canBeOpenedWithPreview},canEditVersion:function(){return Object(I.a)(this.document.extension)&&this.canUpdate&&this.document.canBeOpenedWithPreview},hasVersions:function(){return this.document.hasVersions},isNew:function(){return this.$store.getters["documents/".concat(this.documentId,"/isNew")]},entityType:function(){return Object(c.b)(this.document.documentTypeGuid)}},Object(l.a)(o,"canUpdate",(function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]})),Object(l.a)(o,"isDataChanged",(function(){return this.$store.getters["documents/".concat(this.documentId,"/isDataChanged")]})),Object(l.a)(o,"canRegister",(function(){return this.$store.getters["documents/".concat(this.documentId,"/canRegister")]&&this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]})),Object(l.a)(o,"canDelete",(function(){return this.$store.getters["documents/".concat(this.documentId,"/canDelete")]&&!this.isNew})),Object(l.a)(o,"previewButtonOptions",(function(){var t=this;return{text:this.$t("buttons.read"),hint:this.$t("buttons.read"),icon:"pdffile",onClick:function(){Object(I.b)({context:t,options:{readOnly:!0,extension:t.document.extension,params:{documentId:t.documentId}},lastVersion:!0})}}})),Object(l.a)(o,"editButtonOptions",(function(){var t=this;return{text:this.$t("buttons.edit"),hint:this.$t("buttons.edit"),icon:"edit",onClick:function(){Object(I.b)({context:t,options:{readOnly:!1,extension:t.document.extension,params:{documentId:t.document.id}},lastVersion:!0,listeners:[{eventName:"valueChanged",handlerName:"pasteVersion"}]})}}})),Object(l.a)(o,"saveButtonOptions",(function(){var t,e=this;return{icon:S.a,disabled:!this.canUpdate||!this.isDataChanged,onClick:(t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.trySaveDocument();case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})),Object(l.a)(o,"versionOptions",(function(){var t=this;return{icon:"unselectall",hint:this.$t("buttons.versions"),text:this.$t("buttons.versions"),onClick:function(){t.$emit("openVersion")}}})),Object(l.a)(o,"saveAndBackButtonOptions",(function(){var t,e=this;return{icon:N.a,hint:this.$t("buttons.saveAndBack"),disabled:!this.canUpdate||!this.isDataChanged,onClick:(t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.trySaveDocument();case 2:if(!t.sent){t.next=4;break}e.$emit("onClose");case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})),Object(l.a)(o,"removeDocumentButtonOptions",(function(){var t=this;return{icon:"trash",type:"normal",hint:this.$t("document.remove"),onClick:function(){Object(dialog.confirm)(t.$t("shared.areYouSure"),t.$t("shared.confirm")).then((function(e){e&&t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/delete")),(function(e){t.$emit("onRemove"),t.$awn.success()}),(function(e){t.$awn.alert()}))}))}}})),Object(l.a)(o,"refreshButtonOptions",(function(){var t=this;return{icon:"refresh",onClick:function(){var e=t.document,n=e.documentTypeGuid,o=e.id;t.$awn.asyncBlock(Object(d.e)(t,{documentTypeGuid:n,documentId:o}),(function(){}))}}})),Object(l.a)(o,"refreshMergeFieldParamsButtonOptions",(function(){var t=this;return{icon:"refresh",text:this.$t("buttons.refreshMergeFieldParams"),onClick:function(){t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/mergeFieldNameParams")),(function(){}))}}})),o),methods:{pasteVersion:function(t){var e=t.file;switch(t.extension){case".docx":this.pasteDocxVersion({file:e});break;case".xlsx":this.pasteXlsXVersion({file:e});break;default:throw"can't paste this file "}},pasteXlsXVersion:function(t){var e=this,n=t.file;this.$awn.asyncBlock(D.b.createVersionFromSpreadSheet(this,this.document,n),(function(){e.$awn.success()}),(function(){e.$awn.alert()}))},pasteDocxVersion:function(t){var e=this,n=t.file;this.$awn.asyncBlock(D.b.createVersionFromDocumentEditor(this.document,n,this,"test.docx"),(function(){e.$awn.success()}),(function(){e.$awn.alert()}))}}},_=M,E=(n(2130),n(7)),B=Object(E.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navBar"},[n("DxToolbar",{scopedSlots:t._u([{key:"toolbarItemAccessRight",fn:function(){return[n("toolbar-item-access-right",{attrs:{"entity-type":t.entityType,"entity-id":t.documentId}})]},proxy:!0},{key:"toolbarItemCreateVersion",fn:function(){return[n("toolbarItemCreateVersion",{attrs:{documentId:t.documentId}})]},proxy:!0}])},[n("DxItem",{attrs:{locateInMenu:"auto",options:t.saveButtonOptions,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",options:t.saveAndBackButtonOptions,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",options:t.refreshButtonOptions,visible:!t.isDataChanged,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",options:t.refreshMergeFieldParamsButtonOptions,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{options:t.versionOptions,location:"after",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{template:"toolbarItemAccessRight",location:"after"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{template:"toolbarItemCreateVersion",locateInMenu:"auto",visible:!t.hasVersions&&t.canUpdate,location:"before"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{options:t.previewButtonOptions,locateInMenu:"auto",visible:t.canBeOpenedWithPreview,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{options:t.editButtonOptions,locateInMenu:"auto",visible:t.canEditVersion,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{visible:t.canDelete,options:t.removeDocumentButtonOptions,location:"after",widget:"dxButton"}})],1)],1)}),[],!1,null,"74fdd300",null).exports,R=n(103),k=n(2058),V=n(2055),U=(n(48),n(40),n(50),n(51),n(43),n(124),n(576)),A=n(68);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function G(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var z={components:{DxForm:f.a,DxTabbedItem:h.DxTabbedItem,DxTab:h.DxTab,DxGroupItem:h.DxGroupItem,DxSimpleItem:h.DxSimpleItem,DxRequiredRule:h.DxRequiredRule,DxLabel:h.DxLabel},props:["documentId","isCard"],inject:["documentValidatorName"],computed:{canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},documentTypeGuid:function(){return this.document.documentTypeGuid},documentTypeId:function(){return this.document.documentTypeId},documentKinds:function(){return this.document.documentKinds},businessUnits:function(){return this.document.businessUnits},departments:function(){return this.document.departments},description:function(){return this.document.description},nameOptions:function(){var t;return{value:null===(t=this.document)||void 0===t?void 0:t.name,onValueChanged:this.setName}},documentTypeOptions:function(){return G(G({},(new U.a).withUrl(x.a.docFlow.DocumentType).withoutDeferRendering().setKey("documentTypeGuid").setValueExpr("documentTypeGuid").build(this)),{},{value:this.documentTypeId,onValueChanged:this.setDocumentTypeId})},documentKindsOptions:function(){return G(G({},(new U.a).withUrl(x.a.docFlow.DocumentKind).filter([["status","=",A.b.Active],"and",["documentTypeId","=",this.documentTypeId]]).clearValueExpr().withoutDeferRendering().build(this)),{},{value:this.documentKinds,onValueChanged:this.setDocumentKinds})},businessUnitsOptions:function(){return G(G({},(new U.a).withUrl(x.a.company.BusinessUnit).clearValueExpr().filter(["status","=",A.b.Active]).build(this)),{},{value:this.businessUnits,onValueChanged:this.setBusinessUnits})},departmentsOptions:function(){var t=[];this.businessUnits.map((function(e){t.push(["businessUnitId","=",e.id]),t.push("or")}));var filter=[["status","=",A.b.Active],"and"];return t.length?filter.push(t):filter.push(["businessUnitId","=",null]),G(G({},(new U.a).withUrl(x.a.company.Department).clearValueExpr().filter(filter).build(this)),{},{onValueChanged:this.setDepartments,value:this.departments})},descriptionOptions:function(){var t;return{height:150,value:null===(t=this.document)||void 0===t?void 0:t.description,onValueChanged:this.setDescription}}},methods:{setName:function(t){this.$store.commit("documents/".concat(this.documentId,"/SET_NAME"),t.value)},setDocumentTypeId:function(t){t.event&&(this.$store.commit("documents/".concat(this.documentId,"/SET_DOCUMENT_TYPE"),t.value),this.$store.commit("documents/".concat(this.documentId,"/SET_DOCUMENT_KINDS"),[]))},setDocumentKinds:function(t){t.event&&this.$store.commit("documents/".concat(this.documentId,"/SET_DOCUMENT_KINDS"),t.value)},setBusinessUnits:function(t){t.event&&(this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNITS"),t.value),this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENTS"),[]))},setDepartments:function(t){t.event&&this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENTS"),t.value)},setDescription:function(t){this.$store.commit("documents/".concat(this.documentId,"/SET_DESCRIPTION"),t.value)}}},Z=Object(E.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxForm",{ref:"form",attrs:{"scrolling-enabled":!0,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName}},[n("DxSimpleItem",{attrs:{"data-field":"name","editor-options":t.nameOptions}},[n("DxLabel",{attrs:{location:"top",text:t.$t("document.fields.name")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.nameRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"documentTypeId","editor-options":t.documentTypeOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("document.fields.documentTypeGuid")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":2,"editor-options":t.documentKindsOptions,"editor-type":"dxTagBox","data-field":"documentKinds"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("document.fields.documentKinds")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":2,"editor-options":t.businessUnitsOptions,"editor-type":"dxTagBox","data-field":"businessUnits"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("document.fields.businessUnits")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":2,"editor-options":t.departmentsOptions,"editor-type":"dxTagBox","data-field":"departments"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("document.fields.departments")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"description","editor-options":t.descriptionOptions,"editor-type":"dxTextArea"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("document.fields.description")}})],1)],1)],1)}),[],!1,null,null,null).exports,L=(n(104),n(223),n(67)),F={components:{DxDataGrid:L.DxDataGrid,DxColumn:L.DxColumn,DxEditing:L.DxEditing,DxScrolling:L.DxScrolling,DxRequiredRule:L.DxRequiredRule,DxPatternRule:L.DxPatternRule,DxButton:L.DxButton},props:["documentId","isCard"],data:function(){return{data:this.$store.getters["documents/".concat(this.documentId,"/parameters")]}},methods:{rowUpdated:function(t){var e=JSON.parse(JSON.stringify(this.data.slice()));this.$store.commit("documents/".concat(this.documentId,"/SET_PARAMETERS"),e)},customizeText:function(t){return t.value?"> "+t.value.split(".").join(" > "):""}},computed:{nameOptions:function(){return{readOnly:!0}},parameters:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")].parameters}},watch:{parameters:function(t){this.data=JSON.parse(JSON.stringify(t.slice()))}}},W=Object(E.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxDataGrid",{attrs:{"data-source":t.data,"remote-operations":!1,"allow-column-reordering":!1,"row-alternation-enabled":!1,showColumnLines:!1,showRowLines:!1},on:{rowUpdated:function(e){return t.rowUpdated(e)}}},[n("DxEditing",{attrs:{"allow-adding":!1,"allow-updating":!0,useIcons:!0,mode:"row"}}),t._v(" "),n("DxColumn",{attrs:{allowEditing:!1,fixed:!0,"data-field":"name",caption:t.$t("document.fields.name")}}),t._v(" "),n("DxColumn",{attrs:{customizeText:t.customizeText,"data-field":"dataSource",caption:t.$t("document.fields.value")}},[n("DxPatternRule",{attrs:{pattern:/^[^\.:\s+]\S+[^\.:\s+]$/,message:t.$t("document.validation.paramsValueRule")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.paramsValueRequired")}})],1)],1)],1)}),[],!1,null,null,null).exports,H={components:{toolbar:B,Header:R.a,History:k.a,docVersion:V.a,DxForm:f.a,DxTabbedItem:h.DxTabbedItem,DxTab:h.DxTab,DxGroupItem:h.DxGroupItem,DxSimpleItem:h.DxSimpleItem,DxRequiredRule:h.DxRequiredRule,DxLabel:h.DxLabel,mainForm:Z,paramsForm:W},props:["documentId","isCard"],data:function(){return{versionOpenState:!1,entityTypeGuid:234,tabPanelOptions:{focusStateEnabled:!1,animationEnabled:!1,swipeEnabled:!1,loop:"true"},documentValidatorName:"OfficialDocument/".concat(this.documentId)}},destroyed:function(){this.isNew||this.onClosed(),Object(d.g)(this,this.documentId)},created:function(){this.isNew&&this.$store.commit("documents/".concat(this.documentId,"/DATA_CHANGED"),!0),this.$store.commit("documents/".concat(this.documentId,"/SKIP_ROUTE_HANDLING"),!1)},head:function(){return{title:this.$store.getters["documents/".concat(this.documentId,"/document")].name}},provide:function(){return{trySaveDocument:this.trySave,documentValidatorName:this.documentValidatorName}},methods:{onRemove:function(){this.$emit("onRemove",this.documentId),this.$emit("onClose",this.documentId)},onClose:function(){this.$emit("onClose")},onClosed:function(){var t=this.document,e=t.documentTypeGuid,n=t.id;this.$emit("onClosed",{documentTypeGuid:e,id:n})},trySave:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.instance.validate().isValid){e.next=7;break}if(!t.isDataChanged){e.next=4;break}return e.next=4,t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/save")));case 4:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()},openVersion:function(){this.versionOpenState=!this.versionOpenState}},computed:Object(l.a)({headerTitle:function(){return this.document.name||this.$t("document.headers.documentTemplate")},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isNew:function(){return this.$store.getters["documents/".concat(this.documentId,"/isNew")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},isDataChanged:function(){return this.$store.getters["documents/".concat(this.documentId,"/isDataChanged")]}},"isNew",(function(){return this.$store.getters["documents/".concat(this.documentId,"/isNew")]}))},K=(n(2140),{components:{documentTemplateCard:Object(E.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{headerTitle:t.headerTitle,isbackButton:!t.isCard,isNew:t.isNew}}),t._v(" "),n("toolbar",{attrs:{documentId:t.documentId,isCard:t.isCard},on:{onClose:t.onClose,openVersion:t.openVersion,onRemove:t.onRemove}}),t._v(" "),n("div",{staticClass:"wrapper--relative"},[n("DxForm",{ref:"form",staticClass:"mt-1",attrs:{"scrolling-enabled":!0,"read-only":t.canUpdate,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"history",fn:function(){return[n("History",{attrs:{slot:"history",entityTypeGuid:t.entityTypeGuid,id:t.documentId},slot:"history"})]},proxy:!0},{key:"main-form",fn:function(){return[n("main-form",{attrs:{documentId:t.documentId,isCard:t.isCard}})]},proxy:!0},{key:"params-form",fn:function(){return[n("paramsForm",{attrs:{documentId:t.documentId,isCard:t.isCard}})]},proxy:!0}])},[n("DxTabbedItem",{attrs:{"tab-panel-options":t.tabPanelOptions}},[n("DxTab",{attrs:{"col-count":12,title:t.$t("document.tabs.main")}},[n("DxGroupItem",{attrs:{"col-span":6,caption:t.$t("document.groups.captions.main")}},[n("DxSimpleItem",{attrs:{"col-count":1,template:"main-form"}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":6,caption:t.$t("document.groups.captions.params")}},[n("DxSimpleItem",{attrs:{"col-count":1,template:"params-form"}})],1)],1),t._v(" "),n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.relations"),disabled:t.isDataChanged}}),t._v(" "),n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.history"),disabled:t.isNew}},[n("DxSimpleItem",{attrs:{"col-span":8,template:"history"}})],1)],1)],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.versionOpenState?n("docVersion",{staticClass:"item--drawer",attrs:{documentId:t.documentId,isCard:t.isCard}}):t._e()],1)],1)],1)}),[],!1,null,null,null).exports},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app,o=t.params,t.router,r=t.$axios,e.next=3,Object(d.d)({$store:n.store,$axios:r},{documentTypeId:c.a.DocumentTemplate,documentId:+o.id});case 3:case"end":return e.stop()}}),e)})))()},beforeRouteLeave:function(t,e,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!0,o.$store.getters["documents/".concat(+o.$route.params.id,"/skipRouteHandling")]){t.next=5;break}return t.next=4,m.a.handleConfirm(o,+o.$route.params.id);case 4:e=t.sent;case 5:n(e);case 6:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(t,e,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!0,o.$store.getters["documents/".concat(o.$route.params.id,"/skipRouteHandling")]){t.next=8;break}return t.next=4,m.a.handleConfirm(o,+o.$route.params.id);case 4:if(!(e=t.sent)){t.next=8;break}return t.next=8,Object(d.d)(o,{documentTypeId:c.a.DocumentTemplate,documentId:+o.$route.params.id});case 8:n(e);case 9:case"end":return t.stop()}}),t)})))()},methods:{onClose:function(){this.$router.push("/docFlow/document-template/")}}}),Q=Object(E.a)(K,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("document-template-card",{attrs:{documentId:+t.$route.params.id,isCard:!1},on:{onClose:function(e){return t.$router.go(-1)}}})}),[],!1,null,null,null);e.default=Q.exports}}]);