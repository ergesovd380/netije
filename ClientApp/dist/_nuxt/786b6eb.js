(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1910:function(e,t,n){var content=n(1942);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("0e767301",content,!0,{sourceMap:!1})},1941:function(e,t,n){"use strict";n(1910)},1942:function(e,t,n){var o=n(25)(!1);o.push([e.i,"\n.fileuploader-container {\r\n  border: 1px solid #d3d3d3;\n}\r\n",""]),e.exports=o},1952:function(e,t,n){"use strict";n(48),n(40),n(43),n(50),n(51);var o=n(14),r=n(68),l={components:{DxFileUploader:n(1068).DxFileUploader},methods:{valueChanged:function(e){var t=e.value;this.$emit("valueChanged",t[0])}}},c=(n(1941),n(7)),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fileuploader-container"},[n("DxFileUploader",{attrs:{"select-button-text":e.$t("exchange.uploadCertificate"),"label-text":"","allowed-file-extensions":[".pfx"],"upload-mode":"useForm"},on:{"value-changed":e.valueChanged}})],1)}),[],!1,null,null,null).exports,x=n(151),f=n(291),h=n(163),m=n(103),v=(n(204),n(61),n(20)),D=n.n(v),I=n(4);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $={components:{Header:m.a,DxGroupItem:v.DxGroupItem,DxSimpleItem:v.DxSimpleItem,DxLabel:v.DxLabel,DxRequiredRule:v.DxRequiredRule,DxForm:D.a,Toolbar:h.a,BusinessUnitSelectBox:f.a,EmployeeSelectBox:x.a,CertificateUploader:d},props:["data","isCard"],created:function(){this.data&&(this.box=w(w({},this.box),this.data))},data:function(){return{box:{name:null,note:null,organizationId:null,businessUnitId:null,responsibleId:null,certificate:null,password:null,status:r.b.Active},statusOptions:{dataSource:this.$store.getters["status/status"](this),valueExpr:"id",displayExpr:"status",showClearButton:!0},passwordOptions:{mode:"password"}}},computed:{isNew:function(){return!this.data},readOnly:function(){return!this.$store.getters["permissions/IsAdmin"]},hasSertificate:function(){return!!this.box.certificate}},methods:{generateFormData:function(data){var e,t,n=new FormData;for(var o in this.box)e=o,null!==(t=this.box[o])&&n.append(e,t);return n},setCertificate:function(e){this.box.certificate=e},setBusinessUnitId:function(data){this.box.businessUnitId=data},setResponsibleId:function(data){this.box.responsibleId=data},goBack:function(){this.$emit("close")},postRequest:function(){var e=this;if(this.$refs.form.instance.validate().isValid&&this.hasSertificate){var t=this.generateFormData(this.box);this.$awn.asyncBlock(this.$axios.post(I.a.boxes.Boxes,t),(function(t){e.$emit("create",e.box),e.$awn.success()}),(function(t){return e.$awn.alert()}))}},putRequest:function(){var e=this;if(this.$refs.form.instance.validate().isValid){var t=this.generateFormData(this.box);this.$awn.asyncBlock(this.$axios.put(I.a.boxes.Boxes+"/"+this.box.id,t),(function(t){e.$emit("valueChanged",e.box),e.$awn.success()}),(function(t){return e.$awn.alert()}))}},handleSubmit:function(){this.isNew?this.postRequest():this.putRequest()}}},O=Object(c.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{showTitle:!e.isCard,isbackButton:!e.isCard,isNew:e.isNew,headerTitle:e.$t("exchange.headers.myExchangeIntegration")}}),e._v(" "),n("toolbar",{attrs:{canSave:e.$store.getters["permissions/IsAdmin"]},on:{saveChanges:e.handleSubmit}}),e._v(" "),n("DxForm",{ref:"form",attrs:{"col-count":3,"scrolling-enabled":!0,"form-data":e.box,"read-only":e.readOnly,"show-colon-after-label":!0,"show-validation-summary":!0,"validation-group":"integration-box-form"},on:{"update:formData":function(t){e.box=t},"update:form-data":function(t){e.box=t}},scopedSlots:e._u([{key:"businessUnitIdSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{valueExpr:"id",value:e.box.businessUnitId,"read-only":e.readOnly,validatorGroup:"integration-box-form",isRequired:!0},on:{valueChanged:e.setBusinessUnitId}})]},proxy:!0},{key:"responsibleId",fn:function(){return[n("employee-select-box",{attrs:{valueExpr:"id",value:e.box.responsibleId,"read-only":e.readOnly,validatorGroup:"integration-box-form",isRequired:!0},on:{valueChanged:e.setResponsibleId}})]},proxy:!0},{key:"certificate",fn:function(){return[n("Certificate-uploader",{on:{valueChanged:e.setCertificate}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{"col-count":2,"col-span":2}},[n("DxSimpleItem",{attrs:{"data-field":"name"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.name")}}),e._v(" "),n("DxRequiredRule",{attrs:{message:e.$t("exchange.validation.nameRequired")}})],1),e._v(" "),n("DxSimpleItem",{attrs:{"data-field":"organizationId"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.organizationId")}}),e._v(" "),n("DxRequiredRule",{attrs:{message:e.$t("exchange.validation.organizationIdRequired")}})],1),e._v(" "),n("DxSimpleItem",{attrs:{"data-field":"businessUnitId",template:"businessUnitIdSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.businessUnit")}}),e._v(" "),n("DxRequiredRule",{attrs:{message:e.$t("exchange.validation.businessUnitRequired")}})],1),e._v(" "),n("DxSimpleItem",{attrs:{"data-field":"responsibleId",template:"responsibleId"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.responsible")}}),e._v(" "),n("DxRequiredRule",{attrs:{message:e.$t("exchange.validation.responsibleRequired")}})],1),e._v(" "),n("DxSimpleItem",{attrs:{"col-span":3,"data-field":"status","editor-options":e.statusOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.status")}})],1)],1),e._v(" "),n("DxGroupItem",{attrs:{"col-count":1,"col-span":2}},[n("DxSimpleItem",{attrs:{isRequired:e.hasSertificate,"editor-options":e.passwordOptions,"data-field":"password"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.password")}})],1),e._v(" "),n("DxSimpleItem",{attrs:{template:"certificate"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.certificate")}})],1)],1),e._v(" "),n("DxSimpleItem",{attrs:{"col-span":3,"col-count":2,"data-field":"note","editor-options":{height:90},"editor-type":"dxTextArea"}},[n("DxLabel",{attrs:{location:"top",text:e.$t("exchange.fields.note")}})],1)],1)],1)}),[],!1,null,null,null);t.a=O.exports},2336:function(e,t,n){"use strict";n.r(t);var o=n(5),r=(n(30),n(1952)),l=n(4),c={components:{MyExchangeIntegration:r.a},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,o=e.params,t.next=3,n.get("".concat(l.a.boxes.Boxes,"/").concat(+o.id));case 3:return r=t.sent,data=r.data,t.abrupt("return",{data:data});case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{data:null}}},d=n(7),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("My-exchange-integration",{attrs:{isCard:!1,data:e.data}})}),[],!1,null,null,null);t.default=component.exports}}]);