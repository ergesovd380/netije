(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1882:function(t,e,n){var content=n(1896);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("0d39e88e",content,!0,{sourceMap:!1})},1888:function(t,e,n){var content=n(1901);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("4fd76f73",content,!0,{sourceMap:!1})},1890:function(t,e,n){"use strict";n(203),n(43);var o={props:{storeKey:{}},components:{DxDateBox:n(1065).DxDateBox},data:function(){return{isVisibleBeforeValueInput:!1,fromValue:localStorage.hasOwnProperty("quick-filter-from-value-".concat(this.storeKey))?localStorage.getItem("quick-filter-from-value-".concat(this.storeKey)):null,beforeValue:localStorage.hasOwnProperty("quick-filter-before-value-".concat(this.storeKey))?localStorage.getItem("quick-filter-before-value-".concat(this.storeKey)):null}},methods:{fromValueChanged:function(t){null===t?localStorage.setItem("quick-filter-from-value-".concat(this.storeKey),""):localStorage.setItem("quick-filter-from-value-".concat(this.storeKey),t),this.$emit("valueChanged",this.filter)},beforeValueChanged:function(t){null===t?localStorage.setItem("quick-filter-before-value-".concat(this.storeKey),""):localStorage.setItem("quick-filter-before-value-".concat(this.storeKey),t),this.$emit("valueChanged",this.filter)},showEndInput:function(){this.isVisibleBeforeValueInput=!0},hideEndInput:function(){this.isVisibleBeforeValueInput=!1}},computed:{filter:function(){var t=this.fromValue?["created",">=",this.fromValue]:null,e=this.beforeValue?["created","<=",this.beforeValue]:null;return this.fromValue&&this.beforeValue?[t,"and",e]:this.fromValue?t:this.beforeValue?e:null}},watch:{fromValue:{handler:function(t){this.fromValueChanged(t)}},beforeValue:{handler:function(t){this.beforeValueChanged(t)}},filter:{handler:function(t,e){this.$emit("valueChanged",this.filter)},immediate:!0}}},r=n(7),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex align-center"},[n("DxDateBox",{attrs:{showClearButton:!0,placeholder:t.$t("shared.begining"),useMaskBehavior:!0,allowClearing:!0,openOnFieldClick:!0,type:"datetime",id:"fromValue",max:(new Date).getTime(),dateSerializationFormat:"yyyy-MM-ddTHH:mm:ss","styling-mode":"outlined"},model:{value:t.fromValue,callback:function(e){t.fromValue=e},expression:"fromValue"}}),t._v(" "),n("DxDateBox",{attrs:{showClearButton:!0,placeholder:t.$t("shared.end"),useMaskBehavior:!0,openOnFieldClick:!0,allowClearing:!0,type:"datetime",name:"fromValue",min:t.fromValue,max:(new Date).getTime(),dateSerializationFormat:"yyyy-MM-ddTHH:mm:ss","styling-mode":"outlined"},model:{value:t.beforeValue,callback:function(e){t.beforeValue=e},expression:"beforeValue"}})],1)}),[],!1,null,null,null).exports,d=n(457),l={components:{DxDropDownButton:n.n(d).a,RangeFilter:c},props:{dataSource:{},defaultValue:{default:0},storeKey:{}},data:function(){return{disabledQuickFilter:!1,rangeFilter:null,value:localStorage.hasOwnProperty("quick-filter-".concat(this.storeKey))?+localStorage.getItem("quick-filter-".concat(this.storeKey)):this.defaultValue}},methods:{rangeFilterChanged:function(t){if(this.rangeFilter=t,t){this.disabledQuickFilter=!0;var e=this.dataSource.find((function(t){return"All"===t.value}));this.value=e.id,localStorage.setItem("quick-filter-".concat(this.storeKey),this.value)}else this.disabledQuickFilter=!1},itemClick:function(t){this.value=t.itemData.id,localStorage.setItem("quick-filter-".concat(this.storeKey),this.value)},valueChanged:function(t,e){this.$emit("valueChanged",this.value,this.rangeFilter)}},watch:{rangeFilter:{handler:function(t,e){this.valueChanged(t)},immediate:!0},value:{handler:function(t,e){this.valueChanged(t)},immediate:!0}}},m=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("RangeFilter",{attrs:{storeKey:t.storeKey},on:{valueChanged:t.rangeFilterChanged}}),t._v(" "),n("DxDropDownButton",{attrs:{disabled:t.disabledQuickFilter,useSelectMode:!0,"styling-mode":"text","display-expr":"text",width:"150","key-expr":"id",selectedItemKey:t.value,items:t.dataSource},on:{"item-click":t.itemClick}})],1)}),[],!1,null,null,null);e.a=m.exports},1893:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHRpdGxlPkhpZ2hpbXBvcnRhbmNlPC90aXRsZT48cG9seWdvbiBwb2ludHM9IjggMTEgNyAxMSA2IDAgOSAwIDggMTEiIGZpbGw9IiNkNjU2MzMiLz48Y2lyY2xlIGN4PSI3LjUiIGN5PSIxNC41IiByPSIxLjUiIGZpbGw9IiNkNjU2MzMiLz48L3N2Zz4="},1895:function(t,e,n){"use strict";n(1882)},1896:function(t,e,n){var o=n(25)(!1);o.push([t.i,"\n.icon--type {\r\n  display: flex;\r\n  margin: 0 auto;\r\n  width: 25px;\n}\r\n",""]),t.exports=o},1897:function(t,e,n){"use strict";var o=n(1893),r=n.n(o),c=n(571),d={props:["state"],computed:{path:function(){return this.state===c.a.High&&r.a}}},l=(n(1895),n(7)),component=Object(l.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.path?n("img",{staticClass:"icon--type",attrs:{src:t.path}}):t._e()])}),[],!1,null,null,null);e.a=component.exports},1900:function(t,e,n){"use strict";n(1888)},1901:function(t,e,n){var o=n(25)(!1);o.push([t.i,"\n.icon--type {\r\n  display: flex;\r\n  margin: 0 auto;\r\n  width: 25px;\n}\r\n",""]),t.exports=o},1903:function(t,e,n){"use strict";var o=n(96),r=(n(336),n(1897)),c=n(382),d={props:["taskTypeGuid"],computed:{icon:function(){var t=new c.a(this).getById(this.taskTypeGuid).icon;return t}}},l=(n(1900),n(7)),m=Object(l.a)(d,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{staticClass:"icon--type",attrs:{src:t.icon}})}),[],!1,null,null,null).exports,f=n(49),h=n(103),x=n(113),y=n.n(x),v=n(61),D=n.n(v),I=n(4),O=n(67),S=(n(124),n(1890)),R=n(570),C=(n(48),n(40),n(43),n(50),n(51),n(104),n(78),n(64),n(132),n(117),n(112),n(14)),$=n(32),T=n(33),_=n(125);function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw r}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var P=function(){function t(e,n){Object($.a)(this,t),this.elements=Object(_.a)(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(C.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({Constant:R.a,translateName:"task.quickFilter",context:e},n))}return Object(T.a)(t,[{key:"filtering",value:function(t){var e={};for(var element in this.elements){var n,o=E(t);try{for(o.s();!(n=o.n()).done;){+element===n.value&&(e[element]=this.elements[element])}}catch(t){o.e(t)}finally{o.f()}}return e}},{key:"getAll",value:function(){return this.elements}},{key:"getById",value:function(t){return this.elements[t]}}]),t}(),A={components:{QuickFilter:S.a},props:["taskQuery"],data:function(){return{defaultFilter:R.a.InProcess,"QuiсkFilterGuid":R.a}},computed:{"QuiсkFilterItems":function(){return Object.values(new P(this).getAll()).map((function(t){return t.hint=t.text,t}))}},methods:{valueChanged:function(t,filter){this.$emit("valueChanged",t,filter)}}},B=Object(l.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("QuickFilter",{attrs:{defaultValue:t.defaultFilter,dataSource:t.QuiсkFilterItems,storeKey:"task-"+t.taskQuery},on:{valueChanged:t.valueChanged}})],1)}),[],!1,null,null,null).exports,k=n(284);e.a={components:{DxCheckBox:f.DxCheckBox,DxButton:y.a,Header:h.a,DxSearchPanel:O.DxSearchPanel,DxDataGrid:O.DxDataGrid,DxColumn:O.DxColumn,DxEditing:O.DxEditing,DxHeaderFilter:O.DxHeaderFilter,DxScrolling:O.DxScrolling,DxExport:O.DxExport,DxSelection:O.DxSelection,DxLookup:O.DxLookup,DxGrouping:O.DxGrouping,DxGroupPanel:O.DxGroupPanel,DxColumnChooser:O.DxColumnChooser,DxColumnFixing:O.DxColumnFixing,DxFilterRow:O.DxFilterRow,DxStateStoring:O.DxStateStoring,taskIcon:m,taskImportaceComponent:r.a,toolbarItemQuickFilter:B},data:function(){return{statusDataSource:Object(o.a)(Object.values(Object(k.b)(this)))}},methods:{setStore:function(t,filter){this.store=new D.a({store:this.$dxStore({key:"id",loadUrl:"".concat(I.a.task.Task).concat(this.taskQuery,"/").concat(t)}),filter:filter,sort:[{selector:"created",desc:!0}]})},onToolbarPreparing:function(header){header.toolbarOptions.items.unshift({widget:"button",location:"after",options:{icon:"refresh",onClick:this.reload}})},reload:function(){this.store.reload()},toDetail:function(t){var data=t.data;this.$router.push("/task/detail/".concat(data.taskType,"/").concat(data.id))},onRowPrepared:function(t){null!=t.data&&(this.showCompletedTask(t.data,t.rowElement.style),this.showDraftTask(t.data,t.rowElement.style))},showCompletedTask:function(data,style){data.status==k.a.Completed&&(style.textDecoration="line-through")},showDraftTask:function(data,style){data.status==k.a.Draft&&(style.fontStyle="italic")}}}},1908:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o={OnReview:0,Sending:1,WithoutExecute:2,OnExecution:3,Executed:4,Aborted:5};function r(t){return[{id:o.OnReview,name:t.$t("lifeCycleState.onReview")},{id:o.Sending,name:t.$t("lifeCycleState.sending")},{id:o.WithoutExecute,name:t.$t("lifeCycleState.withoutExecute")},{id:o.OnExecution,name:t.$t("lifeCycleState.onExecution")},{id:o.Executed,name:t.$t("lifeCycleState.executed")},{id:o.Aborted,name:t.$t("lifeCycleState.aborted")}]}},1948:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIC0yMiA1MTIgNTExIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im01MTIgMjMzLjgyMDMxMi0yMTIuNzc3MzQ0LTIzMy4zMjAzMTJ2MTM5LjIwMzEyNWgtNDUuMjM4MjgxYy0xNDAuMjczNDM3IDAtMjUzLjk4NDM3NSAxMTMuNzEwOTM3LTI1My45ODQzNzUgMjUzLjk4NDM3NXY3My43Njk1MzFsMjAuMDkzNzUtMjIuMDE5NTMxYzY4LjMxNjQwNi03NC44NTE1NjIgMTY0Ljk4MDQ2OS0xMTcuNSAyNjYuMzI0MjE5LTExNy41aDEyLjgwNDY4N3YxMzkuMjAzMTI1em0wIDAiLz48L3N2Zz4="},1957:function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var o={};n.r(o),n.d(o,"DefaultAction",(function(){return v.a})),n.d(o,"Acquaintance",(function(){return I.a})),n.d(o,"ActionItemExecution",(function(){return S.a})),n.d(o,"ReviewManager",(function(){return C.a})),n.d(o,"FreeApproval",(function(){return T.a}));n(48),n(40),n(43),n(50),n(51),n(104),n(78),n(64),n(132),n(117),n(112);var r=n(14),c=n(5),d=n(32),l=n(33),m=(n(30),n(222)),f={DefaultAction:0,ActionItemExecution:1,Acquaintance:2,ReviewManager:3,FreeApproval:4},h=f;var x=n(125),y=n(378),v=n.n(y),D=n(573),I=n.n(D),O=n(568),S=n.n(O),R=n(574),C=n.n(R),$=n(575),T=n.n($),_=n(566);function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw r}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A=function(){function t(e){Object(d.a)(this,t),this.elements=Object(x.a)({Constant:h,translateName:"documentSendAction.type",context:e,iconStores:o})}return Object(l.a)(t,[{key:"init",value:function(){var t=this,e=function(element){t.elements[element].convertedToTaskTypeValue=function(t){switch(t){case f.DefaultAction:return m.a.SimpleTask;case f.ActionItemExecution:return m.a.ActionItemExecutionTask;case f.Acquaintance:return m.a.AcquaintanceTask;case f.ReviewManager:return m.a.DocumentReviewTask;case f.FreeApproval:return m.a.FreeApprovalTask}}(t.elements[element].id),t.elements[element].create=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n,o){var r,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:[],n.$popup.taskCard(n,{params:P(P({},o),{},{taskType:t.elements[element].convertedToTaskTypeValue}),handler:_.f},{listeners:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};for(var element in this.elements)e(element);return this}},{key:"filtering",value:function(t){var e={};for(var element in this.elements){var n,o=E(t);try{for(o.s();!(n=o.n()).done;){+element===n.value&&(e[element]=this.elements[element])}}catch(t){o.e(t)}finally{o.f()}}return e}},{key:"getAll",value:function(){return this.elements}},{key:"getById",value:function(t){return this.elements[t]}}]),t}()},2024:function(t,e,n){var content=n(2197);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("7d27da92",content,!0,{sourceMap:!1})},2025:function(t,e,n){var content=n(2199);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("1135a04c",content,!0,{sourceMap:!1})},2026:function(t,e,n){var content=n(2201);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("73d49822",content,!0,{sourceMap:!1})},2027:function(t,e,n){var content=n(2203);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("079a5ccd",content,!0,{sourceMap:!1})},2028:function(t,e,n){var content=n(2208);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("116d24c9",content,!0,{sourceMap:!1})},2029:function(t,e,n){var content=n(2210);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("18c4e862",content,!0,{sourceMap:!1})},2196:function(t,e,n){"use strict";n(2024)},2197:function(t,e,n){var o=n(25)(!1);o.push([t.i,"\n.pt-2[data-v-71b5985a] {\r\n  padding-top: 20px;\n}\r\n",""]),t.exports=o},2198:function(t,e,n){"use strict";n(2025)},2199:function(t,e,n){var o=n(25)(!1);o.push([t.i,"*[data-v-05316930]{outline:none}.scrool-auto[data-v-05316930]{width:100%;height:100%;overflow:auto}.d-flex[data-v-05316930]{display:flex}.justify-flex-end[data-v-05316930]{justify-content:flex-end}.list__content div[data-v-05316930]{padding-right:5px}.f-size-30[data-v-05316930]{margin:5px;font-size:20px}.js-space-between[data-v-05316930]{align-items:center}.thread-text-status[data-v-05316930]{text-align:right;margin-left:auto;padding:0 5px;font-size:14px}.thread-text-status .task__item[data-v-05316930]{white-space:nowrap}.thread-text-status i[data-v-05316930]{font-size:16px}.mY-1[data-v-05316930]{margin:10px 0}.ml-1[data-v-05316930]{margin-left:1.2em}.current-comment[data-v-05316930]{background:#ecfff46b}.item--status[data-v-05316930]{justify-content:flex-end}.item--status .icon--status[data-v-05316930]{margin:0 5px;display:flex;width:20px;height:100%}.custom-icon[data-v-05316930]{margin:0 5px;display:flex;width:20px;height:100%}.message-body[data-v-05316930]{margin-left:30px}.comment__item[data-v-05316930]{box-sizing:border-box;white-space:normal;border:1px solid #ddd;border-left:2px solid #009a40;padding:5px;border-radius:2px;border-top-left-radius:4px;border-bottom-left-radius:4px}.expired[data-v-05316930]{color:red}.text--bold[data-v-05316930]{font-weight:500}.text-italic[data-v-05316930]{font-style:italic}.link[data-v-05316930]:hover{text-decoration:underline;color:#f90}.container--grid[data-v-05316930]{display:grid;grid-template-columns:1fr 1fr}.container--grid .item[data-v-05316930]{justify-self:flex-start;width:100%}.quide-page[data-v-05316930]{padding:20px 0 20px}.quide-page .quide-page__header[data-v-05316930]{padding:0;margin:0 50px;padding-bottom:20px}.quide-page .quide-page__header .header-title[data-v-05316930]{font-size:26px !important;color:#777}.quide-page .quide-page__header h2[data-v-05316930]{font-weight:450;padding:0;margin:0 !important}.quide-page .title[data-v-05316930]{color:#777}.quide-page .description[data-v-05316930]{color:#aaa;font-size:0.9em}.message[data-v-05316930]{box-sizing:border-box;padding:8px 0;font-size:15px;align-items:center}.message .message__label[data-v-05316930]{display:block;padding-right:8px}.message .message__icon[data-v-05316930]{display:block;font-size:18px;padding-right:8px}.cursive[data-v-05316930]{font-style:italic}.content[data-v-05316930]{line-height:1.5}.content h2[data-v-05316930]{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block[data-v-05316930]{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small .content-block[data-v-05316930]{margin-left:20px;margin-right:20px}.responsive-paddings[data-v-05316930]{padding:20px}.screen-large .responsive-paddings[data-v-05316930]{padding:40px}.dx-card.wide-card[data-v-05316930]{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content[data-v-05316930]{height:100%}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content>.dx-scrollview-content[data-v-05316930]{display:flex;flex-direction:column;min-height:100%}#gridContainer[data-v-05316930]{max-height:85vh}.f-direction-column[data-v-05316930]{height:200px;justify-content:space-between;flex-direction:column}#gridContainer[data-v-05316930]{max-height:70vh}#gridContainer .dx-data-row[data-v-05316930]{-webkit-user-select:none}#gridContainer .dx-data-row[data-v-05316930]:hover{color:forestgreen}\n",""]),t.exports=o},2200:function(t,e,n){"use strict";n(2026)},2201:function(t,e,n){var o=n(25)(!1);o.push([t.i,"\n.list-container {\r\n  margin: 3vh auto 0 0;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n}\r\n",""]),t.exports=o},2202:function(t,e,n){"use strict";n(2027)},2203:function(t,e,n){var o=n(25)(!1);o.push([t.i,"*{outline:none}.scrool-auto{width:100%;height:100%;overflow:auto}.d-flex{display:flex}.justify-flex-end{justify-content:flex-end}.list__content div{padding-right:5px}.f-size-30{margin:5px;font-size:20px}.js-space-between{align-items:center}.thread-text-status{text-align:right;margin-left:auto;padding:0 5px;font-size:14px}.thread-text-status .task__item{white-space:nowrap}.thread-text-status i{font-size:16px}.mY-1{margin:10px 0}.ml-1{margin-left:1.2em}.current-comment{background:#ecfff46b}.item--status{justify-content:flex-end}.item--status .icon--status{margin:0 5px;display:flex;width:20px;height:100%}.custom-icon{margin:0 5px;display:flex;width:20px;height:100%}.message-body{margin-left:30px}.comment__item{box-sizing:border-box;white-space:normal;border:1px solid #ddd;border-left:2px solid #009a40;padding:5px;border-radius:2px;border-top-left-radius:4px;border-bottom-left-radius:4px}.expired{color:red}.text--bold{font-weight:500}.text-italic{font-style:italic}.link:hover{text-decoration:underline;color:#f90}.container--grid{display:grid;grid-template-columns:1fr 1fr}.container--grid .item{justify-self:flex-start;width:100%}.quide-page{padding:20px 0 20px}.quide-page .quide-page__header{padding:0;margin:0 50px;padding-bottom:20px}.quide-page .quide-page__header .header-title{font-size:26px !important;color:#777}.quide-page .quide-page__header h2{font-weight:450;padding:0;margin:0 !important}.quide-page .title{color:#777}.quide-page .description{color:#aaa;font-size:0.9em}.message{box-sizing:border-box;padding:8px 0;font-size:15px;align-items:center}.message .message__label{display:block;padding-right:8px}.message .message__icon{display:block;font-size:18px;padding-right:8px}.cursive{font-style:italic}.content{line-height:1.5}.content h2{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small .content-block{margin-left:20px;margin-right:20px}.responsive-paddings{padding:20px}.screen-large .responsive-paddings{padding:40px}.dx-card.wide-card{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content{height:100%}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content>.dx-scrollview-content{display:flex;flex-direction:column;min-height:100%}#gridContainer{max-height:85vh}.f-direction-column{height:200px;justify-content:space-between;flex-direction:column}.pt-2{padding-top:20px}.pt-2 .dx-datagrid .dx-datagrid-content .dx-datagrid-table .dx-row .dx-command-edit-with-icons .dx-link{width:18px;height:18px;background-position:0 0;background-size:18px 18px;padding:0;font-size:20px;text-align:center;line-height:30px}\n",""]),t.exports=o},2204:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHRpdGxlPkFjdGlvbl9DaGFydEFkZFJlZ2lzdGVyU3RhZ2Vfc21hbGxfYTBiYzkyMDNiOTk2NDkwNmE5MTUxYmQyZDkwYzZlZmI8L3RpdGxlPjxyZWN0IHg9IjIiIHk9IjE0IiB3aWR0aD0iMTMiIGhlaWdodD0iMiIgZmlsbD0iIzc5ODI4OCIvPjxwYXRoIGQ9Ik05LjgzLDYuODFTMTIuOSwwLjUyLDkuMjEsMEg3LjczQzQsMC41Miw3LjExLDYuODEsNy4xMSw2LjgxUzcuNTIsMTIsMywxMmExLjA2LDEuMDYsMCwwLDAtMSwxSDE1YTEuMTEsMS4xMSwwLDAsMC0xLTFDOS41LDEyLDkuODMsNi44MSw5LjgzLDYuODFaIiBmaWxsPSIjMDA5YTQwIi8+PC9zdmc+"},2205:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHRpdGxlPkFjdGlvbl9Bc3NpZ25OdW1iZXJfc21hbGxfMmM0ODkzOTRiZGY5NGZmMmI4NWVmMTZiODM2ZTljYzk8L3RpdGxlPjxwYXRoIGQ9Ik0xMy41LDJBMS41LDEuNSwwLDAsMSwxNSwzLjV2MmExLjUsMS41LDAsMCwxLTMsMHYtMkExLjUsMS41LDAsMCwxLDEzLjUsMm0wLTFBMi41MSwyLjUxLDAsMCwwLDExLDMuNXYyYTIuNSwyLjUsMCwwLDAsNSwwdi0yQTIuNTEsMi41MSwwLDAsMCwxMy41LDFoMFoiIGZpbGw9IiMwMDlhNDAiLz48cmVjdCB4PSIxMSIgeT0iOSIgd2lkdGg9IjUiIGhlaWdodD0iMSIgZmlsbD0iIzAwOWE0MCIvPjxwYXRoIGQ9Ik05LjUsMWgtMWEwLjUsMC41LDAsMCwwLS41LjV2OS41OUwyLDFIMC41YTAuNSwwLjUsMCwwLDAtLjUuNXYxM2EwLjUsMC41LDAsMCwwLC41LjVoMUEwLjUsMC41LDAsMCwwLDIsMTQuNVY0LjkzTDgsMTVIOS41YTAuNSwwLjUsMCwwLDAsLjUtMC41VjEuNUEwLjUsMC41LDAsMCwwLDkuNSwxWiIgZmlsbD0iIzAwOWE0MCIvPjwvc3ZnPg=="},2206:function(t,e,n){t.exports=n.p+"img/addendum.bd03fce.svg"},2207:function(t,e,n){"use strict";n(2028)},2208:function(t,e,n){var o=n(25)(!1);o.push([t.i,"\n.navBar[data-v-1baa5edc] {\r\n  margin: 5px 0px;\n}\r\n",""]),t.exports=o},2209:function(t,e,n){"use strict";n(2029)},2210:function(t,e,n){var o=n(25)(!1);o.push([t.i,"*{outline:none}.scrool-auto{width:100%;height:100%;overflow:auto}.d-flex{display:flex}.justify-flex-end{justify-content:flex-end}.list__content div{padding-right:5px}.f-size-30{margin:5px;font-size:20px}.js-space-between{align-items:center}.thread-text-status{text-align:right;margin-left:auto;padding:0 5px;font-size:14px}.thread-text-status .task__item{white-space:nowrap}.thread-text-status i{font-size:16px}.mY-1{margin:10px 0}.ml-1{margin-left:1.2em}.current-comment{background:#ecfff46b}.item--status{justify-content:flex-end}.item--status .icon--status{margin:0 5px;display:flex;width:20px;height:100%}.custom-icon{margin:0 5px;display:flex;width:20px;height:100%}.message-body{margin-left:30px}.comment__item{box-sizing:border-box;white-space:normal;border:1px solid #ddd;border-left:2px solid #009a40;padding:5px;border-radius:2px;border-top-left-radius:4px;border-bottom-left-radius:4px}.expired{color:red}.text--bold{font-weight:500}.text-italic{font-style:italic}.link:hover{text-decoration:underline;color:#f90}.container--grid{display:grid;grid-template-columns:1fr 1fr}.container--grid .item{justify-self:flex-start;width:100%}.quide-page{padding:20px 0 20px}.quide-page .quide-page__header{padding:0;margin:0 50px;padding-bottom:20px}.quide-page .quide-page__header .header-title{font-size:26px !important;color:#777}.quide-page .quide-page__header h2{font-weight:450;padding:0;margin:0 !important}.quide-page .title{color:#777}.quide-page .description{color:#aaa;font-size:0.9em}.message{box-sizing:border-box;padding:8px 0;font-size:15px;align-items:center}.message .message__label{display:block;padding-right:8px}.message .message__icon{display:block;font-size:18px;padding-right:8px}.cursive{font-style:italic}.content{line-height:1.5}.content h2{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small .content-block{margin-left:20px;margin-right:20px}.responsive-paddings{padding:20px}.screen-large .responsive-paddings{padding:40px}.dx-card.wide-card{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content{height:100%}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content>.dx-scrollview-content{display:flex;flex-direction:column;min-height:100%}#gridContainer{max-height:85vh}.f-direction-column{height:200px;justify-content:space-between;flex-direction:column}.wrapper--relative{position:relative;min-height:79vh;overflow:hidden}.wrapper--relative .item--drawer{position:absolute;top:0;right:0}.dx-form-group-with-caption .dx-form-group.dx-form-group-with-caption{padding-left:0px}.mt-1{margin-top:10px}.bg-white{width:20%;background:white}.fade-enter,.fade-leave-to{transform:translateX(40vw)}.fade-enter-active,.fade-leave-active{transition:transform 0.5s}.right{display:flex;justify-content:space-between}.right .filter__header{justify-self:flex-start}.toolbar--sticky{position:sticky;top:0}\n",""]),t.exports=o},2262:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"powerOfAttorney",(function(){return ke})),n.d(o,"memo",(function(){return Le})),n.d(o,"addendum",(function(){return Ve})),n.d(o,"simpleDocument",(function(){return Ge})),n.d(o,"orderBase",(function(){return ze})),n.d(o,"outgoingLetter",(function(){return Ze})),n.d(o,"incomingLetter",(function(){return en})),n.d(o,"contract",(function(){return cn})),n.d(o,"incomingInvoice",(function(){return mn})),n.d(o,"supAgreement",(function(){return xn})),n.d(o,"contractStatement",(function(){return Dn})),n.d(o,"incomingTaxInvoice",(function(){return Rn})),n.d(o,"outgoingTaxInvoice",(function(){return _n})),n.d(o,"universalTransferDocument",(function(){return An})),n.d(o,"waybill",(function(){return Un})),n.d(o,"dynamicDocument",(function(){return zn}));n(48),n(40),n(50),n(51);var r=n(5),c=n(14),d=(n(30),n(64),n(43),n(337)),l=n(576),m=n(68),f=n(20),h=n.n(f),x=n(1891),y=n(375),v=(n(336),n(104),n(78),n(132),n(117),n(112),n(32)),D=n(33),I={Recived:0,Sent:1,Terminated:2,Processed:3},O=n(125);function S(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw r}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var C=function(){function t(e){Object(v.a)(this,t),this.elements=Object(O.a)({Constant:I,translateName:"exchange.exchangeState",context:e})}return Object(D.a)(t,[{key:"filtering",value:function(t){var e={};for(var element in this.elements){var n,o=S(t);try{for(o.s();!(n=o.n()).done;){+element===n.value&&(e[element]=this.elements[element])}}catch(t){o.e(t)}finally{o.f()}}return e}},{key:"getAll",value:function(){return this.elements}},{key:"getById",value:function(t){return this.elements[t]}}]),t}(),$=n(4),T=n(49),_=n(61),E=n.n(_),w=n(67),j={components:{DxLookup:w.DxLookup,DxSearchPanel:w.DxSearchPanel,DxDataGrid:w.DxDataGrid,DxColumn:w.DxColumn,DxHeaderFilter:w.DxHeaderFilter,DxScrolling:w.DxScrolling,DxGrouping:w.DxGrouping,DxGroupPanel:w.DxGroupPanel,DxExport:w.DxExport,DxColumnChooser:w.DxColumnChooser,DxColumnFixing:w.DxColumnFixing,DxFilterRow:w.DxFilterRow,DxStateStoring:w.DxStateStoring,DxButton:T.DxButton},props:["documentId"],data:function(){return{dataSource:new E.a({store:this.$dxStore({key:"id",loadUrl:"".concat($.a.documentModule.ExchangeLogs).concat(this.documentId)}),paginate:!0,pageSize:10}),exchangeStateSource:Object.values(new C(this).getAll()),employeeSource:this.$dxStore({id:"key",loadUrl:$.a.company.Employee}),counterpartySource:this.$dxStore({id:"key",loadUrl:$.a.contragents.CounterPart})}},methods:{customizeText:function(t){var e;return null===(e=t.value)||void 0===e?void 0:e.name},refresh:function(){this.dataSource.reload()}}},P=(n(2196),n(7)),A=Object(P.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"pt-2"},[n("DxButton",{staticClass:"refresh-btn",attrs:{hint:t.$t("buttons.refresh"),icon:"refresh",onClick:t.refresh}}),t._v(" "),n("DxDataGrid",{attrs:{"show-borders":!0,errorRowEnabled:!1,"data-source":t.dataSource,"remote-operations":!1,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,"read-only":!0}},[n("DxColumnFixing",{attrs:{enabled:!0}}),t._v(" "),n("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),n("DxScrolling",{attrs:{mode:"virtual"}}),t._v(" "),n("DxColumn",{attrs:{"sort-order":"asc","data-field":"lastUpdate","data-type":"datetime",caption:t.$t("exchange.fields.lastUpdate")}}),t._v(" "),n("DxColumn",{attrs:{allowFiltering:!1,allowSorting:!1,customizeText:t.customizeText,"data-field":"author",caption:t.$t("exchange.fields.author")}},[n("DxLookup",{attrs:{displayExpr:"name","data-source":t.employeeSource}})],1),t._v(" "),n("DxColumn",{attrs:{"data-field":"exchangeState",caption:t.$t("exchange.fields.exchangeState")}},[n("DxLookup",{attrs:{valueExpr:"id",displayExpr:"text","data-source":t.exchangeStateSource}})],1),t._v(" "),n("DxColumn",{attrs:{"data-field":"counterpartyId",caption:t.$t("exchange.fields.counterparty")}},[n("DxLookup",{attrs:{valueExpr:"id",displayExpr:"name","data-source":t.counterpartySource}})],1),t._v(" "),n("DxColumn",{attrs:{"data-field":"note",caption:t.$t("exchange.fields.note")}})],1)],1)}),[],!1,null,"71b5985a",null).exports,B=n(566),k={props:["documentId","isCard"],mixins:[n(1903).a],data:function(){return{store:new E.a({store:this.$dxStore({key:"id",loadUrl:$.a.task.GetTasksByDocument+this.documentId}),paginate:!0,pageSize:10})}},methods:{reloadStore:function(){this.store.reload()},showCard:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:data=t.data,e.$popup.taskCard(e,{params:{taskType:data.taskType,taskId:data.id},handler:B.g},{listeners:[{eventName:"valueChanged",handlerName:"reloadStore"}]});case 2:case"end":return n.stop()}}),n)})))()}}},N=(n(2198),Object(P.a)(k,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("div",{staticClass:"grid"},[o("DxDataGrid",{attrs:{id:"gridContainer","show-borders":!0,"data-source":t.store,"remote-operations":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!1,"show-column-lines":!1,"load-panel":{enabled:!0,indicatorSrc:n(221)},onRowDblClick:t.showCard,"on-row-prepared":t.onRowPrepared,"focused-row-enabled":!1},on:{"toolbar-preparing":function(e){return t.onToolbarPreparing(e)}},scopedSlots:t._u([{key:"isImportant",fn:function(t){return[o("task-importace-component",{attrs:{state:t.data.value}})]}},{key:"typeIcon",fn:function(t){return[o("task-icon",{attrs:{taskTypeGuid:t.data.value}})]}}])},[o("DxGroupPanel",{attrs:{visible:!0}}),t._v(" "),o("DxGrouping",{attrs:{"auto-expand-all":!1}}),t._v(" "),o("DxHeaderFilter",{attrs:{visible:!0}}),t._v(" "),o("DxColumnChooser",{attrs:{enabled:!0}}),t._v(" "),o("DxColumnFixing",{attrs:{enabled:!0}}),t._v(" "),o("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),o("DxExport",{attrs:{enabled:!0,"allow-export-selected-data":!0,"file-name":t.$t("task.taskQuery.all")}}),t._v(" "),o("DxStateStoring",{attrs:{enabled:!0,type:"localStorage","storage-key":"documentTasks"+t.documentId}}),t._v(" "),o("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!1,useIcons:!0,mode:"form"}}),t._v(" "),o("DxSearchPanel",{attrs:{position:"after",visible:!0}}),t._v(" "),o("DxScrolling",{attrs:{mode:"virtual"}}),t._v(" "),o("DxColumn",{attrs:{caption:"","allow-filtering":!1,"allow-sorting":!1,allowResizing:!1,allowReordering:!1,allowHiding:!1,allowHeaderFiltering:!1,allowGrouping:!1,allowFixing:!1,allowExporting:!1,alignment:"center",allowSearch:!1,width:60,cellTemplate:"typeIcon",visible:!0,"data-field":"taskType"}}),t._v(" "),o("DxColumn",{attrs:{caption:"","allow-filtering":!1,"allow-sorting":!1,allowResizing:!1,allowReordering:!1,allowHiding:!1,allowHeaderFiltering:!1,allowGrouping:!1,allowFixing:!1,allowExporting:!1,alignment:"center",allowSearch:!1,width:40,cellTemplate:"isImportant",visible:!0,"data-field":"importance"}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"subject",caption:t.$t("task.fields.subjectTask")}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"maxDeadline",caption:t.$t("task.fields.deadLine"),"data-type":"date"}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"created",caption:t.$t("task.fields.createdDate"),"sort-order":"desc","data-type":"date"}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"author.name",caption:t.$t("task.fields.author"),allowHeaderFiltering:!1,"data-type":"string"}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"status",caption:t.$t("translations.fields.status")}},[o("DxLookup",{attrs:{"allow-clearing":!0,"data-source":t.statusDataSource,"value-expr":"id","display-expr":"text"}})],1)],1)],1)])}),[],!1,null,"05316930",null).exports),L=n(103),U=n(59),F={Draft:0,Active:1,Obsolete:2,Terminated:3,Closed:4};function V(t,e){switch(e){case U.a.IncomingLetter:case U.a.OutgoingLetter:case U.a.DynamicDocument:return function(t){return[{id:F.Draft,name:t.$t("lifeCycleState.draft")},{id:F.Active,name:t.$t("lifeCycleState.active")},{id:F.Obsolete,name:t.$t("lifeCycleState.obsolete")}]}(t);case U.a.Order:case U.a.CompanyDirective:case U.a.SimpleDocument:case U.a.Addendum:case U.a.Memo:case U.a.PowerOfAttorney:case U.a.ContractStatement:case U.a.Waybill:case U.a.UniversalTransferDocument:case U.a.IncomingTaxInvoice:case U.a.OutgoingTaxInvoice:return function(t){return[{id:F.Draft,name:t.$t("lifeCycleState.draft")},{id:F.Active,name:t.$t("lifeCycleState.active")},{id:F.Obsolete,name:t.$t("lifeCycleState.old")}]}(t);case U.a.Contract:case U.a.SupAgreement:return function(t){return[{id:F.Draft,name:t.$t("lifeCycleState.draft")},{id:F.Active,name:t.$t("lifeCycleState.active")},{id:F.Obsolete,name:t.$t("lifeCycleState.сanceled")},{id:F.Terminated,name:t.$t("lifeCycleState.terminated")},{id:F.Closed,name:t.$t("lifeCycleState.closed")}]}(t);case U.a.IncomingInvoice:return function(t){return[{id:F.Draft,name:t.$t("lifeCycleState.new")},{id:F.Active,name:t.$t("lifeCycleState.acceptedForPayment")},{id:F.Obsolete,name:t.$t("lifeCycleState.paymentDenied")}]}(t)}}var G={OnApproval:0,OnRework:1,PendingSign:2,Signed:3,Aborted:4,PendingReview:5,Reviewed:6};var M=n(460),z={OnApproval:0,Signed:1,Unsigned:2};var Y=n(1908),Q={OnControl:0,WithoutControl:1,ControlRemoved:2};function H(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function W(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Z={components:{DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxRequiredRule:f.DxRequiredRule,DxLabel:f.DxLabel,DxForm:h.a},props:["documentId"],data:function(){return{itemVisible:{lifeCycleState:!0,registrationState:!1,internalApprovalState:!1,externalApprovalState:!1,executionState:!1,controlExecutionState:!1}}},created:function(){this.showLifeCycleItemByTypeGuid()},methods:{showLifeCycleItemByTypeGuid:function(){switch(this.documentTypeGuid){case U.a.IncomingLetter:this.itemVisible.registrationState=!0,this.itemVisible.executionState=!0,this.itemVisible.controlExecutionState=!0;break;case U.a.OutgoingLetter:this.itemVisible.registrationState=!0,this.itemVisible.internalApprovalState=!0;break;case U.a.Order:case U.a.CompanyDirective:this.itemVisible.registrationState=!0,this.itemVisible.executionState=!0,this.itemVisible.controlExecutionState=!0,this.itemVisible.internalApprovalState=!0;break;case U.a.Order:case U.a.SimpleDocument:this.itemVisible.executionState=!0,this.itemVisible.controlExecutionState=!0,this.itemVisible.internalApprovalState=!0;break;case U.a.IncomingTaxInvoice:case U.a.Addendum:break;case U.a.ContractStatement:case U.a.Contract:this.itemVisible.registrationState=!0,this.itemVisible.internalApprovalState=!0,this.itemVisible.externalApprovalState=!0;break;case U.a.OutgoingTaxInvoice:case U.a.IncomingInvoice:case U.a.PowerOfAttorney:case U.a.Memo:this.itemVisible.internalApprovalState=!0;break;case U.a.Waybill:case U.a.SupAgreement:case U.a.UniversalTransferDocument:this.itemVisible.internalApprovalState=!0,this.itemVisible.externalApprovalState=!0;break;case U.a.DynamicDocument:this.itemVisible.registrationState=!0,this.itemVisible.executionState=!0,this.itemVisible.controlExecutionState=!0,this.itemVisible.internalApprovalState=!0}}},computed:{canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},documentTypeGuid:function(){return this.document.documentTypeGuid},lifeCycleStateOptions:function(){var t=this;return W(W({readOnly:!this.canUpdate},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{onValueChanged:function(e){t.$store.commit("documents/".concat(t.documentId,"/SET_LIFE_CYCLE_STATE"),e.value)},value:this.document.lifeCycleState,dataSource:V(this,this.documentTypeGuid)})},registrationStateOptions:function(){return W(W({visible:this.itemVisible.registrationState,readOnly:!0},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.registrationState,dataSource:Object(M.a)(this)})},internalApprovalStateOptions:function(){var t,e=this;return W(W({readOnly:!this.canUpdate},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{onValueChanged:function(t){e.$store.commit("documents/".concat(e.documentId,"/SET_INTERNAL_APPROVAL_STATE"),t.value)},value:this.document.internalApprovalState,dataSource:(t=this,[{id:G.OnApproval,name:t.$t("lifeCycleState.onApproval")},{id:G.OnRework,name:t.$t("lifeCycleState.onRework")},{id:G.PendingSign,name:t.$t("lifeCycleState.pendingSign")},{id:G.Signed,name:t.$t("lifeCycleState.signed")},{id:G.Aborted,name:t.$t("lifeCycleState.aborted")},{id:G.PendingReview,name:t.$t("lifeCycleState.pendingReview")},{id:G.Reviewed,name:t.$t("lifeCycleState.reviewed")}])})},externalApprovalStateOptions:function(){var t,e=this;return W(W({readOnly:!this.canUpdate},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{onValueChanged:function(t){e.$store.commit("documents/".concat(e.documentId,"/SET_EXTERNAL_APPROVAL_STATE"),t.value)},value:this.document.externalApprovalState,dataSource:(t=this,[{id:z.OnApproval,name:t.$t("lifeCycleState.onApproval")},{id:z.Signed,name:t.$t("lifeCycleState.signed")},{id:z.Unsigned,name:t.$t("lifeCycleState.unsigned")}])})},executionStateOptions:function(){var t=this;return W(W({readOnly:!this.canUpdate},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{onValueChanged:function(e){t.$store.commit("documents/".concat(t.documentId,"/SET_EXECUTION_STATE"),e.value)},value:this.document.executionState,dataSource:Object(Y.a)(this)})},controlExecutionStateOptions:function(){var t,e=this;return W(W({readOnly:!this.canUpdate},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{onValueChanged:function(t){e.$store.commit("documents/".concat(e.documentId,"/SET_CONTROL_EXECUTION_STATE"),t.value)},value:this.document.controlExecutionState,dataSource:(t=this,[{id:Q.OnControl,name:t.$t("lifeCycleState.onControl")},{id:Q.WithoutControl,name:t.$t("lifeCycleState.withoutControl")},{id:Q.ControlRemoved,name:t.$t("lifeCycleState.controlRemoved")}])})}}},K=Object(P.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"show-colon-after-label":!0,"show-validation-summary":!1}},[n("DxSimpleItem",{attrs:{"editor-type":"dxSelectBox","data-field":"lifeCycleState","editor-options":t.lifeCycleStateOptions}},[n("DxRequiredRule",{attrs:{message:t.$t("document.validation.stateRequired")}}),t._v(" "),n("DxLabel",{attrs:{location:"left",text:t.$t("document.state")}})],1),t._v(" "),t.itemVisible.registrationState?n("DxSimpleItem",{attrs:{"data-field":"registrationState","editor-options":t.registrationStateOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.registrationState")}})],1):t._e(),t._v(" "),t.itemVisible.internalApprovalState?n("DxSimpleItem",{attrs:{"data-field":"internalApprovalState","editor-options":t.internalApprovalStateOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.internalApprovalState")}})],1):t._e(),t._v(" "),t.itemVisible.externalApprovalState?n("DxSimpleItem",{attrs:{"data-field":"externalApprovalState","editor-options":t.externalApprovalStateOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.externalApprovalState")}})],1):t._e(),t._v(" "),t.itemVisible.executionState?n("DxSimpleItem",{attrs:{"data-field":"executionState","editor-options":t.executionStateOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.executionState")}})],1):t._e(),t._v(" "),t.itemVisible.executionState?n("DxSimpleItem",{attrs:{"data-field":"controlExecutionState","editor-options":t.controlExecutionStateOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.controlExecutionState")}})],1):t._e()],1)}),[],!1,null,null,null).exports,X=(n(203),n(222)),J=n(101),tt=n.n(J),et=n(12),nt=n.n(et),ot=n(381),it={components:{DxList:tt.a,DxButton:T.DxButton},props:["documentId"],created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData($.a.company.Employee);case 2:n=e.sent,data=n.data,t.employee=data;case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{isOpenPopup:!1,store:new E.a({store:this.$dxStore({key:"id",loadUrl:"".concat($.a.documentModule.Relation).concat(this.$store.getters["documents/".concat(this.documentId,"/document")].documentTypeGuid,"/").concat(this.documentId)}),paginate:!1}),documentTypes:new ot.a(this),employee:[],currentRelationId:!1}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]}},methods:{refresh:function(){this.store.reload()},openDocumentCard:function(t){var e=t.documentTypeGuid,n=t.documentId;this.$popup.documentCard(this,{params:{documentTypeGuid:e,documentId:n},handler:y.d},{listeners:[{eventName:"valueChanged",handlerName:"refresh"}]})},getData:function(address){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get(address);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))()},getIcon:function(t){return this.documentTypes.getById(t).icon},getUserById:function(t){var e=this.employee.find((function(e){return e===t}));return e?e.name:""}},filters:{formatDate:function(t){return t?nt()(t).format("MM.DD.YYYY"):""}}},at=(n(2200),Object(P.a)(it,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-container"},[n("DxButton",{staticClass:"refresh-btn",attrs:{hint:t.$t("buttons.refresh"),icon:"refresh",onClick:t.refresh}}),t._v(" "),n("DxList",{attrs:{"data-source":t.store,"search-enabled":!1},scopedSlots:t._u([{key:"item",fn:function(e){return[n("div",{on:{dblclick:function(n){return t.openDocumentCard({documentTypeGuid:e.data.documentTypeGuid,documentId:e.data.id})}}},[n("div",{staticClass:"d-flex"},[n("img",{staticClass:"custom-icon",attrs:{src:t.getIcon(e.data.documentTypeGuid),alt:""}}),t._v(" "),n("div",[n("div",{staticClass:"list__content"},[t._v(t._s(e.data.name))])])]),t._v(" "),n("div",{staticClass:"list__content"},[t._v("\n          "+t._s(t.getUserById(e.data.authorId))+"\n          "+t._s(t._f("formatDate")(e.data.placedToCaseFileDate))+"\n        ")])])]}}])})],1)}),[],!1,null,null,null).exports),st=n(2058),ct=(n(1987),n(151)),ut={components:{DxLookup:w.DxLookup,DxSearchPanel:w.DxSearchPanel,DxDataGrid:w.DxDataGrid,DxColumn:w.DxColumn,DxHeaderFilter:w.DxHeaderFilter,DxScrolling:w.DxScrolling,DxGrouping:w.DxGrouping,DxGroupPanel:w.DxGroupPanel,DxExport:w.DxExport,DxColumnChooser:w.DxColumnChooser,DxColumnFixing:w.DxColumnFixing,DxFilterRow:w.DxFilterRow,DxStateStoring:w.DxStateStoring,DxButton:T.DxButton,DxEditing:w.DxEditing,DxPaging:w.DxPaging,employeeSelectBox:ct.a},props:["id"],data:function(){return{dataSource:new E.a({store:this.$dxStore({key:"id",loadUrl:"".concat($.a.DocumentTracking.getDocumentTracking+this.id),paginate:!1})}),editButtons:[{icon:"menu",onClick:this.updateDocumentTracking}]}},methods:{toolbarPreparing:function(t){var e=this;t.toolbarOptions.items.unshift({widget:"button",location:"after",options:{hint:this.$t("buttons.refresh"),icon:"refresh",onClick:this.refresh}});var n=t.toolbarOptions.items.find((function(t){return"addRowButton"==t.name}));n&&(n.options.onClick=function(){e.$popup.documentTracking(e,{documentId:e.id},{width:"30vw",height:"auto",showLoadingPanel:!1,listeners:[{eventName:"valueChanged",handlerName:"valueChanged"}]})})},updateDocumentTracking:function(t){this.$popup.documentTracking(this,{documentId:this.id,isCard:!0,currentDocumentTracking:t.row.data},{width:"30vw",height:"auto",showLoadingPanel:!1,listeners:[{eventName:"valueChanged",handlerName:"valueChanged"}]})},valueChanged:function(){this.refresh()},refresh:function(){this.dataSource.reload()}}},lt=(n(2202),Object(P.a)(ut,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"pt-2"},[n("DxDataGrid",{attrs:{"show-borders":!0,errorRowEnabled:!1,"data-source":t.dataSource,"remote-operations":!1,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,height:"65vh","read-only":!0},on:{"toolbar-preparing":t.toolbarPreparing},scopedSlots:t._u([{key:"deliveryToId",fn:function(e){var o=e.data;return[o.value?n("employee-select-box",{attrs:{valueExpr:"id",displayExpr:"name",readOnly:!0,value:o.value.id}}):t._e()]}}])},[n("DxPaging",{attrs:{enabled:!1}}),t._v(" "),n("DxColumnFixing",{attrs:{enabled:!0}}),t._v(" "),n("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),n("DxEditing",{attrs:{mode:"row","allow-adding":!0,"use-icons":!0,"allow-updating":!0}}),t._v(" "),n("DxColumn",{attrs:{width:110,buttons:t.editButtons,type:"buttons"}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"deliveryTo",caption:t.$t("documentTracking.fileds.deliveryToEmployee"),cellTemplate:"deliveryToId"}}),t._v(" "),t._v(" "),n("DxColumn",{attrs:{"data-field":"isOriginal",caption:t.$t("documentTracking.fileds.isOriginal")}}),t._v(" "),n("DxColumn",{attrs:{"data-type":"date","data-field":"deliveryDate",caption:t.$t("documentTracking.fileds.deliveryDate")}}),t._v(" "),n("DxColumn",{attrs:{"data-type":"date","data-field":"returnDeadline",caption:t.$t("documentTracking.fileds.returnDeadline")}}),t._v(" "),n("DxColumn",{attrs:{"data-type":"date","data-field":"returnDate",caption:t.$t("documentTracking.fileds.returnDate")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"note",caption:t.$t("documentTracking.fileds.note")}})],1)],1)}),[],!1,null,null,null).exports),mt=n(2055),pt=n(256);function ft(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function ht(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ft(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ft(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var xt={components:{DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxForm:h.a},props:["documentId"],inject:["documentValidatorName"],computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isRegistrable:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistrable")]},registrationNumberHelptext:function(){return this.isRegistrable?this.$t("documentRegistration.registrationNumber"):this.$t("documentRegistration.documentNumber")},deliveryMethodVisible:function(){var t=this.document.documentTypeGuid;return t==U.a.IncomingLetter||t==U.a.OutgoingLetter},numberingAndDateVisible:function(){var t;return(null===(t=this.document.documentKind)||void 0===t?void 0:t.numberingType)!==pt.a.NotNumberable},canRegister:function(){return this.$store.getters["documents/".concat(this.documentId,"/canRegister")]},caseFileRequired:function(){return Boolean(this.document.placedToCaseFileDate)},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},placedToCaseFileDateOptions:function(){var t=this;return ht(ht({readOnly:!this.canRegister},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.placedToCaseFileDate,onValueChanged:function(e){t.$store.commit("documents/".concat(t.documentId,"/SET_PLACE_TO_CASE_FILE_DATE_ID"),e.value)}})},registrationNumberOptions:function(){return{disabled:!0,value:this.document.registrationNumber}},registrationDateOptions:function(){return{disabled:!0,value:this.document.registrationDate}},deliveryMethodOptions:function(){var t=this;return ht(ht({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.docFlow.DeliveryMethod})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.deliveryMethodId,onValueChanged:function(e){t.$store.commit("documents/".concat(t.documentId,"/SET_DELIVERY_METHOD_ID"),e.value)}})},documentRegisterOptions:function(){return{disabled:!0,value:this.document.documentRegister?this.document.documentRegister.name:""}},caseFileOptions:function(){var t=this;return ht(ht({readOnly:!this.canRegister},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.docFlow.CaseFile.AvailableForUse,filter:["status","=",0],value:"title"})),{},{value:this.document.caseFileId,onValueChanged:function(e){t.$store.commit("documents/".concat(t.documentId,"/SET_CASE_FILE_ID"),e.value),!t.document.placedToCaseFileDate&&t.document.caseFileId&&t.$store.commit("documents/".concat(t.documentId,"/SET_PLACE_TO_CASE_FILE_DATE_ID"),new Date)}})}}},yt=Object(P.a)(xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{visible:t.isRegistrable,"col-count":1,"read-only":!t.canUpdate,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName}},[n("DxGroupItem",{attrs:{"col-count":1}},[n("DxGroupItem",{attrs:{visible:t.numberingAndDateVisible,caption:t.$t("document.groups.captions.numberAndDate")}},[n("DxSimpleItem",{attrs:{"data-field":"registrationNumber","editor-options":t.registrationNumberOptions}},[n("DxLabel",{attrs:{location:"left",text:t.registrationNumberHelptext}})],1),t._v(" "),n("DxSimpleItem",{attrs:{visible:t.isRegistrable,"data-field":"documentRegister","editor-options":t.documentRegisterOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.documentRegisterId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"registrationDate","editor-options":t.registrationDateOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.registrationDate")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{visible:t.deliveryMethodVisible,"data-field":"deliveryMethodId","editor-options":t.deliveryMethodOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.deliveryMethodId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{caption:t.$t("document.groups.captions.storing")}},[n("DxSimpleItem",{attrs:{isRequired:t.caseFileRequired,"data-field":"caseFileId","editor-options":t.caseFileOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.caseFileId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"placedToCaseFileDate","editor-options":t.placedToCaseFileDateOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.placedToCaseFileDate")}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,gt=n(1883),vt=n(373),dialog=n(137),bt=n(142),Dt=n.n(bt),It=(n(290),n(461)),Ot=n.n(It),St=n(113),Rt={components:{DxButton:n.n(St).a},props:{documentId:{type:Number},canIntranetExchange:{type:Boolean},canElExchange:{type:Boolean}},data:function(){return{elexchangeIcon:Ot.a}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]}},methods:{sendToIntranetExchange:function(){},sendToElExchange:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.document)&&void 0!==n&&n.ourSignatory){e.next=3;break}return Object(dialog.alert)(t.$t("document.validation.ourSignatoryRequired"),t.$t("shared.error")),e.abrupt("return");case 3:return e.next=5,Object(dialog.confirm)(t.$t("document.confirm.sureSendToElectronExchangeService"),t.$t("shared.areYouSure"));case 5:e.sent&&t.$awn.asyncBlock(t.$axios.post($.a.documentModule.Exchange,{documentId:t.documentId}),(function(){t.$store.commit("documents/".concat(t.documentId,"/SET_EXCHANGED"),!0),t.$awn.success()}),(function(){t.$awn.alert()}));case 7:case"end":return e.stop()}}),e)})))()}}},Ct=Object(P.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxButton",{attrs:{visible:t.canIntranetExchange,icon:t.elexchangeIcon,text:t.$t("buttons.intranetExchange"),hint:t.$t("buttons.intranetExchange"),"on-click":t.sendToElExchange}}),t._v(" "),n("DxButton",{attrs:{visible:t.canElExchange&&!t.canIntranetExchange,icon:t.elexchangeIcon,text:t.$t("buttons.elExchange"),hint:t.$t("buttons.elExchange"),"on-click":t.sendToElExchange}})],1)}),[],!1,null,null,null).exports,$t=n(1954),Tt=n(2204),_t=n.n(Tt),Et=n(338);function wt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function jt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?wt(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):wt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Pt={components:{DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxButtonItem:f.DxButtonItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,DxPatternRule:f.DxPatternRule,DxRangeRule:f.DxRangeRule,DxStringLengthRule:f.DxStringLengthRule,DxForm:h.a,DxButton:T.DxButton},props:["documentId","defaultDocumentRegistration"],created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getPreliminaryRegistrationNumber();case 1:case"end":return e.stop()}}),e)})))()},data:function(){var t;return{saveButtonOptions:{text:this.$t("documentRegistration.buttons.register"),useSubmitBehavior:!0,type:"success"},regData:{isCustomNumber:!1,documentId:+this.documentId,documentTypeGuid:this.$store.getters["documents/".concat(this.documentId,"/document")].documentTypeGuid,registrationNumber:null,registrationDate:new Date,documentRegisterId:null===(t=this.defaultDocumentRegistration)||void 0===t?void 0:t.id},registrationNumberPattern:""}},computed:{preliminaryRegistrationNumberMessage:function(){return this.regData.isCustomNumber?"":this.$t("documentRegistration.preliminaryRegistrationNumberMessage")},preliminaryRegistrationNumber:function(){return this.regData.isCustomNumber?this.$t("documentRegistration.regNumberDocument"):this.$t("documentRegistration.preliminaryRegistrationNumber")},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isRegistered:function(){return this.$store.getters["docuemnts/".concat(this.documentId,"/isRegistered")]},filter:function(){return"?documentRegisterId=".concat(this.regData.documentRegisterId,"&documentId=").concat(this.regData.documentId,"&registrationDate=").concat(nt()(this.regData.registrationDate).format("L"))},registrationNumberOptions:function(){var t=this;return{disabled:!this.regData.isCustomNumber,onValueChanged:function(e){t.getPreliminaryRegistrationNumber()}}},registrationDateOptions:function(){var t=this;return{useMaskBehavior:!0,openOnFieldClick:!0,onValueChanged:function(e){t.getPreliminaryRegistrationNumber()}}},documentRegisterOptions:function(){var t=this;return jt(jt({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.docFlow.DocumentRegister.RegistrableDocumentRegisteres+this.regData.documentId})),{},{onValueChanged:function(e){t.regData.registrationDate?t.getPreliminaryRegistrationNumber():t.regData.registrationDate=new Date}})},isCustomNumberOptions:function(){var t=this;return{onValueChanged:function(e){t.getPreliminaryRegistrationNumber()}}}},methods:{getPreliminaryRegistrationNumber:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.regData.registrationDate||!t.regData.documentRegisterId||t.regData.isCustomNumber){e.next=6;break}return e.next=3,t.$axios.get($.a.docFlow.DocumentRegister.PreliminaryNumber+t.filter);case 3:n=e.sent,t.regData.registrationNumber=n.data.preliminaryNumber,t.registrationNumberPattern=n.data.pattern;case 6:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;this.$awn.asyncBlock(this.$store.dispatch("documents/".concat(this.documentId,"/registration"),this.regData),(function(e){t.$emit("hidePopup"),t.$awn.success()}),(function(e){return t.$awn.alert()}))}}},At=Object(P.a)(Pt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("DxForm",{attrs:{"form-data":t.regData,"read-only":!1,"show-colon-after-label":!0,"show-validation-summary":!0},on:{"update:formData":function(e){t.regData=e},"update:form-data":function(e){t.regData=e}}},[n("DxSimpleItem",{attrs:{"data-field":"isCustomNumber","editor-options":t.isCustomNumberOptions,"editor-type":"dxCheckBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("documentRegistration.isCustomNumber")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{helpText:t.preliminaryRegistrationNumberMessage,"data-field":"registrationNumber","editor-options":t.registrationNumberOptions}},[n("DxPatternRule",{attrs:{pattern:t.registrationNumberPattern}}),t._v(" "),n("DxLabel",{attrs:{location:"top",text:t.preliminaryRegistrationNumber}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("documentRegistration.validation.regNumberDocumentRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"documentRegisterId","editor-options":t.documentRegisterOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("documentRegistration.documentRegister")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("documentRegistration.validation.documentRegisterRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"registrationDate","editor-options":t.registrationDateOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("documentRegistration.registrationDate")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("documentRegistration.validation.registrationDateRequired")}})],1),t._v(" "),n("DxButtonItem",{attrs:{"button-options":t.saveButtonOptions,"horizontal-alignment":"right"}})],1)],1)}),[],!1,null,null,null),Bt=At.exports,kt=n(224),Nt={components:{DxButton:T.DxButton,DxPopup:Et.DxPopup,DocumentRegistrationPopup:Bt},props:["documentId"],data:function(){return{defaultDocumentRegistration:{},registerIcon:_t.a,isOpenDocumentRegistrationPopup:!1}},inject:["trySaveDocument"],methods:{togglePopup:function(){this.isOpenDocumentRegistrationPopup=!this.isOpenDocumentRegistrationPopup},register:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.trySaveDocument();case 2:if(!e.sent){e.next=8;break}return e.next=5,t.getDefaultDocumentRegiter();case 5:data=e.sent,t.defaultDocumentRegistration=data,t.togglePopup();case 8:case"end":return e.stop()}}),e)})))()},unRegister:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.trySaveDocument();case 2:if(!e.sent){e.next=5;break}Object(dialog.confirm)(t.$t("documentRegistration.areYouSureCancelRegistration"),t.$t("shared.confirm")).then((function(e){e&&t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/unRegister")),(function(e){t.$awn.success()}),(function(e){t.$awn.alert()}))}));case 5:case"end":return e.stop()}}),e)})))()},getDefaultDocumentRegiter:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("".concat($.a.docFlow.DocumentRegister.DefaultDocumentRegister).concat(t.documentId));case 2:return n=e.sent,data=n.data,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)})))()}},computed:{isDataChanged:function(){return this.$store.getters["documents/".concat(this.documentId,"/isDataChanged")]},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]}}},Lt=Object(P.a)(Nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navBar"},[n("DxPopup",{attrs:{visible:t.isOpenDocumentRegistrationPopup,"drag-enabled":!1,"close-on-outside-click":!0,"show-title":!0,width:500,height:"auto",title:t.$t("documentRegistration.cardOfRegistration")},on:{"update:visible":function(e){t.isOpenDocumentRegistrationPopup=e}}},[n("div",[t.isOpenDocumentRegistrationPopup?n("document-registration-popup",{attrs:{defaultDocumentRegistration:t.defaultDocumentRegistration,documentId:t.documentId},on:{hidePopup:t.togglePopup}}):t._e()],1)]),t._v(" "),t.isRegistered?n("DxButton",{attrs:{text:t.$t("documentRegistration.buttons.cancelRegistration"),onClick:t.unRegister,icon:"clear"}}):n("DxButton",{attrs:{text:t.$t("documentRegistration.buttons.register"),hint:t.$t("documentRegistration.buttons.register"),icon:t.registerIcon,onClick:t.register}})],1)}),[],!1,null,null,null).exports,Ut=n(2205),Ft=n.n(Ut),Vt={components:{DxButton:T.DxButton},data:function(){var t=this;return{messageText:this.$t("documentRegistration.notFindDocumentRegistrationSetting"),btnOptions:{icon:"close",stylingMode:"outlined",text:this.$t("buttons.closed"),onClick:function(){t.$emit("hidePopup")}}}}},qt=Object(P.a)(Vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex f-direction-column"},[n("div",{staticClass:"d-flex message-text"},[t._v(t._s(t.messageText))]),t._v(" "),n("div",[n("DxButton",{attrs:{icon:t.btnOptions.icon,stylingMode:t.btnOptions.stylingMode,text:t.btnOptions.text,onClick:t.btnOptions.onClick}})],1)])}),[],!1,null,null,null).exports;function Gt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Mt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Gt(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Gt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var zt={components:{DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxButtonItem:f.DxButtonItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,DxPatternRule:f.DxPatternRule,DxRangeRule:f.DxRangeRule,DxStringLengthRule:f.DxStringLengthRule,DxForm:h.a,DxButton:T.DxButton},props:["documentId","defaultDocumentRegistration"],data:function(){var t;return{saveButtonOptions:{text:this.$t("documentRegistration.buttons.numerate"),useSubmitBehavior:!0,type:"success"},regData:{documentId:+this.documentId,documentTypeGuid:this.$store.getters["documents/".concat(this.documentId,"/document")].documentTypeGuid,isCustomNumber:!1,documentRegisterId:null===(t=this.defaultDocumentRegistration)||void 0===t?void 0:t.id,registrationNumber:null,registrationDate:new Date},registrationNumberPattern:""}},created:function(){this.getPreliminaryRegistrationNumber()},computed:{preliminaryRegistrationNumberMessage:function(){return this.regData.isCustomNumber?"":this.$t("documentRegistration.preliminaryRegistrationNumberMessage")},preliminaryRegistrationNumber:function(){return this.regData.isCustomNumber?this.$t("documentRegistration.regNumberDocument"):this.$t("documentRegistration.preliminaryRegistrationNumber")},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isRegistered:function(){return this.$store.getters["docuemnts/".concat(this.documentId,"/isRegistered")]},filter:function(){return"?documentRegisterId=".concat(this.regData.documentRegisterId,"&documentId=").concat(this.regData.documentId,"&registrationDate=").concat(nt()(this.regData.registrationDate).format("L"))},registrationNumberOptions:function(){var t=this;return{disabled:!this.regData.isCustomNumber,onValueChanged:function(e){t.getPreliminaryRegistrationNumber()}}},registrationDateOptions:function(){var t=this;return{useMaskBehavior:!0,openOnFieldClick:!0,onValueChanged:function(e){t.getPreliminaryRegistrationNumber()}}},documentRegisterOptions:function(){var t;return Mt(Mt({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:null===(t=this.defaultDocumentRegistration)||void 0===t?void 0:t.name,disabled:!0})},isCustomNumberOptions:function(){var t=this;return{onValueChanged:function(e){t.getPreliminaryRegistrationNumber()}}}},methods:{getPreliminaryRegistrationNumber:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.regData.registrationDate||!t.regData.documentRegisterId||t.regData.isCustomNumber){e.next=6;break}return e.next=3,t.$axios.get($.a.docFlow.DocumentRegister.PreliminaryNumber+t.filter);case 3:n=e.sent,t.regData.registrationNumber=n.data.preliminaryNumber,t.registrationNumberPattern=n.data.pattern;case 6:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;this.$awn.asyncBlock(this.$store.dispatch("documents/".concat(this.documentId,"/registration"),this.regData),(function(e){t.$emit("hidePopup"),t.$awn.success()}),(function(e){return t.$awn.alert()}))}}},Yt=Object(P.a)(zt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("DxForm",{attrs:{"form-data":t.regData,"read-only":!1,"show-colon-after-label":!0,"show-validation-summary":!0},on:{"update:formData":function(e){t.regData=e},"update:form-data":function(e){t.regData=e}}},[n("DxSimpleItem",{attrs:{"data-field":"isCustomNumber","editor-options":t.isCustomNumberOptions,"editor-type":"dxCheckBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("documentRegistration.isCustomNumber")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{helpText:t.preliminaryRegistrationNumberMessage,"data-field":"registrationNumber","editor-options":t.registrationNumberOptions}},[n("DxPatternRule",{attrs:{pattern:t.registrationNumberPattern}}),t._v(" "),n("DxLabel",{attrs:{location:"top",text:t.preliminaryRegistrationNumber}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("documentRegistration.validation.regNumberDocumentRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"editor-options":t.documentRegisterOptions,"editor-type":"dxTextBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("documentRegistration.documentRegister")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("documentRegistration.validation.documentRegisterRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"registrationDate","editor-options":t.registrationDateOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"top",text:t.$t("documentRegistration.registrationDate")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("documentRegistration.validation.registrationDateRequired")}})],1),t._v(" "),n("DxButtonItem",{attrs:{"button-options":t.saveButtonOptions,"horizontal-alignment":"right"}})],1)],1)}),[],!1,null,null,null),Qt=Yt.exports,Ht={components:{DxButton:T.DxButton,DxPopup:Et.DxPopup,documentNumeratePopup:Qt,notFindDocumentRegisterPopup:qt},props:["documentId"],data:function(){return{numerateIcon:Ft.a,isOpenPopupRegiterCard:!1,isOpenNotFindDocumentRegister:!1,defaultDocumentRegistration:{}}},inject:["trySaveDocument"],methods:{showPopupRegisterCard:function(data){this.defaultDocumentRegistration=data,this.togglePopup("isOpenPopupRegiterCard")},showPopupNotFindDocumentRegister:function(){this.togglePopup("isOpenNotFindDocumentRegister")},togglePopup:function(t){this[t]=!this[t]},register:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.trySaveDocument();case 2:if(!e.sent){e.next=7;break}return e.next=5,t.getDefaultDocumentRegiter();case 5:""===(data=e.sent)?t.showPopupNotFindDocumentRegister():t.showPopupRegisterCard(data);case 7:case"end":return e.stop()}}),e)})))()},unRegister:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.trySaveDocument();case 2:if(!e.sent){e.next=5;break}Object(dialog.confirm)(t.$t("documentRegistration.areYouSureClearNumerate"),t.$t("shared.confirm")).then((function(e){e&&t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/unRegister")),(function(e){t.$awn.success()}),(function(e){t.$awn.alert()}))}));case 5:case"end":return e.stop()}}),e)})))()},getDefaultDocumentRegiter:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("".concat($.a.docFlow.DocumentRegister.DefaultDocumentRegister).concat(t.documentId));case 2:return n=e.sent,data=n.data,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)})))()}},computed:{isDataChanged:function(){return this.$store.getters["documents/".concat(this.documentId,"/isDataChanged")]},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]}}},Wt={components:{RegisterDocumentBtn:Lt,NumerateDocumentBtn:Object(P.a)(Ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navBar"},[n("DxPopup",{attrs:{visible:t.isOpenPopupRegiterCard,"drag-enabled":!0,"close-on-outside-click":!0,"show-title":!0,"min-width":300,width:600,height:"auto",title:t.$t("documentRegistration.cardOfNumbering")},on:{"update:visible":function(e){t.isOpenPopupRegiterCard=e}}},[n("div",[t.isOpenPopupRegiterCard?n("document-numerate-popup",{attrs:{defaultDocumentRegistration:t.defaultDocumentRegistration,documentId:t.documentId}}):t._e()],1)]),t._v(" "),n("DxPopup",{attrs:{deferRendering:!1,visible:t.isOpenNotFindDocumentRegister,"drag-enabled":!1,"close-on-outside-click":!0,"show-title":!0,width:400,"max-width":"100%",position:"center",height:"300px",title:t.$t("shared.notFound")},on:{"update:visible":function(e){t.isOpenNotFindDocumentRegister=e}}},[n("div",[t.isOpenNotFindDocumentRegister?n("not-find-document-register-popup",{on:{hidePopup:function(){return t.togglePopup("isOpenNotFindDocumentRegister")}}}):t._e()],1)]),t._v(" "),t.isRegistered?n("DxButton",{attrs:{text:t.$t("documentRegistration.buttons.clearNumerate"),onClick:t.unRegister,icon:"clear"}}):n("DxButton",{attrs:{text:t.$t("documentRegistration.buttons.numerate"),hint:t.$t("documentRegistration.buttons.numerate"),icon:t.numerateIcon,onClick:t.register}})],1)}),[],!1,null,null,null).exports},props:["documentId"],computed:{registrationButtonComponent:function(){var t,e=null===(t=this.$store.getters["documents/".concat(this.documentId,"/document")])||void 0===t?void 0:t.documentKind;switch(null==e?void 0:e.numberingType){case pt.a.Registrable:return"register-document-btn";case pt.a.Numerable:return"numerate-document-btn";default:return null}}}},Zt=Object(P.a)(Wt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.registrationButtonComponent,{tag:"component",attrs:{documentId:t.documentId}})}),[],!1,null,null,null).exports,Kt=n(1955),Xt=(n(111),n(65)),Jt=n(66),te=n(45);function ee(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function ne(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ee(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ee(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(te.a)(t);if(e){var r=Object(te.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(Jt.a)(this,n)}}var re=function(t){Object(Xt.a)(n,t);var e=oe(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(D.a)(n,[{key:"init",value:function(t){return this.filterByTypeGuid(t).withMethodCreate(),this}},{key:"filterByTypeGuid",value:function(t){var e=[];switch(t){case U.a.IncomingLetter:e=[U.a.OutgoingLetter,U.a.Addendum];break;case U.a.OutgoingLetter:e=[U.a.IncomingLetter,U.a.Addendum];break;default:e=[U.a.Addendum]}return this.elements=this.filtering(e),this}},{key:"withMethodCreate",value:function(){var t=this,e=function(element){t.elements[element].create=function(e,n,o){var r=n.params,c=n.handler,d=void 0===c?y.b:c;e.$popup.documentCard(e,{params:ne({documentTypeGuid:+t.elements[element].id,documentTypeId:+t.elements[element].id},r),handler:d})}};for(var element in this.elements)e(element);return this}}]),n}(ot.a);n(124);function ie(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function ae(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ie(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ie(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var se,ce,ue=Object(D.a)((function t(e){var n=e.items;Object(v.a)(this,t),this.useSelectMode=!1,this.splitButton=!1,this.dropDownOptions={width:330},this.icon="link",this.displayExpr="text",this.items=n.map((function(t){return new de(t)}))})),de=function(){function t(e){var n=Object.assign({},e);for(var option in Object(v.a)(this,t),n)this[option]=n[option]}var e;return Object(D.a)(t,[{key:"create",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.b)(e,ae({documentTypeId:+this.id},n));case 2:return o=t.sent,r=o.documentId,c=o.documentTypeGuid,t.abrupt("return",{documentId:r,documentTypeGuid:c});case 6:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}(),le={components:{DxDropDownButton:T.DxDropDownButton},props:["documentId"],computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},dropDownConfigure:function(){return new ue({items:this.items})},items:function(){return Object.values(new re(this).init(this.document.documentTypeGuid).getAll())}},methods:{createRelation:function(t){t.itemData.create(this,{params:{leadingDocumentId:+this.documentId}})}}},me=Object(P.a)(le,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxDropDownButton",{attrs:{"use-select-mode":t.dropDownConfigure.useSelectMode,"split-button":t.dropDownConfigure.splitButton,text:t.$t("buttons.createRelation"),hint:t.$t("buttons.createRelation"),"drop-down-options":t.dropDownConfigure.dropDownOptions,items:t.dropDownConfigure.items,icon:t.dropDownConfigure.icon,"display-expr":t.dropDownConfigure.displayExpr},on:{"item-click":t.createRelation}})],1)}),[],!1,null,null,null).exports,pe=n(384),fe=n(96),he=n(1948),xe=n.n(he),ye=n(1957),ge={components:{DxDropDownButton:T.DxDropDownButton},props:["documentId"],data:function(){return{sendIcon:xe.a}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},items:function(){var t;if(!this.document.documentKind)return[];var e=[].concat(Object(fe.a)(null===(t=this.document.documentKind)||void 0===t?void 0:t.availableActions),[X.a.SimpleTask])||[X.a.SimpleTask],n=Object.values(new ye.a(this).init().filtering(e));return n}},methods:{createTask:function(t){t.itemData.create(this,{documentId:+this.documentId,documentTypeGuid:this.document.documentTypeGuid})}}},ve=Object(P.a)(ge,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxDropDownButton",{attrs:{"use-select-mode":!1,"split-button":!1,text:t.$t("buttons.send"),hint:t.$t("buttons.createTaskByDocument"),"drop-down-options":{width:330},items:t.items,icon:t.sendIcon,"display-expr":"text"},on:{"item-click":t.createTask}})],1)}),[],!1,null,null,null).exports,be=n(27),De=n(2206),Ie=n.n(De),Oe=n(1067),Se=n.n(Oe),Re=n(1937),Ce=n.n(Re),$e={components:{toolbarItemUploadVersion:Kt.a,toolbarItemAccessRight:pe.a,toolbarItemRegistration:Zt,toolbarItemAvailableActions:ve,toolbarItemRelation:me,toolbarItemCreateVersion:$t.a,toolbarItemElExchange:Ct,DxButton:T.DxButton,DxToolbar:Dt.a,DxItem:bt.DxItem},props:["isCard","documentId"],inject:["trySaveDocument"],data:function(){var t=this;return{addendumIcon:Ie.a,saveIcon:Se.a,saveAndCloseIcon:Ce.a,backButtonOptions:{type:"back",onClick:function(){t.$router.go(-1)}}}},computed:(se={exchanged:function(){return this.document.exchanged},correspondent:function(){return this.$store.getters["documents/".concat(this.documentId,"/correspondent")]},canIntranetExchange:function(){var t,e;return"Company"===(null===(t=this.correspondent)||void 0===t?void 0:t.type)&&(null===(e=this.correspondent)||void 0===e?void 0:e.isSystem)&&this.canElExchange},isOutgoingDocument:function(){var t;return(null===(t=this.document.documentKind)||void 0===t?void 0:t.documentFlow)===kt.a.Outgoing},documentCanExchange:function(){return this.$store.getters["documents/".concat(this.documentId,"/canExchange")]},canElExchange:function(){return!(!(this.isOutgoingDocument&&this.documentCanExchange&&this.canUpdate)||this.isNew||this.isDataChanged||!this.isRegistered)},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.document.id,"/canUpdate")]},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},canBeOpenedWithPreview:function(){return this.document.canBeOpenedWithPreview},canEditVersion:function(){return Object(gt.a)(this.document.extension)&&this.canUpdate&&this.document.canBeOpenedWithPreview},hasVersions:function(){return this.document.hasVersions},isNew:function(){return this.$store.getters["documents/".concat(this.documentId,"/isNew")]},entityType:function(){return Object(U.b)(this.document.documentTypeGuid)}},Object(c.a)(se,"canUpdate",(function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]})),Object(c.a)(se,"isDataChanged",(function(){return this.$store.getters["documents/".concat(this.documentId,"/isDataChanged")]})),Object(c.a)(se,"canRegister",(function(){return this.$store.getters["documents/".concat(this.documentId,"/canRegister")]&&this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]})),Object(c.a)(se,"canDelete",(function(){return this.$store.getters["documents/".concat(this.documentId,"/canDelete")]&&!this.isNew})),Object(c.a)(se,"isRegistered",(function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]})),Object(c.a)(se,"previewButtonOptions",(function(){var t=this;return{text:this.$t("buttons.read"),hint:this.$t("buttons.read"),icon:"pdffile",onClick:function(){Object(gt.b)({context:t,options:{readOnly:!0,extension:t.document.extension,params:{documentId:t.documentId}},lastVersion:!0})}}})),Object(c.a)(se,"editButtonOptions",(function(){var t=this;return{text:this.$t("buttons.edit"),hint:this.$t("buttons.edit"),icon:"edit",onClick:function(){Object(gt.b)({context:t,options:{readOnly:!1,extension:t.document.extension,params:{documentId:t.document.id}},lastVersion:!0,listeners:[{eventName:"valueChanged",handlerName:"pasteVersion"}]})}}})),Object(c.a)(se,"saveButtonOptions",(function(){var t,e=this;return{icon:Se.a,disabled:!this.canUpdate||!this.isDataChanged,onClick:(t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.trySaveDocument();case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})),Object(c.a)(se,"versionOptions",(function(){var t=this;return{icon:"unselectall",hint:this.$t("buttons.versions"),text:this.$t("buttons.versions"),onClick:function(){t.$emit("openVersion")}}})),Object(c.a)(se,"saveAndBackButtonOptions",(function(){var t,e=this;return{icon:Ce.a,hint:this.$t("buttons.saveAndBack"),disabled:!this.canUpdate||!this.isDataChanged,onClick:(t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.trySaveDocument();case 2:if(!t.sent){t.next=4;break}e.$emit("onClose");case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})),Object(c.a)(se,"removeDocumentButtonOptions",(function(){var t=this;return{icon:"trash",type:"normal",hint:this.$t("document.remove"),onClick:function(){Object(dialog.confirm)(t.$t("shared.areYouSure"),t.$t("shared.confirm")).then((function(e){e&&t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/delete")),(function(e){t.$emit("onRemove"),t.$awn.success()}),(function(e){t.$awn.alert()}))}))}}})),Object(c.a)(se,"refreshButtonOptions",(function(){var t=this;return{icon:"refresh",onClick:function(){var e=t.document,n=e.documentTypeGuid,o=e.id;t.$awn.asyncBlock(Object(y.e)(t,{documentTypeGuid:n,documentId:o}),(function(){}))}}})),se),methods:{pasteVersion:function(t){var e=t.file;switch(t.extension){case".docx":this.pasteDocxVersion({file:e});break;case".xlsx":this.pasteXlsXVersion({file:e});break;default:throw"can't paste this file "}},pasteXlsXVersion:function(t){var e=this,n=t.file;this.$awn.asyncBlock(vt.b.createVersionFromSpreadSheet(this,this.document,n),(function(){e.$awn.success()}),(function(){e.$awn.alert()}))},pasteDocxVersion:function(t){var e=this,n=t.file;this.$awn.asyncBlock(vt.b.createVersionFromDocumentEditor(this.document,n,this,"test.docx"),(function(){e.$awn.success()}),(function(){e.$awn.alert()}))}}},Te=$e,_e=(n(2207),Object(P.a)(Te,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navBar"},[n("DxToolbar",{scopedSlots:t._u([{key:"toolbarItemRegistration",fn:function(){return[n("toolbar-item-registration",{attrs:{documentId:t.documentId}})]},proxy:!0},{key:"toolbarItemRelation",fn:function(){return[n("toolbar-item-relation",{attrs:{documentId:t.documentId}})]},proxy:!0},{key:"toolbarItemavailableActions",fn:function(){return[n("toolbar-item-available-actions",{attrs:{documentId:t.documentId}})]},proxy:!0},{key:"toolbarItemElExchange",fn:function(){return[n("toolbarItemElExchange",{attrs:{canIntranetExchange:t.canIntranetExchange,canElExchange:t.canElExchange,documentId:t.documentId}})]},proxy:!0},{key:"toolbarItemAccessRight",fn:function(){return[n("toolbar-item-access-right",{attrs:{"entity-type":t.entityType,"entity-id":t.documentId}})]},proxy:!0},{key:"toolbarItemCreateVersion",fn:function(){return[n("toolbarItemCreateVersion",{attrs:{documentId:t.documentId}})]},proxy:!0}])},[n("DxItem",{attrs:{locateInMenu:"auto",options:t.saveButtonOptions,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",options:t.saveAndBackButtonOptions,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",options:t.refreshButtonOptions,visible:!t.isDataChanged,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",visible:t.canRegister,location:"before",template:"toolbarItemRegistration"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",template:"toolbarItemRelation",visible:!t.isNew,location:"before",widget:"dxButton"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",template:"toolbarItemavailableActions",visible:!t.isDataChanged,location:"before"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{locateInMenu:"auto",template:"toolbarItemElExchange",visible:(t.canElExchange||t.canIntranetExchange)&&!t.exchanged,location:"before",widget:"dxButton"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{options:t.versionOptions,location:"after",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{template:"toolbarItemAccessRight",location:"after"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{template:"toolbarItemCreateVersion",locateInMenu:"auto",visible:!t.hasVersions&&t.canUpdate,location:"before"}}),t._v(" "),t._v(" "),n("DxItem",{attrs:{options:t.previewButtonOptions,locateInMenu:"auto",visible:t.canBeOpenedWithPreview,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{options:t.editButtonOptions,locateInMenu:"auto",visible:t.canEditVersion,location:"before",widget:"dxButton"}}),t._v(" "),n("DxItem",{attrs:{visible:t.canDelete,options:t.removeDocumentButtonOptions,location:"after",widget:"dxButton"}})],1)],1)}),[],!1,null,"1baa5edc",null).exports),Ee=n(374),we=n(291);function je(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Pe(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?je(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):je(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Ae,Be={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{signatoryApi:$.a.signatureSettings.Members}},computed:(ce={document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},businessUnit:function(){return this.document.businessUnit},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},issuedTo:function(){return this.document.issuedTo},preparedBy:function(){return this.document.preparedBy},ourSignatory:function(){return this.document.ourSignatory},department:function(){return this.document.department}},Object(c.a)(ce,"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),Object(c.a)(ce,"preparedByOptions",(function(){var t,e=this;return Pe(Pe({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.company.Employee,filter:[this.department?["departmentId","=",null===(t=this.department)||void 0===t?void 0:t.id]:[],"and",["status","=",m.b.Active]]})),{},{readOnly:this.readOnly,value:this.document.preparedBy,onValueChanged:function(t){e.setPreparedBy(t.value)}})})),Object(c.a)(ce,"issuedToIdOptions",(function(){var t=this;return Pe(Pe({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.company.Employee,filter:[["businessUnitId","=",this.businessUnitId],"and",["status","=",m.b.Active]]})),{},{value:this.document.issuedTo,onValueChanged:function(e){t.dispatchIssuedTo(e.value)}})})),Object(c.a)(ce,"validTillOptions",(function(){var t=this;return Pe(Pe({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})})),ce),methods:{setPreparedBy:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_PREPARED_BY"),data)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},dispatchIssuedTo:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setIssuedTo"),data)},setIssuedTo:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ISSUED_TO"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)}}},ke=Object(P.a)(Be,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"read-only":t.readOnly,"col-count":1,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,storeApi:t.signatoryApi,value:t.ourSignatory},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"issuedToId",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.issuedTo},on:{valueChanged:t.setIssuedTo}})]},proxy:!0},{key:"prepared",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.preparedBy},on:{valueChanged:t.setPreparedBy}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setDepartment(null),t.setIssuedTo(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setOurSignatory(null),t.setPreparedBy(null)}}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{"col-count":2}},[n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"validTill","editor-options":t.validTillOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.validTill")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.validTillRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"issuedToId",template:"issuedToId"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.issuedToId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.issuedToIdRequired")}})],1)],1),t._v(" "),n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.ourSignatoryRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"prepared","data-field":"preparedBy"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.preparedById")}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,Ne={components:{employeeSelectBox:ct.a,DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],computed:Object(c.a)({document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},businessUnit:function(){return this.document.businessUnit},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},preparedBy:function(){return this.document.preparedBy},ourSignatory:function(){return this.document.ourSignatory},assignee:function(){return this.document.assignee},addressee:function(){return this.document.addressee},department:function(){return this.document.department}},"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),methods:{setPreparedBy:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_PREPARED_BY"),data)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setAssignee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ASSIGNEE"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)}}},Le=Object(P.a)(Ne,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":1,"read-only":t.readOnly,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"assignee",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.assignee},on:{valueChanged:t.setAssignee}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.ourSignatory},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"prepared",fn:function(){return[n("employee-select-box",{attrs:{validatorGroup:t.documentValidatorName,isRequired:!0,"read-only":t.readOnly,value:t.preparedBy},on:{valueChanged:t.setPreparedBy}})]},proxy:!0},{key:"addressee",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0},on:{valueChanged:t.setAddressee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{valueExpr:"id","read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setDepartment(null),t.setAddressee(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setAddressee(null)}}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{"col-count":2}},[n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox","editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1)],1),t._v(" "),n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"prepared","data-field":"preparedBy"}},[n("DxRequiredRule",{attrs:{message:t.$t("document.validation.preparedRequired")}}),t._v(" "),n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.preparedById")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"assignee",template:"assignee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.assigneeId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"addressee","data-field":"addressee"}},[n("DxRequiredRule",{attrs:{message:t.$t("document.validation.addresseeIdRequired")}}),t._v(" "),n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.addresseeId")}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,Ue=n(1887),Fe={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],methods:{setLeadingDocument:function(t){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),t)}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]}}},Ve=Object(P.a)(Fe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":1,store:t.document,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},on:{"update:store":function(e){t.document=e}},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0}])},[n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"leadingDocument",template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.leadingDocumentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.leadingDocumentIdRequired")}})],1)],1)],1)}),[],!1,null,null,null).exports,qe={props:["documentId"]},Ge=Object(P.a)(qe,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,Me={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{signatoryApi:$.a.signatureSettings.Members}},computed:(Ae={document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},businessUnit:function(){return this.document.businessUnit},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},preparedBy:function(){return this.document.preparedBy},ourSignatory:function(){return this.document.ourSignatory},assignee:function(){return this.document.assignee}},Object(c.a)(Ae,"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),Object(c.a)(Ae,"department",(function(){return this.document.department})),Ae),methods:{setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setPreparedBy:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_PREPARED_BY"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setAssignee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ASSIGNEE"),data)}}},ze=Object(P.a)(Me,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"read-only":t.readOnly,"col-count":1,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"assignee",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.assignee},on:{valueChanged:t.setAssignee}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,storeApi:t.signatoryApi,value:t.ourSignatory},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"prepared",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.preparedBy},on:{valueChanged:t.setPreparedBy}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setPreparedBy(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setPreparedBy(null)}}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{"col-count":2}},[n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1)],1),t._v(" "),n("DxGroupItem",[n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"prepared","data-field":"preparedBy"}},[n("DxRequiredRule",{attrs:{message:t.$t("document.validation.preparedRequired")}}),t._v(" "),n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.preparedById")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"assignee",template:"assignee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.assigneeId")}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,Ye=n(1889),Qe=n(376),He=n(42),We={components:{customSelectBox:Qe.a,DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBoxContact:Ye.a,customSelectBoxDocument:Ue.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},businessUnit:function(){return this.document.businessUnit},department:function(){return this.document.department},preparedBy:function(){return this.document.preparedBy},ourSignatory:function(){return this.document.ourSignatory},addressee:function(){return this.document.addressee},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},store:function(){return this.document},correspondentId:function(){return this.document.correspondentId},inResponseToOptions:function(){return{readOnly:!this.correspondentId||this.readOnly,dataSourceQuery:He.a.IncomingLetter,dataSourceFilter:this.correspondentId?["correspondentId","=",this.correspondentId]:void 0}},retentionPeriodOptions:function(){var t=this;return{value:0==this.document.retentionPeriod?null:this.document.retentionPeriod,onValueChanged:function(e){t.setRetentionPeriod(null==e.value?0:e.value)}}}},methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data,this.$store.commit("documents/".concat(this.documentId,"/SET_CORRESPONDENT"),data)},setCorrenspondent:function(data){null===data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCorrespondent(data),this.setInResponseTo(null),this.setAddressee(null)},dispatchCorrespondent:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCorrespondent"),data)},setInResponseTo:function(data){this.$store.commit("documents/".concat(this.documentId,"/IN_RESPONSE_TO"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setPreparedBy:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_PREPARED_BY"),data)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setRetentionPeriod:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_RETENTION_PERIOD"),data)}}},Ze=Object(P.a)(We,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{store:t.store,"show-colon-after-label":!0,"show-validation-summary":!1,readOnly:!t.canUpdate,"validation-group":t.documentValidatorName},on:{"update:store":function(e){t.store=e}},scopedSlots:t._u([{key:"inResponseTo",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.inResponseToOptions.readOnly,dataSourceFilter:t.inResponseToOptions.dataSourceFilter,dataSourceQuery:t.inResponseToOptions.dataSourceQuery,value:t.document.inResponseTo},on:{valueChanged:t.setInResponseTo}})]},proxy:!0},{key:"correspondent",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.correspondentId},on:{valueChanged:t.setCorrenspondent,selectionChanged:t.handlerCorrespondentSelectionChanged}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",disabled:!t.isCompany||t.readOnly,correspondentId:t.correspondentId,value:t.addressee},on:{valueChanged:t.setAddressee}})]},proxy:!0},{key:"prepared",fn:function(){return[n("employee-select-box",{attrs:{"read-only":!t.canUpdate,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.preparedBy},on:{valueChanged:t.setPreparedBy}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{"read-only":!t.canUpdate,value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data)}}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{caption:t.$t("document.fields.whom")}},[n("DxSimpleItem",{attrs:{"data-field":"correspondentId",template:"correspondent"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"addressee",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.addresseeId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"inResponseTo","col-span":2,"data-field":"inResponseTo"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.inResponseToId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2,caption:t.$t("shared.fromWhom")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"prepared","data-field":"preparedBy"}},[n("DxRequiredRule",{attrs:{message:t.$t("document.validation.preparedRequired")}}),t._v(" "),n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.preparedById")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"retentionPeriod","data-type":"number","editor-type":"dxNumberBox","editor-options":t.retentionPeriodOptions}},[n("DxLabel",{attrs:{text:t.$t("document.fields.retentionPeriod")}})],1)],1)],1)}),[],!1,null,null,null).exports;function Ke(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Xe(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ke(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ke(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Je,tn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,customSelectBoxDocument:Ue.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null}},computed:{businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},businessUnit:function(){return this.document.businessUnit},assignee:function(){return this.document.assignee},addressee:function(){return this.document.addressee},department:function(){return this.document.department},contactId:function(){return this.document.contactId},correspondentId:function(){return this.document.correspondentId},counterpartySignatoryId:function(){return this.document.counterpartySignatoryId},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},deliveryMethodOptions:function(){var t=this;return Xe(Xe({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.docFlow.MailDeliveryMethod})),{},{value:this.document.deliveryMethodId,onValueChanged:function(e){t.setSetDeliveryMethodId(e.value)}})},inResponseToOptions:function(){return{readOnly:!this.correspondentId||this.readOnly,dataSourceQuery:He.a.OutgoingLetter,dataSourceFilter:this.correspondentId?["correspondentId","=",this.correspondentId]:void 0}},inNumberOptions:function(){var t=this;return Xe(Xe({readOnly:this.isRegistered},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.inNumber,onValueChanged:function(e){t.setInNumber(e.value)}})},datedOptions:function(){var t=this;return Xe(Xe({readOnly:this.isRegistered},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{type:"date",dateSerializationFormat:"yyyy-MM-dd",useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.dated,onValueChanged:function(e){t.setDated(e.value)}})},retentionPeriodOptions:function(){var t=this;return{value:0==this.document.retentionPeriod?null:this.document.retentionPeriod,onValueChanged:function(e){t.setRetentionPeriod(null==e.value?0:e.value)}}}},methods:{setCorrenspondent:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCorrespondent(data),this.setContact(null),this.setCounterpartySignatoryId(null),this.setInResponseTo(null)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},setSetDeliveryMethodId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DELIVERY_METHOD_ID"),data)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setInResponseTo:function(data){this.$store.commit("documents/".concat(this.documentId,"/IN_RESPONSE_TO"),data)},setInNumber:function(data){this.$store.commit("documents/".concat(this.documentId,"/IN_NUMBER"),data)},setDated:function(data){this.$store.commit("documents/".concat(this.documentId,"/DATED"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setAssignee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ASSIGNEE"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},dispatchCorrespondent:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCorrespondent"),data)},handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setRetentionPeriod:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_RETENTION_PERIOD"),data)}}},en=Object(P.a)(tn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":1,"read-only":!t.canUpdate,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"inResponseTo",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.inResponseToOptions.readOnly,dataSourceFilter:t.inResponseToOptions.dataSourceFilter,dataSourceQuery:t.inResponseToOptions.dataSourceQuery,validationGroup:t.documentValidatorName,isRequired:!1,value:t.document.inResponseTo},on:{valueChanged:t.setInResponseTo}})]},proxy:!0},{key:"correspondent",fn:function(){return[n("custom-select-box",{attrs:{"value-expr":"id",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.correspondentId},on:{valueChanged:t.setCorrenspondent,selectionChanged:t.handlerCorrespondentSelectionChanged}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{"value-expr":"id",disabled:!t.isCompany||t.readOnly,correspondentId:t.correspondentId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{"value-expr":"id",disabled:!t.isCompany||t.readOnly,correspondentId:t.correspondentId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"addressee",fn:function(){return[n("employee-select-box",{attrs:{"read-only":!t.canUpdate,value:t.addressee},on:{valueChanged:t.setAddressee}})]},proxy:!0},{key:"assignee",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.assignee},on:{valueChanged:t.setAssignee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setAddressee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setAddressee(null)}}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{"col-count":2,caption:t.$t("shared.fromWhom")}},[n("DxSimpleItem",{attrs:{"col-span":2,"data-field":"correspondentId",template:"correspondent"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"dated","editor-options":t.datedOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.dated")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"inNumber","editor-options":t.inNumberOptions}},[n("DxLabel",{attrs:{location:"left",text:"№"}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"inResponseTo","col-span":2,"data-field":"inResponseToId"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.inResponseToId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2,caption:t.$t("shared.whom")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"addressee",template:"addressee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.addresseeId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"assignee",template:"assignee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.assigneeId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"retentionPeriod","data-type":"number","editor-type":"dxNumberBox","editor-options":t.retentionPeriodOptions}},[n("DxLabel",{attrs:{text:t.$t("document.fields.retentionPeriod")}})],1)],1)],1)}),[],!1,null,null,null).exports;function nn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function on(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?nn(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):nn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var rn,an,sn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members}},computed:(Je={isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},validTillRequired:function(){return this.isAutomaticRenewal||Boolean(this.daysToFinishWorks)},validFromRequired:function(){return this.isAutomaticRenewal},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},counterpartyId:function(){return this.document.counterpartyId}},Object(c.a)(Je,"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),Object(c.a)(Je,"department",(function(){return this.document.department})),Object(c.a)(Je,"contactId",(function(){return this.document.contactId})),Object(c.a)(Je,"businessUnit",(function(){return this.document.businessUnit})),Object(c.a)(Je,"businessUnitId",(function(){var t;return null===(t=this.businessUnit)||void 0===t?void 0:t.id})),Object(c.a)(Je,"counterpartySignatoryId",(function(){return this.document.counterpartySignatoryId})),Object(c.a)(Je,"ourSignatory",(function(){return this.document.ourSignatory})),Object(c.a)(Je,"responsibleEmployee",(function(){return this.document.responsibleEmployee})),Object(c.a)(Je,"daysToFinishWorks",(function(){return this.document.daysToFinishWorks})),Object(c.a)(Je,"validTill",(function(){return this.document.validTill})),Object(c.a)(Je,"isAutomaticRenewal",(function(){return this.document.isAutomaticRenewal})),Object(c.a)(Je,"isStandardOptions",(function(){var t=this;return{readOnly:this.readOnly,value:this.document.isStandard,onValueChanged:function(e){t.setIsStandard(e.value)}}})),Object(c.a)(Je,"currencyIdOptions",(function(){var t=this;return on(on({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.readOnly,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})})),Object(c.a)(Je,"totalAmountOptions",(function(){var t=this;return on(on({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.readOnly,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})})),Object(c.a)(Je,"isAutomaticRenewalOptions",(function(){var t=this;return{value:this.isAutomaticRenewal,onValueChanged:function(e){t.setAutomaticRenewal(e.value)}}})),Object(c.a)(Je,"documentGroupIdOptions",(function(){var t=this;return on(on({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.docFlow.ContractCategories,filter:["status","=",m.b.Active]})),{},{value:this.document.documentGroupId,onValueChanged:function(e){t.setDocumentGroupId(e.value)}})})),Object(c.a)(Je,"validFromOptions",(function(){var t=this;return on(on({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(e.value)}})})),Object(c.a)(Je,"validTillOptions",(function(){var t=this;return on(on({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})})),Object(c.a)(Je,"daysToFinishWorksOptions",(function(){var t=this;return{readOnly:this.readOnly,value:this.daysToFinishWorks,onValueChanged:function(e){t.setDaysToFinishWorks(e.value)}}})),Je),methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setContact(null),this.setCounterpartySignatoryId(null)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setResponsibleEmployee:function(data){return this.$store.commit("documents/".concat(this.documentId,"/SET_RESPONSIBLE_EMPLOYEE"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setDaysToFinishWorks:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DAYS_TO_FINISH_WORKS"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setDocumentGroupId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DOCUMENT_GROUP_ID"),data)},setAutomaticRenewal:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_AUTOMATIC_RENEWAL"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)},setIsStandard:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_IS_STANDARD"),data)}}},cn=Object(P.a)(sn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id",readOnly:t.readOnly,isRequired:!0,validatorGroup:t.documentValidatorName,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{readOnly:t.readOnly,value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"responsibleEmployee",fn:function(){return[n("employee-select-box",{attrs:{readOnly:t.readOnly,value:t.responsibleEmployee},on:{valueChanged:t.setResponsibleEmployee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setAddressee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setAddressee(null)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"documentGroupId","editor-type":"dxSelectBox","editor-options":t.documentGroupIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.documentGroupId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.documentGroupIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"isStandard","editor-type":"dxCheckBox","editor-options":t.isStandardOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.isStandard")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"responsibleEmployee","data-field":"responsibleEmployee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.responsibleEmployeeId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":3,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{isRequired:t.validFromRequired,"data-field":"validFrom","editor-options":t.validFromOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.validFrom")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{isRequired:t.validTillRequired,"data-field":"validTill","editor-options":t.validTillOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.validTill")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"daysToFinishWorks","editor-options":t.daysToFinishWorksOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.daysToFinishWorks")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"isAutomaticRenewal","editor-type":"dxCheckBox","editor-options":t.isAutomaticRenewalOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.isAutomaticRenewal")}})],1)],1)],1)}),[],!1,null,null,null).exports;function un(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function dn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?un(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):un(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ln={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],computed:(rn={document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},counterpartyId:function(){return this.document.counterpartyId},department:function(){return this.document.department}},Object(c.a)(rn,"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),Object(c.a)(rn,"businessUnitId",(function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id})),Object(c.a)(rn,"businessUnit",(function(){return this.document.businessUnit})),Object(c.a)(rn,"numberOptions",(function(){var t=this;return dn(dn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.number,onValueChanged:function(e){t.setNumber(e.value)}})})),Object(c.a)(rn,"dateOptions",(function(){var t=this;return dn(dn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.date,onValueChanged:function(e){t.setDate(e.value)}})})),Object(c.a)(rn,"leadingDocumentOptions",(function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}})),Object(c.a)(rn,"currencyIdOptions",(function(){var t=this;return dn(dn({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.readOnly,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})})),Object(c.a)(rn,"totalAmountOptions",(function(){var t=this;return{format:"#,##0.00",readOnly:this.readOnly,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}}})),rn),methods:(an={setCounterparty:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPARTY"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)}},Object(c.a)(an,"setDepartment",(function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)})),Object(c.a)(an,"setCurrencyId",(function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)})),Object(c.a)(an,"setLeadingDocument",(function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)})),Object(c.a)(an,"setDate",(function(data){this.$store.commit("documents/".concat(this.documentId,"/DATE"),data)})),Object(c.a)(an,"setNumber",(function(data){this.$store.commit("documents/".concat(this.documentId,"/NUMBER"),data)})),an)},mn=Object(P.a)(ln,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{"value-expr":"id",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{valueChanged:function(data){t.setCounterparty(data),t.setLeadingDocument(null)}}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data)}}})]},proxy:!0}])},[n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.account")}},[n("DxSimpleItem",{attrs:{isRequired:!0,"data-field":"number","editor-options":t.numberOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.accountNumber")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{isRequired:!0,"data-field":"date","editor-options":t.dateOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.accountDate")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{isRequired:!0,"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{isRequired:!0,"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v("\n    >\n    "),n("DxSimpleItem",{attrs:{"data-field":"leadingDocument","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.contractRequired")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1)],1)],1)}),[],!1,null,null,null).exports;function pn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function fn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?pn(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):pn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var hn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members,validatorGroup:"OfficialDocument"}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},businessUnit:function(){return this.document.businessUnit},counterpartyId:function(){return this.document.counterpartyId},department:function(){return this.document.department},contactId:function(){return this.document.contactId},counterpartySignatoryId:function(){return this.document.counterpartySignatoryId},ourSignatory:function(){return this.document.ourSignatory},responsibleEmployee:function(){return this.document.responsibleEmployee},validTill:function(){return this.document.validTill},isStandardOptions:function(){var t=this;return{readOnly:this.readOnly,value:this.document.isStandard,onValueChanged:function(e){t.setIsStandard(e.value)}}},leadingDocumentOptions:function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}},currencyIdOptions:function(){var t=this;return fn(fn({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.readOnly,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})},totalAmountOptions:function(){var t=this;return fn(fn({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.readOnly,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})},validFromOptions:function(){var t=this;return fn(fn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(e.value)}})},validTillOptions:function(){var t=this;return fn(fn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{useMaskBehavior:!0,openOnFieldClick:!0,value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})}},methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setLeadingDocument(null),this.setContact(null),this.setCounterpartySignatoryId(null)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},setLeadingDocument:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setResponsibleEmployee:function(data){return this.$store.commit("documents/".concat(this.documentId,"/SET_RESPONSIBLE_EMPLOYEE"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setIsStandard:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_IS_STANDARD"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)}}},xn=Object(P.a)(hn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,readOnly:t.readOnly,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{readOnly:t.readOnly,value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"responsibleEmployee",fn:function(){return[n("employee-select-box",{attrs:{readOnly:t.readOnly,value:t.responsibleEmployee},on:{valueChanged:t.setResponsibleEmployee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setAddressee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setAddressee(null)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"col-span":2,"data-field":"isStandard","editor-type":"dxCheckBox","editor-options":t.isStandardOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.isStandardSupAgreement")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"leadingDocument","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.contractRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"responsibleEmployee","data-field":"responsibleEmployee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.responsibleEmployeeId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{"data-field":"validFrom","editor-options":t.validFromOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.validFrom")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"validTill","editor-options":t.validTillOptions,"editor-type":"dxDateBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.validTill")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1)],1)}),[],!1,null,null,null).exports;function yn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function gn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?yn(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):yn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var vn,bn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxDocument:Ue.a,customSelectBoxContact:Ye.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},validTill:function(){return this.document.validTill},counterpartyId:function(){return this.document.counterpartyId},businessUnit:function(){return this.document.businessUnit},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},department:function(){return this.document.department},contactId:function(){return this.document.contactId},counterpartySignatoryId:function(){return this.document.counterpartySignatoryId},ourSignatory:function(){return this.document.ourSignatory},responsibleEmployee:function(){return this.document.responsibleEmployee},leadingDocumentOptions:function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}},currencyIdOptions:function(){var t=this;return gn(gn({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.readOnly,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})},totalAmountOptions:function(){var t=this;return gn(gn({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.readOnly,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})},validFromOptions:function(){var t=this;return gn(gn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(null)}})},validTillOptions:function(){var t=this;return gn(gn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})}},methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setLeadingDocument(null),this.setContact(null),this.setCounterpartySignatoryId(null)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setLeadingDocument:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setResponsibleEmployee:function(data){return this.$store.commit("documents/".concat(this.documentId,"/SET_RESPONSIBLE_EMPLOYEE"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)}}},Dn=Object(P.a)(bn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{"value-expr":"id",messageRequired:"document.validation.counterPartRequired",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"responsibleEmployee",fn:function(){return[n("employee-select-box",{attrs:{value:t.responsibleEmployee},on:{valueChanged:t.setResponsibleEmployee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setAddressee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setAddressee(null)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"data-field":"leadingDocumentId","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.contractRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"responsibleEmployee","data-field":"responsibleEmployeeId"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.responsibleEmployeeId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1)],1)}),[],!1,null,null,null).exports;n(1898);function In(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function On(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?In(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):In(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Sn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members}},computed:(vn={document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},businessUnit:function(){return this.document.businessUnit},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},counterpartyId:function(){return this.document.counterpartyId},department:function(){return this.document.department}},Object(c.a)(vn,"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),Object(c.a)(vn,"contactId",(function(){return this.document.contactId})),Object(c.a)(vn,"counterpartySignatoryId",(function(){return this.document.counterpartySignatoryId})),Object(c.a)(vn,"ourSignatory",(function(){return this.document.ourSignatory})),Object(c.a)(vn,"responsibleEmployee",(function(){return this.document.responsibleEmployee})),Object(c.a)(vn,"isAdjustment",(function(){return this.document.isAdjustment})),Object(c.a)(vn,"validTill",(function(){return this.document.validTill})),Object(c.a)(vn,"isAdjustmentOptions",(function(){var t=this;return{readOnly:this.readOnly,value:this.isAdjustment,onValueChanged:function(e){t.setIsAdjustment(e.value),t.setCorrected(null)}}})),Object(c.a)(vn,"correctedOptions",(function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.IncomingTaxInvoice,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}})),Object(c.a)(vn,"leadingDocumentOptions",(function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}})),Object(c.a)(vn,"currencyIdOptions",(function(){var t=this;return On(On({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.readOnly,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})})),Object(c.a)(vn,"totalAmountOptions",(function(){var t=this;return On(On({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.readOnly,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})})),Object(c.a)(vn,"validFromOptions",(function(){var t=this;return On(On({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(null)}})})),Object(c.a)(vn,"validTillOptions",(function(){var t=this;return On(On({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})})),vn),methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setCorrected(null),this.setLeadingDocument(null),this.setContact(null),this.setCounterpartySignatoryId(null)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setCorrected:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CORRECTED"),data)},setLeadingDocument:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)},setIsAdjustment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_IS_ADJUSTMENT"),data)}}},Rn=Object(P.a)(Sn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"corrected",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.correctedOptions.readOnly,dataSourceFilter:t.correctedOptions.dataSourceFilter,dataSourceQuery:t.correctedOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.corrected,isRequired:t.isAdjustment},on:{valueChanged:t.setCorrected}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"data-field":"leadingDocument","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.contractRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2}},[n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"isAdjustment","editor-type":"dxCheckBox","editor-options":t.isAdjustmentOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.isAdjustment")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"corrected",visible:t.isAdjustment,isRequired:t.isAdjustment,template:"corrected"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.corrected")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1)],1)}),[],!1,null,null,null).exports;function Cn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function $n(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Cn(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Cn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Tn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members,validatorGroup:"OfficialDocument"}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},validTill:function(){return this.document.validTill},businessUnit:function(){return this.document.businessUnit},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},counterpartyId:function(){return this.document.counterpartyId},department:function(){return this.document.department},contactId:function(){return this.document.contactId},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},ourSignatory:function(){return this.document.ourSignatory},responsibleEmployee:function(){return this.document.responsibleEmployee},isAdjustment:function(){return this.document.isAdjustment},isAdjustmentOptions:function(){var t=this;return{readOnly:this.isRegistered,value:this.isAdjustment,onValueChanged:function(e){t.setIsAdjustment(e.value),t.setCorrected(null)}}},correctedOptions:function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.OutgoingTaxInvoice,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}},leadingDocumentOptions:function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}},currencyIdOptions:function(){var t=this;return $n($n({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.isRegistered,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})},totalAmountOptions:function(){var t=this;return $n($n({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.isRegistered,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})},validFromOptions:function(){var t=this;return $n($n({readOnly:this.isRegistered},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(null)}})},validTillOptions:function(){var t=this;return $n($n({readOnly:this.isRegistered},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})}},methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setCorrected(null),this.setLeadingDocument(null),this.setContact(null)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setCorrected:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CORRECTED"),data)},setLeadingDocument:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setResponsibleEmployee:function(data){return this.$store.commit("documents/".concat(this.documentId,"/SET_RESPONSIBLE_EMPLOYEE"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)},setIsAdjustment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_IS_ADJUSTMENT"),data)}}},_n=Object(P.a)(Tn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"corrected",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.correctedOptions.readOnly,dataSourceFilter:t.correctedOptions.dataSourceFilter,dataSourceQuery:t.correctedOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.corrected,isRequired:t.isAdjustment},on:{valueChanged:t.setCorrected}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id",validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"responsibleEmployee",fn:function(){return[n("employee-select-box",{attrs:{value:t.responsibleEmployee},on:{valueChanged:t.setResponsibleEmployee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setAddressee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setAddressee(null)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"data-field":"leadingDocument","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.contractRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2}},[n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"isAdjustment","editor-type":"dxCheckBox","editor-options":t.isAdjustmentOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.isAdjustment")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"corrected",visible:t.isAdjustment,isRequired:t.isAdjustment,template:"corrected"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.corrected")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{visible:t.isCompany,"col-count":1}},[n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"responsibleEmployee","data-field":"responsibleEmployee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.responsibleEmployeeId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1)],1)}),[],!1,null,null,null).exports;function En(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function wn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?En(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):En(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var jn,Pn={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members}},computed:{document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},validTill:function(){return this.document.validTill},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},businessUnit:function(){return this.document.businessUnit},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},counterpartyId:function(){return this.document.counterpartyId},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},department:function(){return this.document.department},contactId:function(){return this.document.contactId},counterpartySignatoryId:function(){return this.document.counterpartySignatoryId},ourSignatory:function(){return this.document.ourSignatory},responsibleEmployee:function(){return this.document.responsibleEmployee},isAdjustment:function(){return this.document.isAdjustment},isAdjustmentOptions:function(){var t=this;return{readOnly:this.isRegistered,value:this.isAdjustment,onValueChanged:function(e){t.setIsAdjustment(e.value),t.setCorrected(null)}}},correctedOptions:function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.AccountingDocuments,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}},leadingDocumentOptions:function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}},currencyIdOptions:function(){var t=this;return wn(wn({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.isRegistered,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})},totalAmountOptions:function(){var t=this;return wn(wn({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.isRegistered,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})},validFromOptions:function(){var t=this;return wn(wn({readOnly:this.isRegistered},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(e.value)}})},validTillOptions:function(){var t=this;return wn(wn({readOnly:this.isRegistered},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})}},methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setCorrected(null),this.setContact(null),this.setLeadingDocument(null),this.setCounterpartySignatoryId(null)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setResponsibleEmployee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_RESPONSIBLE_EMPLOYEE"),data)},setCorrected:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CORRECTED"),data)},setLeadingDocument:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)},setIsAdjustment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_IS_ADJUSTMENT"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)}}},An=Object(P.a)(Pn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"corrected",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.correctedOptions.readOnly,dataSourceFilter:t.correctedOptions.dataSourceFilter,dataSourceQuery:t.correctedOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.corrected,isRequired:t.isAdjustment},on:{valueChanged:t.setCorrected}})]},proxy:!0},{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id",readOnly:t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id",readOnly:t.readOnly,disabled:!t.isCompany,correspondentId:t.counterpartyId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"responsibleEmployee",fn:function(){return[n("employee-select-box",{attrs:{value:t.responsibleEmployee},on:{valueChanged:t.setResponsibleEmployee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setResponsibleEmployee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setResponsibleEmployee(null)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"data-field":"leadingDocument","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.contractRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2}},[n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"isAdjustment","editor-type":"dxCheckBox","editor-options":t.isAdjustmentOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.isAdjustment")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"corrected",visible:t.isAdjustment,isRequired:t.isAdjustment,template:"corrected"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.corrected")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"responsibleEmployee","data-field":"responsibleEmployee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.responsibleEmployeeId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1)],1)}),[],!1,null,null,null).exports;function Bn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function kn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Bn(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Bn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Nn,Ln={components:{DxForm:h.a,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxLabel:f.DxLabel,DxRequiredRule:f.DxRequiredRule,customSelectBox:Qe.a,customSelectBoxContact:Ye.a,employeeSelectBox:ct.a,BusinessUnitSelectBox:we.a,DepartmentSelectBox:Ee.a,customSelectBoxDocument:Ue.a},props:["documentId"],inject:["documentValidatorName"],data:function(){return{selectedCorrespondentType:null,signatoryApi:$.a.signatureSettings.Members}},computed:(jn={document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isCompany:function(){var t;return null!=this.selectedCorrespondentType&&"Person"!==(null===(t=this.selectedCorrespondentType)||void 0===t?void 0:t.type)},businessUnitId:function(){var t;return null===(t=this.document.businessUnit)||void 0===t?void 0:t.id},businessUnit:function(){return this.document.businessUnit},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},counterpartyId:function(){return this.document.counterpartyId},department:function(){return this.document.department},contactId:function(){return this.document.contactId}},Object(c.a)(jn,"readOnly",(function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]})),Object(c.a)(jn,"counterpartySignatoryId",(function(){return this.document.counterpartySignatoryId})),Object(c.a)(jn,"ourSignatory",(function(){return this.document.ourSignatory})),Object(c.a)(jn,"validTill",(function(){return this.document.validTill})),Object(c.a)(jn,"responsibleEmployee",(function(){return this.document.responsibleEmployee})),Object(c.a)(jn,"leadingDocumentOptions",(function(){return{readOnly:!this.counterpartyId||this.readOnly,dataSourceQuery:He.a.Contract,dataSourceFilter:this.counterpartyId?["counterpartyId","=",this.counterpartyId]:void 0}})),Object(c.a)(jn,"currencyIdOptions",(function(){var t=this;return kn(kn({},this.$store.getters["globalProperties/FormOptions"]({context:this,url:$.a.sharedDirectory.Currency,filter:["status","=",m.b.Active]})),{},{readOnly:this.readOnly,value:this.document.currencyId,onValueChanged:function(e){t.setCurrencyId(e.value)}})})),Object(c.a)(jn,"totalAmountOptions",(function(){var t=this;return kn(kn({},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{format:"#,##0.00",readOnly:this.readOnly,value:this.document.totalAmount,onValueChanged:function(e){t.setTotalAmount(e.value)}})})),Object(c.a)(jn,"validFromOptions",(function(){var t=this;return kn(kn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.document.validFrom,onValueChanged:function(e){t.setValidFrom(null)}})})),Object(c.a)(jn,"validTillOptions",(function(){var t=this;return kn(kn({readOnly:this.readOnly},this.$store.getters["globalProperties/FormOptions"]({context:this})),{},{value:this.validTill,onValueChanged:function(e){t.setValidTill(e.value)}})})),jn),methods:{handlerCorrespondentSelectionChanged:function(data){this.selectedCorrespondentType=data},setCounterparty:function(data){null==data&&this.selectedCorrespondentType&&(this.selectedCorrespondentType.type=null),this.dispatchCounterparty(data),this.setLeadingDocument(null),this.setContact(null),this.setCounterpartySignatoryId(null)},setLeadingDocument:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setLeadingDocument"),data)},dispatchCounterparty:function(data){this.$store.dispatch("documents/".concat(this.documentId,"/setCounterparty"),data)},setContact:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CONTACT_ID"),data&&data.id)},setCounterpartySignatoryId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_COUNTERPART_SIGNATORY_ID"),data&&data.id)},setOurSignatory:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_OUR_SIGNATORY"),data)},setResponsibleEmployee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_RESPONSIBLE_EMPLOYEE"),data)},setBusinessUnit:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_BUSINESS_UNIT"),data)},setAddressee:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_ADDRESSE"),data)},setDepartment:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_DEPARTMENT"),data)},setValidTill:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_TILL"),data)},setValidFrom:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_VALID_FROM"),data)},setTotalAmount:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_TOTAL_AMOUNT"),data)},setCurrencyId:function(data){this.$store.commit("documents/".concat(this.documentId,"/SET_CURRENCY_ID"),data)}}},Un=Object(P.a)(Ln,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxForm",{attrs:{"col-count":2,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"leadingDocument",fn:function(){return[n("customSelectBoxDocument",{attrs:{readOnly:t.leadingDocumentOptions.readOnly,dataSourceFilter:t.leadingDocumentOptions.dataSourceFilter,dataSourceQuery:t.leadingDocumentOptions.dataSourceQuery,validationGroup:t.documentValidatorName,value:t.document.leadingDocument,isRequired:!0},on:{valueChanged:t.setLeadingDocument}})]},proxy:!0},{key:"counterparty",fn:function(){return[n("custom-select-box",{attrs:{valueExpr:"id","read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,messageRequired:"document.validation.counterPartRequired",value:t.counterpartyId},on:{selectionChanged:t.handlerCorrespondentSelectionChanged,valueChanged:t.setCounterparty}})]},proxy:!0},{key:"contact",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id","read-only":t.readOnly,correspondentId:t.counterpartyId,value:t.contactId},on:{valueChanged:t.setContact}})]},proxy:!0},{key:"counterPartSignatury",fn:function(){return[n("custom-select-box-contact",{attrs:{valueExpr:"id","read-only":t.readOnly,correspondentId:t.counterpartyId,value:t.counterpartySignatoryId},on:{valueChanged:t.setCounterpartySignatoryId}})]},proxy:!0},{key:"ourSignatory",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.ourSignatory,storeApi:t.signatoryApi},on:{valueChanged:t.setOurSignatory}})]},proxy:!0},{key:"responsibleEmployee",fn:function(){return[n("employee-select-box",{attrs:{"read-only":t.readOnly,value:t.responsibleEmployee},on:{valueChanged:t.setResponsibleEmployee}})]},proxy:!0},{key:"businessUnitSelectBox",fn:function(){return[n("business-unit-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.businessUnit},on:{valueChanged:function(data){t.setBusinessUnit(data),t.setResponsibleEmployee(null),t.setDepartment(null)}}})]},proxy:!0},{key:"departmentSelectBox",fn:function(){return[n("department-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:!0,value:t.department,businessUnitId:t.businessUnitId},on:{valueChanged:function(data){t.setDepartment(data),t.setResponsibleEmployee(null)}}})]},proxy:!0}])},[n("DxSimpleItem",{attrs:{"data-field":"leadingDocumentId","col-span":2,template:"leadingDocument"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contract")}}),t._v("\n    // TODO not work without this property\n    ")],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":1,caption:t.$t("document.fields.counterPart")}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartyId",template:"counterparty"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.counterPart")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.counterPartRequired")}})],1),t._v(" "),n("DxGroupItem",{attrs:{visible:t.isCompany,"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"counterpartySignatoryId",template:"counterPartSignatury"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"contactId",template:"contact"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.contactId")}})],1)],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.ourSide")}},[n("DxSimpleItem",{attrs:{"data-field":"businessUnit",template:"businessUnitSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.businessUnitId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.businessUnitIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"department",template:"departmentSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.departmentId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.departmentIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"ourSignatory",template:"ourSignatory"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.signatory")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"responsibleEmployee","data-field":"responsibleEmployee"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.responsibleEmployeeId")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":2,"col-count":2,caption:t.$t("shared.conditions")}},[n("DxSimpleItem",{attrs:{"data-field":"totalAmount","editor-options":t.totalAmountOptions,"editor-type":"dxNumberBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.totalAmount")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"col-span":1,"data-field":"currencyId","editor-type":"dxSelectBox","editor-options":t.currencyIdOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.currencyId")}})],1)],1)],1)}),[],!1,null,null,null).exports,Fn=n(2056),Vn=n(569),qn=n(567),Gn=n(578),Mn={components:{DxForm:h.a,AutoCompleteTextArea:x.a,DocumentSelectBox:Ue.a,DepartmentSelectBox:Ee.a,EmployeeSelectBox:ct.a,EmployeeTagBox:Gn.a,ContactSelectBox:Ye.a,BusinessUnitSelectBox:we.a,CounterPartSelectBox:Qe.a,RecipientSelectBox:Vn.a,RecipientTagBox:qn.a},inject:["documentValidatorName"],props:{documentType:{},documentId:{}},created:function(){this.dynamicElements=new Fn.a(this,d.a.getElements(this,this.documentType))},data:function(){return{dynamicElements:[]}},computed:{document:function(){return this.documentId?this.$store.getters["documents/".concat(this.documentId,"/document")]:{}},readOnly:function(){return!!this.documentId&&this.$store.getters["documents/".concat(this.documentId,"/readOnly")]}},methods:{value:function(t,e){if(this.documentId)return this.$store.getters["documents/".concat(this.documentId,"/value")](t)},change:function(t,data){this.$store.commit("documents/".concat(this.documentId,"/SET_DYNAMIC_FIELD"),{data:data,value:t})}}},zn=Object(P.a)(Mn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("DxForm",{ref:"form",attrs:{"scrolling-enabled":!0,"show-colon-after-label":!0,"show-validation-summary":!1,"col-count":2,items:t.dynamicElements,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"DocumentSelectBox",fn:function(e){var data=e.data;return[n("DocumentSelectBox",{attrs:{readOnly:t.readOnly,dataSourceQuery:data.editorOptions.dataSourceQuery,validationGroup:t.documentValidatorName,isRequired:data.editorOptions.isRequired,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"AutoCompleteBox",fn:function(e){var data=e.data;return[n("Auto-complete-text-area",{attrs:{value:t.value(data.dataField),options:{isRequired:data.editorOptions.isRequired,validationGroup:t.documentValidatorName,readOnly:t.readOnly}},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"CounterPartSelectBox",fn:function(e){var data=e.data;return[n("Counter-part-select-box",{attrs:{readOnly:t.readOnly,isRequired:data.editorOptions.isRequired,validatorGroup:t.documentValidatorName,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"ContactSelectBox",fn:function(e){var data=e.data;return[n("Contact-select-box",{attrs:{disabled:t.readOnly,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"EmployeeSelectBox",fn:function(e){var data=e.data;return[n("Employee-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:data.editorOptions.isRequired,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"EmployeeTagBox",fn:function(e){var data=e.data;return[n("Employee-tag-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,isRequired:data.editorOptions.isRequired,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"BusinessUnitSelectBox",fn:function(e){var data=e.data;return[n("Business-unit-select-box",{attrs:{"read-only":t.readOnly,isRequired:data.editorOptions.isRequired,validatorGroup:t.documentValidatorName,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"DepartmentSelectBox",fn:function(e){var data=e.data;return[n("Department-select-box",{attrs:{"read-only":t.readOnly,isRequired:data.editorOptions.isRequired,validatorGroup:t.documentValidatorName,value:t.value(data.dataField)},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"RecipientSelectBox",fn:function(e){var data=e.data;return[n("Recipient-select-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,value:t.value(data.dataField),isRequired:data.editorOptions.isRequired},on:{valueChanged:function(e){return t.change(e,data)}}})]}},{key:"RecipientTagBox",fn:function(e){var data=e.data;return[n("Recipient-tag-box",{attrs:{"read-only":t.readOnly,validatorGroup:t.documentValidatorName,value:t.value(data.dataField)||[],isRequired:data.editorOptions.isRequired},on:{valueChanged:function(e){return t.change(e,data)}}})]}}])})],1)}),[],!1,null,null,null).exports;function Yn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Qn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Yn(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Yn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Hn={components:Qn(Qn({},o),{},{AutocomleteTextArea:x.a,DxTabbedItem:f.DxTabbedItem,DxTab:f.DxTab,Relation:at,History:st.a,DocumentExtradition:lt,docVersion:mt.a,docRegistration:yt,Toolbar:_e,DxGroupItem:f.DxGroupItem,DxSimpleItem:f.DxSimpleItem,DxRequiredRule:f.DxRequiredRule,DxLabel:f.DxLabel,DxForm:h.a,lifeCycle:K,Header:L.a,documentTasks:N,ElExchangeLogs:A}),name:"document-card",destroyed:function(){!1===this.isNew&&this.onClosed(),U.a.DynamicDocument===this.document.documentTypeGuid&&d.a.removeStore(this,this.document.dynamicDocumentTypeId),Object(y.g)(this,this.documentId)},props:["isCard","documentId"],head:function(){return{title:this.$store.getters["documents/".concat(this.documentId,"/document")].name}},provide:function(){return{trySaveDocument:this.trySave,documentValidatorName:this.documentValidatorName}},created:function(){this.isNew&&this.$store.commit("documents/".concat(this.documentId,"/DATA_CHANGED"),!0),this.$store.commit("documents/".concat(this.documentId,"/SKIP_ROUTE_HANDLING"),!1)},data:function(){return{versionOpenState:!1,entityTypeGuid:Object(U.b)(this.$store.getters["documents/".concat(this.documentId,"/document")].documentTypeGuid),tabPanelOptions:{focusStateEnabled:!1,animationEnabled:!1,swipeEnabled:!1,loop:"true"},documentValidatorName:"OfficialDocument/".concat(this.documentId)}},methods:{changeSubject:function(t){this.$store.dispatch("documents/".concat(this.documentId,"/setSubject"),t)},onRemove:function(){this.$emit("onClose",this.documentId)},onClosed:function(){var t=this.document,e=t.documentTypeGuid,n=t.id;this.$emit("onClosed",{documentTypeGuid:e,id:n})},onClose:function(){this.$emit("onClose")},trySave:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.instance.validate().isValid){e.next=7;break}if(!t.isDataChanged){e.next=4;break}return e.next=4,t.$awn.asyncBlock(t.$store.dispatch("documents/".concat(t.documentId,"/save")));case 4:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))()},openVersion:function(){this.versionOpenState=!this.versionOpenState}},computed:(Nn={isExchangeble:function(){switch(this.document.documentTypeGuid){case U.a.IncomingLetter:case U.a.OutgoingLetter:return!0}},autocomleteTextOptions:function(){return{category:"Document",entityType:this.document.documentTypeGuid,readOnly:this.readOnly,height:70}},canExchangePermission:function(){return this.$store.getters["permissions/canExchange"](be.a.OfficialDocument)},document:function(){return this.$store.getters["documents/".concat(this.documentId,"/document")]},isNew:function(){return this.$store.getters["documents/".concat(this.documentId,"/isNew")]},generateHeaderTitle:function(){return this.isNew?new ot.a(this).getById(this.document.documentTypeGuid).text:this.document.name},documentKindOptions:function(){var t,e=this;return Qn(Qn({},(new l.a).withUrl($.a.docFlow.DocumentKind).filter((t=this.document,t.documentTypeGuid===U.a.DynamicDocument?[["documentTypeId","=",e.document.dynamicDocumentTypeId],"and",["status","=",m.b.Active]]:[["documentTypeId","=",e.document.documentTypeGuid],"and",["status","=",m.b.Active]])).acceptCustomValues((function(t){t.customItem=null})).withoutDeferRendering().focusStateDisabled().clearValueExpr().build(this)),{},{value:this.document.documentKind,onValueChanged:function(t){e.$store.dispatch("documents/".concat(e.documentId,"/setDocumentKind"),t.value)}})},readOnly:function(){return this.$store.getters["documents/".concat(this.documentId,"/readOnly")]},isRegistered:function(){return this.$store.getters["documents/".concat(this.documentId,"/isRegistered")]},canUpdate:function(){return this.$store.getters["documents/".concat(this.documentId,"/canUpdate")]},isDataChanged:function(){return this.$store.getters["documents/".concat(this.documentId,"/isDataChanged")]}},Object(c.a)(Nn,"isNew",(function(){return this.$store.getters["documents/".concat(this.documentId,"/isNew")]})),Object(c.a)(Nn,"formByTypeGuid",(function(){switch(this.document.documentTypeGuid){case U.a.IncomingLetter:return"incoming-letter";case U.a.OutgoingLetter:return"outgoing-letter";case U.a.Order:case U.a.CompanyDirective:return"order-base";case U.a.SimpleDocument:return"simple-document";case U.a.Addendum:return"addendum";case U.a.Memo:return"memo";case U.a.PowerOfAttorney:return"power-of-attorney";case U.a.Contract:return"contract";case U.a.IncomingInvoice:return"incoming-invoice";case U.a.SupAgreement:return"sup-agreement";case U.a.ContractStatement:return"contract-statement";case U.a.IncomingTaxInvoice:return"incoming-taxInvoice";case U.a.OutgoingTaxInvoice:return"outgoing-tax-invoice";case U.a.UniversalTransferDocument:return"universal-transfer-document";case U.a.Waybill:return"waybill";case U.a.DynamicDocument:return"dynamic-document"}})),Object(c.a)(Nn,"nameOptions",(function(){var t,e=this;return{value:this.document.name,disabled:(null===(t=this.document.documentKind)||void 0===t?void 0:t.generateDocumentName)||this.isRegistered,onValueChanged:function(t){e.$store.commit("documents/".concat(e.documentId,"/SET_NAME"),t.value)}}})),Object(c.a)(Nn,"noteOptions",(function(){var t=this;return{readOnly:!this.canUpdate,value:this.document.note,height:70,autoResizeEnabled:!0,onValueChanged:function(e){t.$store.commit("documents/".concat(t.documentId,"/SET_NOTE"),e.value)}}})),Nn)},Wn=(n(2209),Object(P.a)(Hn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{headerTitle:t.generateHeaderTitle,isbackButton:!t.isCard,showTitle:!t.isCard,isNew:t.isNew}}),t._v(" "),n("toolbar",{attrs:{documentId:t.documentId,isCard:t.isCard},on:{onClose:t.onClose,openVersion:t.openVersion,onRemove:t.onRemove}}),t._v(" "),n("div",{staticClass:"wrapper--relative"},[n("DxForm",{ref:"form",staticClass:"mt-1",attrs:{"scrolling-enabled":!0,"read-only":t.readOnly,"show-colon-after-label":!0,"show-validation-summary":!1,"validation-group":t.documentValidatorName},scopedSlots:t._u([{key:"ElExchangeLogs",fn:function(){return[n("El-exchange-logs",{attrs:{documentId:t.documentId}})]},proxy:!0},{key:"DocumentExtradition",fn:function(){return[n("DocumentExtradition",{attrs:{slot:"history",entityTypeGuid:t.entityTypeGuid,id:t.documentId},slot:"history"})]},proxy:!0},{key:"history",fn:function(){return[n("History",{attrs:{slot:"history",entityTypeGuid:t.entityTypeGuid,id:t.documentId},slot:"history"})]},proxy:!0},{key:"relation",fn:function(){return[n("Relation",{attrs:{documentId:t.documentId,isCard:t.isCard}})]},proxy:!0},{key:"documentTasks",fn:function(){return[n("document-tasks",{attrs:{documentId:t.documentId,isCard:t.isCard}})]},proxy:!0},{key:"lifeCycle",fn:function(){return[n("life-cycle",{attrs:{documentId:t.documentId,isCard:t.isCard}})]},proxy:!0},{key:"registrationBlock",fn:function(){return[n("doc-registration",{attrs:{documentId:t.documentId,isCard:t.isCard}})]},proxy:!0},{key:"formByTypeGuid",fn:function(){return[n(t.formByTypeGuid,{tag:"component",attrs:{documentType:t.document.dynamicDocumentTypeId,documentId:t.documentId,isCard:t.isCard}})]},proxy:!0},{key:"autocomlete",fn:function(){return[n("AutocomleteTextArea",{attrs:{value:t.document.subject,options:t.autocomleteTextOptions},on:{valueChanged:t.changeSubject}})]},proxy:!0}])},[n("DxTabbedItem",{attrs:{"tab-panel-options":t.tabPanelOptions}},[n("DxTab",{attrs:{"col-count":12,title:t.$t("document.tabs.main")}},[n("DxGroupItem",{attrs:{"col-span":8,"col-count":1,caption:t.$t("document.groups.captions.main")}},[n("DxSimpleItem",{attrs:{"data-field":"name","editor-options":t.nameOptions}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.name")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.nameRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"documentKind","editor-options":t.documentKindOptions,"editor-type":"dxSelectBox"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.documentKindId")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.documentKindIdRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"subject","editor-type":"dxTextArea",template:"autocomlete"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.subject")}}),t._v(" "),n("DxRequiredRule",{attrs:{message:t.$t("document.validation.subjectRequired")}})],1),t._v(" "),n("DxSimpleItem",{attrs:{template:"formByTypeGuid"}}),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"note","editor-options":t.noteOptions,"editor-type":"dxTextArea"}},[n("DxLabel",{attrs:{location:"left",text:t.$t("document.fields.note")}})],1)],1),t._v(" "),n("DxGroupItem",{attrs:{"col-span":4}},[n("DxSimpleItem",{attrs:{template:"registrationBlock"}}),t._v(" "),n("DxGroupItem",{attrs:{caption:t.$t("document.groups.captions.lifeCycle")}},[n("DxSimpleItem",{attrs:{template:"lifeCycle"}})],1)],1)],1),t._v(" "),n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.relations"),disabled:t.isDataChanged}},[n("DxSimpleItem",{attrs:{"col-span":8,template:"relation"}})],1),t._v(" "),n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.tasks"),disabled:t.isNew}},[n("DxSimpleItem",{attrs:{"col-span":8,template:"documentTasks"}})],1),t._v(" "),n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.history"),disabled:t.isNew}},[n("DxSimpleItem",{attrs:{"col-span":8,template:"history"}})],1),t._v(" "),n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.extradition"),disabled:t.isNew}},[n("DxSimpleItem",{attrs:{"col-span":8,template:"DocumentExtradition"}})],1),t._v(" "),t.canExchangePermission&&t.isExchangeble?n("DxTab",{attrs:{"col-count":8,title:t.$t("document.tabs.exchangeLogs"),disabled:t.isNew}},[n("DxSimpleItem",{attrs:{"col-span":8,template:"ElExchangeLogs"}})],1):t._e()],1)],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.versionOpenState?n("docVersion",{staticClass:"item--drawer",attrs:{documentId:t.documentId,isCard:t.isCard}}):t._e()],1)],1)],1)}),[],!1,null,null,null));e.default=Wn.exports}}]);