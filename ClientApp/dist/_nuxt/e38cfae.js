(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1892:function(t,e,o){"use strict";var n=o(49),r=(o(4),{components:{DxTextArea:n.DxTextArea},props:{value:{type:String,default:function(){return""}},onValueChanged:{type:Function,default:function(){return function(){}}}},data:function(){return{currentValue:this.value}},methods:{}}),l=o(7),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("DxTextArea",{attrs:{value:t.currentValue,height:90,"on-value-changed":function(e){return t.onValueChanged(e.value)}},on:{"update:value":function(e){t.currentValue=e}}})],1)}),[],!1,null,null,null);e.a=component.exports},1935:function(t,e,o){"use strict";var n=o(4),r=o(68),l=o(27),d=o(1892),c=(o(204),o(103)),x=o(67),m={components:{Header:c.a,textArea:d.a,DxSearchPanel:x.DxSearchPanel,DxDataGrid:x.DxDataGrid,DxColumn:x.DxColumn,DxEditing:x.DxEditing,DxHeaderFilter:x.DxHeaderFilter,DxScrolling:x.DxScrolling,DxLookup:x.DxLookup,DxGrouping:x.DxGrouping,DxGroupPanel:x.DxGroupPanel,DxRequiredRule:x.DxRequiredRule,DxExport:x.DxExport,DxColumnChooser:x.DxColumnChooser,DxColumnFixing:x.DxColumnFixing,DxFilterRow:x.DxFilterRow,DxStateStoring:x.DxStateStoring,DxEmailRule:x.DxEmailRule},props:{company:{type:Object,default:function(){}}},data:function(){var t=this.company.data.id;return{dataSource:{store:this.$dxStore({key:"id",loadUrl:n.a.contragents.Contact,insertUrl:n.a.contragents.Contact,updateUrl:n.a.contragents.Contact,removeUrl:n.a.contragents.Contact}),filter:["companyId","=",t]},entityType:l.a.Contact,statusDataSource:this.$store.getters["status/status"](this)}},methods:{onInitNewRow:function(t){t.data.companyId=this.company.data.id,t.data.status=this.statusDataSource[r.b.Active].id},onRowUpdating:function(t){t.newData=Object.assign(t.oldData,t.newData)},getActiveCompanies:function(t){return{store:this.$dxStore({key:"id",loadUrl:n.a.contragents.CounterPart}),paginate:!0,filter:t.data?["status","=",r.b.Active,"or","id","=",t.data.companyId]:void 0}},onValueChanged:function(t,e){e.setValue(t),e.component.updateDimensions()}}},D=o(7),f=Object(D.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("Header",{attrs:{headerTitle:t.$t("menu.contacts")}}),t._v(" "),o("DxDataGrid",{attrs:{id:"gridContainer","show-borders":!0,errorRowEnabled:!1,"data-source":t.dataSource,"remote-operations":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},on:{"row-updating":t.onRowUpdating,"init-new-row":t.onInitNewRow},scopedSlots:t._u([{key:"textAreaEditor",fn:function(e){return[o("textArea",{attrs:{value:e.data.value,"on-value-changed":function(o){return t.onValueChanged(o,e.data)}}})]}}])},[o("DxGroupPanel",{attrs:{visible:!0}}),t._v(" "),o("DxGrouping",{attrs:{"auto-expand-all":!1}}),t._v(" "),o("DxHeaderFilter",{attrs:{visible:!0}}),t._v(" "),o("DxColumnChooser",{attrs:{enabled:!0}}),t._v(" "),o("DxColumnFixing",{attrs:{enabled:!0}}),t._v(" "),o("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),o("DxExport",{attrs:{enabled:!0,"allow-export-selected-data":!0,"file-name":t.$t("menu.contacts")}}),t._v(" "),o("DxStateStoring",{attrs:{enabled:!0,type:"localStorage","storage-key":"Contact-detail"}}),t._v(" "),o("DxEditing",{attrs:{"allow-updating":t.$store.getters["permissions/allowUpdating"](t.entityType),"allow-deleting":t.$store.getters["permissions/allowDeleting"](t.entityType),"allow-adding":t.$store.getters["permissions/allowCreating"](t.entityType),useIcons:!0,mode:"form"}}),t._v(" "),o("DxSearchPanel",{attrs:{position:"after",visible:!0}}),t._v(" "),o("DxScrolling",{attrs:{mode:"virtual"}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"name",caption:t.$t("shared.name"),"data-type":"string"}},[o("DxRequiredRule",{attrs:{message:t.$t("shared.nameRequired")}})],1),t._v(" "),o("DxColumn",{attrs:{"data-field":"companyId",caption:t.$t("parties.fields.company"),visible:!1,"allow-editing":!1}},[o("DxLookup",{attrs:{"allow-clearing":!0,"data-source":t.getActiveCompanies,"value-expr":"id","display-expr":"name"}})],1),t._v(" "),o("DxColumn",{attrs:{"data-field":"department",caption:t.$t("translations.fields.department"),visible:!1}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"jobTitle",caption:t.$t("translations.fields.jobTitleId")}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"phone",caption:t.$t("translations.fields.phones")}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"fax",caption:t.$t("parties.fields.fax"),visible:!1}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"email",caption:t.$t("translations.fields.email")}},[o("DxEmailRule",{attrs:{message:t.$t("translations.fields.emailRule")}})],1),t._v(" "),o("DxColumn",{attrs:{"data-field":"homepage",caption:t.$t("translations.fields.homepage"),visible:!1}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"status",caption:t.$t("translations.fields.status")}},[o("DxLookup",{attrs:{"allow-clearing":!0,"data-source":t.statusDataSource,"value-expr":"id","display-expr":"status"}})],1),t._v(" "),o("DxColumn",{attrs:{"data-field":"note",caption:t.$t("translations.fields.note"),visible:!1,"edit-cell-template":"textAreaEditor"}})],1)],1)}),[],!1,null,null,null).exports;e.a={components:{MasterDetailContacts:f,textArea:d.a,Header:c.a,DxSearchPanel:x.DxSearchPanel,DxDataGrid:x.DxDataGrid,DxColumn:x.DxColumn,DxEditing:x.DxEditing,DxHeaderFilter:x.DxHeaderFilter,DxScrolling:x.DxScrolling,DxLookup:x.DxLookup,DxGrouping:x.DxGrouping,DxGroupPanel:x.DxGroupPanel,DxRequiredRule:x.DxRequiredRule,DxPatternRule:x.DxPatternRule,DxAsyncRule:x.DxAsyncRule,DxExport:x.DxExport,DxColumnChooser:x.DxColumnChooser,DxColumnFixing:x.DxColumnFixing,DxFilterRow:x.DxFilterRow,DxStateStoring:x.DxStateStoring,DxMasterDetail:x.DxMasterDetail,DxEmailRule:x.DxEmailRule,DxButton:x.DxButton},data:function(){var t=this;return{statusDataSource:this.$store.getters["status/status"](this),selectDocument:function(e){t.toDetail(e.key)},codePattern:this.$store.getters["globalProperties/whitespacePattern"],localityStore:{store:this.$dxStore({key:"id",loadUrl:n.a.sharedDirectory.Locality}),paginate:!0},regionStore:{store:this.$dxStore({key:"id",loadUrl:n.a.sharedDirectory.Region}),paginate:!0}}},methods:{allowDeleting:function(t){return this.$store.getters["permissions/allowDeleting"](this.entityType)&&!t.row.data.isCardReadOnly&&!t.row.data.isSystem},onToolbarPreparing:function(t){var e=this;t.toolbarOptions.items.unshift({widget:"button",location:"after",options:{icon:"refresh",onClick:function(){e.dataSource.reload()}}}),t.toolbarOptions.items.unshift({widget:"button",location:"after",options:{icon:"plus",visible:this.$store.getters["permissions/allowCreating"](this.entityType),onClick:this.createCounterPart}})}}}},1974:function(t,e,o){var content=o(2105);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(38).default)("2d7fb391",content,!0,{sourceMap:!1})},2104:function(t,e,o){"use strict";o(1974)},2105:function(t,e,o){var n=o(25)(!1);n.push([t.i,"*{outline:none}.scrool-auto{width:100%;height:100%;overflow:auto}.d-flex{display:flex}.justify-flex-end{justify-content:flex-end}.list__content div{padding-right:5px}.f-size-30{margin:5px;font-size:20px}.js-space-between{align-items:center}.thread-text-status{text-align:right;margin-left:auto;padding:0 5px;font-size:14px}.thread-text-status .task__item{white-space:nowrap}.thread-text-status i{font-size:16px}.mY-1{margin:10px 0}.ml-1{margin-left:1.2em}.current-comment{background:#ecfff46b}.item--status{justify-content:flex-end}.item--status .icon--status{margin:0 5px;display:flex;width:20px;height:100%}.custom-icon{margin:0 5px;display:flex;width:20px;height:100%}.message-body{margin-left:30px}.comment__item{box-sizing:border-box;white-space:normal;border:1px solid #ddd;border-left:2px solid #009a40;padding:5px;border-radius:2px;border-top-left-radius:4px;border-bottom-left-radius:4px}.expired{color:red}.text--bold{font-weight:500}.text-italic{font-style:italic}.link:hover{text-decoration:underline;color:#f90}.container--grid{display:grid;grid-template-columns:1fr 1fr}.container--grid .item{justify-self:flex-start;width:100%}.quide-page{padding:20px 0 20px}.quide-page .quide-page__header{padding:0;margin:0 50px;padding-bottom:20px}.quide-page .quide-page__header .header-title{font-size:26px !important;color:#777}.quide-page .quide-page__header h2{font-weight:450;padding:0;margin:0 !important}.quide-page .title{color:#777}.quide-page .description{color:#aaa;font-size:0.9em}.message{box-sizing:border-box;padding:8px 0;font-size:15px;align-items:center}.message .message__label{display:block;padding-right:8px}.message .message__icon{display:block;font-size:18px;padding-right:8px}.cursive{font-style:italic}.content{line-height:1.5}.content h2{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small .content-block{margin-left:20px;margin-right:20px}.responsive-paddings{padding:20px}.screen-large .responsive-paddings{padding:40px}.dx-card.wide-card{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content{height:100%}.with-footer>.dx-scrollable-wrapper>.dx-scrollable-container>.dx-scrollable-content>.dx-scrollview-content{display:flex;flex-direction:column;min-height:100%}#gridContainer{max-height:85vh}.f-direction-column{height:200px;justify-content:space-between;flex-direction:column}.history{margin:10px 0}\n",""]),t.exports=n},2301:function(t,e,o){"use strict";o.r(e);var n=o(96),r=o(5),l=(o(223),o(30),o(4)),d=o(1065),c=o(1935),x=o(20),m=o.n(x),D={mixins:[c.a],components:{DxDateBox:d.DxDateBox,DxForm:m.a,DxGroupItem:x.DxGroupItem,DxSimpleItem:x.DxSimpleItem,DxLabel:x.DxLabel,DxRequiredRule:x.DxRequiredRule,DxButtonItem:x.DxButtonItem},data:function(){return{dataSource:[],employeeStore:this.$dxStore({key:"id",loadUrl:l.a.company.Employee}),formData:{startDate:Date.now(),endDate:Date.now()}}},computed:{dateBoxOptions:function(){return{type:"date",openOnFieldClick:!0,dateSerializationFormat:"yyyy-MM-dd"}}},methods:{onGet:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.form.instance.validate().isValid&&t.$awn.asyncBlock(t.$axios.get("api/history/seq/from=".concat(t.formatDate(t.formData.startDate),"&to=").concat(t.formatDate(t.formData.endDate))),(function(e){t.dataSource=e.data.data}),(function(e){t.$awn.alert()}));case 2:case"end":return e.stop()}}),e)})))()},formatDate:function(t){return new Date(t).toISOString().split("T")[0]},toolbarPreparing:function(t){var e=this;t.toolbarOptions.items=[{location:"after",widget:"dxButton",options:{text:this.$t("buttons.show")},onClick:function(){e.onGet()}},{location:"after",widget:"dxButton",options:{hint:this.$t("labels.refresh"),icon:"refresh"},onClick:function(){e.dataSource.reload()}}].concat(Object(n.a)(t.toolbarOptions.items))}}},f=(o(2104),o(7)),component=Object(f.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("Header",{attrs:{headerTitle:t.$t("document.tabs.history")}}),t._v(" "),n("DxForm",{ref:"form",staticClass:"history",attrs:{"form-data":t.formData},on:{"update:formData":function(e){t.formData=e},"update:form-data":function(e){t.formData=e}}},[n("DxGroupItem",{attrs:{"col-count":2}},[n("DxSimpleItem",{attrs:{"data-field":"startDate","editor-type":"dxDateBox","editor-options":t.dateBoxOptions}},[n("DxLabel",{attrs:{text:t.$t("shared.begining")}}),t._v(" "),n("DxRequiredRule")],1),t._v(" "),n("DxSimpleItem",{attrs:{"data-field":"endDate","editor-type":"dxDateBox","editor-options":t.dateBoxOptions}},[n("DxLabel",{attrs:{text:t.$t("shared.end")}}),t._v(" "),n("DxRequiredRule")],1)],1)],1),t._v(" "),n("DxDataGrid",{attrs:{id:"gridContainer",errorRowEnabled:!1,"show-borders":!0,"data-source":t.dataSource,"remote-operations":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,"load-panel":{enabled:!0,indicatorSrc:o(221)}},on:{"toolbar-preparing":t.toolbarPreparing}},[n("DxGroupPanel",{attrs:{visible:!0}}),t._v(" "),n("DxGrouping",{attrs:{"auto-expand-all":!1}}),t._v(" "),n("DxHeaderFilter",{attrs:{visible:!0}}),t._v(" "),n("DxColumnChooser",{attrs:{enabled:!0}}),t._v(" "),n("DxColumnFixing",{attrs:{enabled:!0}}),t._v(" "),n("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),n("DxExport",{attrs:{enabled:!0,"allow-export-selected-data":!0,"file-name":t.$t("document.tabs.history")}}),t._v(" "),n("DxStateStoring",{attrs:{type:"localStorage","storage-key":"history"}}),t._v(" "),n("DxSearchPanel",{attrs:{position:"after",visible:!0}}),t._v(" "),n("DxScrolling",{attrs:{mode:"virtual"}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"createdDate",caption:t.$t("history.create"),"data-type":"datetime"}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"user",caption:t.$t("companyStructure.employee.employees"),"data-type":"string"}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"action",caption:t.$t("history.action")}})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);