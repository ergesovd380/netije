(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{2318:function(t,e,n){"use strict";n.r(e);n(64);var o=n(151),r=n(61),l=n.n(r),d=n(68),c=n(27),x=n(4),D=n(103),m=n(67),v={components:{Header:D.a,DxSearchPanel:m.DxSearchPanel,DxDataGrid:m.DxDataGrid,DxColumn:m.DxColumn,DxEditing:m.DxEditing,DxHeaderFilter:m.DxHeaderFilter,DxScrolling:m.DxScrolling,DxLookup:m.DxLookup,DxGrouping:m.DxGrouping,DxGroupPanel:m.DxGroupPanel,DxRequiredRule:m.DxRequiredRule,DxAsyncRule:m.DxAsyncRule,DxExport:m.DxExport,DxColumnChooser:m.DxColumnChooser,DxColumnFixing:m.DxColumnFixing,DxFilterRow:m.DxFilterRow,DxStateStoring:m.DxStateStoring,employeeSelectBox:o.a},data:function(){return{dataSource:new l.a({store:this.$dxStore({key:"id",loadUrl:x.a.company.ManagersAssistant,insertUrl:x.a.company.ManagersAssistant,updateUrl:x.a.company.ManagersAssistant,removeUrl:x.a.company.ManagersAssistant}),paginate:!0,pageSize:10}),entityType:c.a.ManagersAssistant,statusDataSource:this.$store.getters["status/status"](this),employeeStore:this.$dxStore({key:"id",loadUrl:x.a.company.Employee}),onManagerIdChanged:function(t,e){this.defaultSetCellValue(t,e)},onAssistantIdChanged:function(t,e){this.defaultSetCellValue(t,e)}}},methods:{onValueChanged:function(t,e){e.setValue(t),e.component.updateDimensions()},customizeText:function(t){var e;if(t.value)return null===(e=t.value)||void 0===e?void 0:e.name},onInitNewRow:function(t){t.data.status=this.statusDataSource[d.b.Active].id},onRowUpdating:function(t){t.newData=Object.assign(t.oldData,t.newData)},getFilteredManager:function(t){return{store:this.employeeStore,filter:t.data?["id","<>",t.data.assistantId,"or","status","=",d.b.Active]:void 0}},getFilteredAssistant:function(t){return{store:this.employeeStore,filter:t.data?["id","<>",t.data.managerId,"or","status","=",d.b.Active]:void 0}}}},w=n(7),component=Object(w.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("Header",{attrs:{headerTitle:t.$t("menu.managersAssistant")}}),t._v(" "),o("DxDataGrid",{attrs:{id:"gridContainer",errorRowEnabled:!1,"show-borders":!0,"data-source":t.dataSource,"remote-operations":!1,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,"load-panel":{enabled:!0,indicatorSrc:n(221)}},on:{"row-updating":t.onRowUpdating,"init-new-row":t.onInitNewRow},scopedSlots:t._u([{key:"manager",fn:function(e){var n=e.data;return[o("employee-select-box",{attrs:{showClearButton:!1,value:n.value},on:{valueChanged:function(e){return t.onValueChanged(e,n)}}})]}},{key:"assistant",fn:function(e){var n=e.data;return[o("employee-select-box",{attrs:{showClearButton:!1,value:n.value},on:{valueChanged:function(e){return t.onValueChanged(e,n)}}})]}}])},[o("DxGroupPanel",{attrs:{visible:!0}}),t._v(" "),o("DxGrouping",{attrs:{"auto-expand-all":!1}}),t._v(" "),o("DxHeaderFilter",{attrs:{visible:!0}}),t._v(" "),o("DxColumnChooser",{attrs:{enabled:!0}}),t._v(" "),o("DxColumnFixing",{attrs:{enabled:!0}}),t._v(" "),o("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),o("DxExport",{attrs:{enabled:!0,"allow-export-selected-data":!0,"file-name":t.$t("menu.managersAssistant")}}),t._v(" "),o("DxStateStoring",{attrs:{enabled:!0,type:"localStorage","storage-key":"managersAssistant"}}),t._v(" "),o("DxEditing",{attrs:{"allow-updating":t.$store.getters["permissions/allowUpdating"](t.entityType),"allow-deleting":t.$store.getters["permissions/allowDeleting"](t.entityType),"allow-adding":t.$store.getters["permissions/allowCreating"](t.entityType),useIcons:!0,mode:"form"}}),t._v(" "),o("DxSearchPanel",{attrs:{position:"after",visible:!0}}),t._v(" "),o("DxScrolling",{attrs:{mode:"virtual"}}),t._v(" "),o("DxColumn",{attrs:{"data-type":"string",customizeText:t.customizeText,editCellTemplate:"manager","data-field":"manager",caption:t.$t("translations.fields.managerId"),"set-cell-value":t.onManagerIdChanged}}),t._v(" "),t._v(" "),o("DxColumn",{attrs:{"data-type":"string",customizeText:t.customizeText,editCellTemplate:"assistant","data-field":"assistant",caption:t.$t("translations.fields.assistantId"),"set-cell-value":t.onAssistantIdChanged}}),t._v(" "),t._v(" "),o("DxColumn",{attrs:{"data-field":"preparesResolution",caption:t.$t("translations.fields.preparesResolution"),"data-type":"boolean"}}),t._v(" "),o("DxColumn",{attrs:{"data-field":"status",caption:t.$t("translations.fields.status")}},[o("DxLookup",{attrs:{"allow-clearing":!0,"data-source":t.statusDataSource,"value-expr":"id","display-expr":"status"}}),t._v(" "),o("DxRequiredRule")],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);