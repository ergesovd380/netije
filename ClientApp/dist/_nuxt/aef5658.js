(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{2282:function(e,t,n){"use strict";n.r(t);n(64);var o=n(151),r=n(68),l=n(27),d=n(569),m=n(430),x=n(592),c=n(4),D=n(67),w={components:{DxTabPanel:m.DxTabPanel,DxItem:m.DxItem,DxSearchPanel:D.DxSearchPanel,DxDataGrid:D.DxDataGrid,DxColumn:D.DxColumn,DxEditing:D.DxEditing,DxHeaderFilter:D.DxHeaderFilter,DxScrolling:D.DxScrolling,DxLookup:D.DxLookup,DxFilterRow:D.DxFilterRow,permissions:x.a,recipientSelectBox:d.a},props:{data:{type:Object,default:function(){return{}}}},data:function(){var e=this.data.data,t=e.id;return{id:t,responsibleEmployeeId:e.responsibleEmployeeId,store:this.$dxStore({key:"memberId",insertUrl:c.a.docFlow.RegistrationGroupMembers,loadUrl:c.a.docFlow.RegistrationGroupMembers+t,removeUrl:c.a.docFlow.RegistrationGroupMembers+t}),statusDataSource:this.$store.getters["status/status"],tabPanelOptions:{focusStateEnabled:!1,animationEnabled:!1,swipeEnabled:!1,loop:"true"}}},computed:{allowAdding:function(){return this.$store.getters["permissions/IsAdmin"]||this.$store.getters["permissions/employeeId"]==this.responsibleEmployeeId}},methods:{onValueChanged:function(e,t){t.setValue(e),t.component.updateDimensions()},getActiveRecipients:function(e){return{store:this.$dxStore({key:"id",loadUrl:c.a.recipient.list}),paginate:!0,filter:e.data?["status","=",r.b.Active,"or","id","=",e.data.id]:void 0}},rowInserting:function(e){e.data.memberId=e.data.member.name,delete e.data.member},onInitNewRow:function(e){e.data.member,e.data.registrationGroupId=this.id},allowDeleting:function(e){return!(!this.$store.getters["permissions/IsAdmin"]&&!this.$store.getters["permissions/employeeId"]==this.responsibleEmployeeId)&&e.row.key!=this.responsibleEmployeeId}}},v=n(7),f=Object(v.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DxTabPanel",{attrs:{"tab-panel-options":e.tabPanelOptions},scopedSlots:e._u([{key:"members-list",fn:function(){return[n("DxDataGrid",{attrs:{id:"gridContainer",errorRowEnabled:!1,"show-borders":!0,"data-source":e.store,"remote-operations":!1},on:{"row-inserting":e.rowInserting,"init-new-row":e.onInitNewRow},scopedSlots:e._u([{key:"recipientSelectBox",fn:function(t){var o=t.data;return[n("recipient-select-box",{attrs:{valueExpr:"id",value:o.value},on:{valueChanged:function(t){return e.onValueChanged(t,o)}}})]}}])},[n("DxHeaderFilter",{attrs:{visible:!0}}),e._v(" "),n("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":e.allowDeleting,"allow-adding":e.allowAdding,useIcons:!0,mode:"row"}}),e._v(" "),n("DxFilterRow",{attrs:{visible:!0}}),e._v(" "),n("DxSearchPanel",{attrs:{position:"after",visible:!0}}),e._v(" "),n("DxScrolling",{attrs:{mode:"virtual"}}),e._v(" "),n("DxColumn",{attrs:{editCellTemplate:"recipientSelectBox","data-field":"member.name",caption:e.$t("shared.name")}}),e._v(" "),e._v(" "),n("DxColumn",{attrs:{allowEditing:!1,allowFiltering:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1,allowHeaderFiltering:!1,allowGrouping:!1,allowFixing:!1,allowExporting:!1,"allow-sorting":!1,"data-field":"member.description","data-type":"string",caption:e.$t("shared.description")}})],1)]},proxy:!0}])},[n("DxItem",{attrs:{title:e.$t("translations.fields.members"),template:"members-list"}})],1)}),[],!1,null,null,null).exports,R=n(103),h=(n(61),{components:{MemberList:f,DxMasterDetail:D.DxMasterDetail,Header:R.a,DxSearchPanel:D.DxSearchPanel,DxDataGrid:D.DxDataGrid,DxColumn:D.DxColumn,DxEditing:D.DxEditing,DxHeaderFilter:D.DxHeaderFilter,DxScrolling:D.DxScrolling,DxLookup:D.DxLookup,DxGrouping:D.DxGrouping,DxGroupPanel:D.DxGroupPanel,DxRequiredRule:D.DxRequiredRule,DxPatternRule:D.DxPatternRule,DxExport:D.DxExport,DxColumnChooser:D.DxColumnChooser,DxColumnFixing:D.DxColumnFixing,DxFilterRow:D.DxFilterRow,DxStateStoring:D.DxStateStoring,employeeSelectBox:o.a,DxButton:D.DxButton},data:function(){return{dataSource:this.$dxStore({key:"id",loadUrl:c.a.docFlow.RegistrationGroup,insertUrl:c.a.docFlow.RegistrationGroup,updateUrl:c.a.docFlow.RegistrationGroup,removeUrl:c.a.docFlow.RegistrationGroup}),entityType:l.a.RegistrationGroup,statusDataSource:this.$store.getters["status/status"](this),indexPattern:this.$store.getters["globalProperties/whitespacePattern"]}},methods:{edit:function(e){this.$refs.gridContainer.instance.editRow(e.rowIndex)},onValueChanged:function(e,t){t.setValue(e),t.component.updateDimensions()},customizeText:function(e){if(e.value)return e.value.name},onInitNewRow:function(e){e.data.status=this.statusDataSource[r.b.Active].id},onRowUpdating:function(e){e.newData=Object.assign(e.oldData,e.newData)},getActiveEmployees:function(e){return{store:this.$dxStore({key:"id",loadUrl:c.a.company.Employee}),paginate:!0,filter:e.data?["status","=",r.b.Active,"or","responsibleEmployeeId","=",e.data.responsibleEmployeeId]:void 0}}}}),y=Object(v.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("main",[o("Header",{attrs:{headerTitle:e.$t("menu.registrationGroup")}}),e._v(" "),o("DxDataGrid",{ref:"gridContainer",attrs:{id:"gridContainer","show-borders":!0,errorRowEnabled:!1,"data-source":e.dataSource,"remote-operations":!1,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,"load-panel":{enabled:!0,indicatorSrc:n(221)}},on:{"row-updating":e.onRowUpdating,"init-new-row":e.onInitNewRow},scopedSlots:e._u([{key:"responsibleEmployee",fn:function(t){var n=t.data;return[o("employee-select-box",{attrs:{showClearButton:!1,value:n.value},on:{valueChanged:function(t){return e.onValueChanged(t,n)}}})]}},{key:"masterDetailTemplate",fn:function(data){return[o("member-list",{attrs:{data:data.data}})]}}])},[o("DxGroupPanel",{attrs:{visible:!0}}),e._v(" "),o("DxGrouping",{attrs:{"auto-expand-all":!1}}),e._v(" "),o("DxExport",{attrs:{enabled:!0,"allow-export-selected-data":!0,"file-name":e.$t("menu.registrationGroup")}}),e._v(" "),o("DxFilterRow",{attrs:{visible:!0}}),e._v(" "),o("DxHeaderFilter",{attrs:{visible:!0}}),e._v(" "),o("DxColumnChooser",{attrs:{enabled:!0}}),e._v(" "),o("DxColumnFixing",{attrs:{enabled:!0}}),e._v(" "),o("DxStateStoring",{attrs:{enabled:!0,type:"localStorage","storage-key":"RegistrationGroup"}}),e._v(" "),o("DxEditing",{attrs:{"allow-updating":e.$store.getters["permissions/IsAdmin"],"allow-deleting":e.$store.getters["permissions/IsAdmin"],"allow-adding":e.$store.getters["permissions/IsAdmin"],useIcons:!0,mode:"form"}}),e._v(" "),o("DxSearchPanel",{attrs:{position:"after",visible:!0}}),e._v(" "),o("DxScrolling",{attrs:{mode:"virtual"}}),e._v(" "),o("DxColumn",{attrs:{"data-field":"canRegisterOutgoing",caption:e.$t("translations.fields.canRegisterOutgoing"),"data-type":"boolean"}}),e._v(" "),o("DxColumn",{attrs:{"data-field":"canRegisterIncoming",caption:e.$t("translations.fields.canRegisterIncoming"),"data-type":"boolean"}}),e._v(" "),o("DxColumn",{attrs:{"data-field":"canRegisterInternal",caption:e.$t("translations.fields.canRegisterInternal"),"data-type":"boolean"}}),e._v(" "),o("DxColumn",{attrs:{"data-field":"canRegisterContractual",caption:e.$t("translations.fields.canRegisterContractual"),"data-type":"boolean"}}),e._v(" "),o("DxColumn",{attrs:{"visible-index":0,"data-field":"name",caption:e.$t("shared.name"),"data-type":"string"}},[o("DxRequiredRule",{attrs:{message:e.$t("shared.nameRequired")}})],1),e._v(" "),o("DxColumn",{attrs:{"visible-index":1,customizeText:e.customizeText,"data-field":"responsibleEmployee",caption:e.$t("docFlow.fields.responsibleId"),editCellTemplate:"responsibleEmployee"}},[o("DxRequiredRule",{attrs:{message:e.$t("shared.responsibleEmployeeRequired")}})],1),e._v(" "),e._v(" "),o("DxColumn",{attrs:{"visible-index":2,"data-field":"index",caption:e.$t("translations.fields.index")}},[o("DxRequiredRule",{attrs:{message:e.$t("translations.fields.indexRequired")}}),e._v(" "),o("DxPatternRule",{attrs:{pattern:e.indexPattern,message:e.$t("translations.fields.indexRule")}})],1),e._v(" "),o("DxColumn",{attrs:{"data-field":"status",caption:e.$t("translations.fields.status")}},[o("DxLookup",{attrs:{"allow-clearing":!0,"data-source":e.statusDataSource,"value-expr":"id","display-expr":"status"}})],1),e._v(" "),o("DxMasterDetail",{attrs:{enabled:!0,template:"masterDetailTemplate"}})],1)],1)}),[],!1,null,null,null);t.default=y.exports}}]);