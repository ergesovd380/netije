(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1953:function(e,t,r){"use strict";r(48),r(40),r(43),r(50),r(51);var n=r(14),o=(r(64),r(20)),l=r(67),c=r(569),d={components:{DxDataGrid:l.DxDataGrid,DxEditing:l.DxEditing,DxColumn:l.DxColumn,DxGrouping:l.DxGrouping,DxGroupPanel:l.DxGroupPanel,DxPager:l.DxPager,DxPaging:l.DxPaging,DxLookup:l.DxLookup,DxSearchPanel:l.DxSearchPanel,DxRequiredRule:l.DxRequiredRule,RecipientSelectBox:c.a},props:{value:{type:Array,default:[]}},computed:{dataSource:function(){return this.value}},methods:{onValueChanged:function(e,t){t.setValue(e)},customizeText:function(e){if(e.value)return e.value.name}},updated:function(){this.$emit("visibilitiesChanged",this.dataSource)}},x=r(7),m=Object(x.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("DxDataGrid",{attrs:{"data-source":e.dataSource,height:"300"},scopedSlots:e._u([{key:"recipient",fn:function(t){return[r("RecipientSelectBox",{attrs:{value:t.data.value,displayExpr:"name"},on:{valueChanged:function(r){return e.onValueChanged(r,t.data)}}})]}}])},[r("DxEditing",{attrs:{mode:"row","use-icons":!0,"allow-adding":!0,"allow-updating":!0,"allow-deleting":!0}}),e._v(" "),r("DxColumn",{attrs:{"data-field":"recipient","edit-cell-template":"recipient",caption:e.$t("companyStructure.company.whoSees"),customizeText:e.customizeText}},[r("DxRequiredRule")],1),e._v(" "),r("DxColumn",{attrs:{"data-field":"visibleMember","edit-cell-template":"recipient",caption:e.$t("companyStructure.company.whomHeSees"),customizeText:e.customizeText}},[r("DxRequiredRule")],1)],1)}),[],!1,null,null,null).exports,h=r(567),f=r(103),D=r(163),v=r(68),y=r(4);function R(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var S={components:{DxForm:o.DxForm,DxSimpleItem:o.DxSimpleItem,DxGroupItem:o.DxGroupItem,DxRequiredRule:o.DxRequiredRule,DxLabel:o.DxLabel,Header:f.a,Toolbar:D.a,RecipientTagBox:h.a,RecipientSelectBox:c.a,RuleRecipientsGrid:m},props:{value:{type:Object},isCard:{type:Boolean,default:!1}},computed:{rule:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({name:"",status:v.b.Active,recipients:[],excludedMembers:[],note:""},this.value)},isNew:function(){return!this.rule.id},headerTitle:function(){return this.isNew?this.$t("companyStructure.company.visibilityRules"):this.rule.name},statusOptions:function(){return{dataSource:this.$store.getters["status/status"](this),valueExpr:"id",displayExpr:"status"}}},methods:{recipientsChanged:function(e){this.rule.recipients=e},excludedMembersChanged:function(e){this.rule.excludedMembers=e},postRule:function(){var e=this;this.$awn.asyncBlock(this.$axios.post(y.a.visibilityRule.rule,this.rule),(function(t){e.isCard||e.$router.go(-1),e.$awn.success()}),(function(t){e.$alert()}))},putRule:function(){var e=this;this.$awn.asyncBlock(this.$axios.put(y.a.visibilityRule.rule+"/"+this.rule.id,this.rule),(function(t){e.$awn.success(),e.isCard||e.$router.go(-1)}),(function(t){e.$alert()}))},saveChanges:function(){this.isNew?this.postRule():this.putRule()}}},w=S,O=Object(x.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Header",{attrs:{headerTitle:e.headerTitle,isbackButton:!e.isCard,isNew:e.isNew}}),e._v(" "),r("toolbar",{attrs:{canSave:!0},on:{saveChanges:e.saveChanges}}),e._v(" "),r("DxForm",{attrs:{"form-data":e.rule},scopedSlots:e._u([{key:"excludedMembers",fn:function(){return[r("RecipientTagBox",{attrs:{value:e.rule.excludedMembers},on:{valueChanged:function(t){return e.excludedMembersChanged(t)}}})]},proxy:!0},{key:"ruleRecipients",fn:function(){return[r("RuleRecipientsGrid",{attrs:{value:e.rule.recipients,recipients:e.rule.recipients,visibleMembers:e.rule.visibleMembers},on:{recipientsChanged:e.recipientsChanged}})]},proxy:!0}])},[r("DxSimpleItem",{attrs:{"data-field":"name","editor-type":"dxTextBox"}},[r("DxLabel",{attrs:{text:e.$t("shared.name")}}),e._v(" "),r("DxRequiredRule")],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"status","editor-type":"dxSelectBox","editor-options":e.statusOptions}},[r("DxLabel",{attrs:{text:e.$t("shared.status")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"recipients",template:"ruleRecipients"}},[r("DxLabel",{attrs:{visible:!1}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"excludedMembers",template:"excludedMembers"}},[r("DxLabel",{attrs:{text:e.$t("companyStructure.company.seesApartFrom")}})],1),e._v(" "),r("DxSimpleItem",{attrs:{"data-field":"note","editor-type":"dxTextArea","editor-options":{height:"120"}}},[r("DxLabel",{attrs:{text:e.$t("companyStructure.company.note")}})],1)],1)],1)}),[],!1,null,null,null);t.a=O.exports},2330:function(e,t,r){"use strict";r.r(t);var n={components:{RuleCard:r(1953).a}},o=r(7),component=Object(o.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("RuleCard")}),[],!1,null,null,null);t.default=component.exports}}]);